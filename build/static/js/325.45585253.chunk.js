"use strict";(self.webpackChunkmarketplace=self.webpackChunkmarketplace||[]).push([[325],{4998:function(e,t,n){n.d(t,{r:function(){return h}});var r,o,i,a,l,s,c=n(2791),u=["title","titleId"];function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}function d(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function m(e,t){var n=e.title,m=e.titleId,h=d(e,u);return c.createElement("svg",f({xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 48 48",ref:t,"aria-labelledby":m},h),n?c.createElement("title",{id:m},n):null,r||(r=c.createElement("path",{d:"M6,15H36",transform:"translate(6 15)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),o||(o=c.createElement("path",{d:"M36,19H6",transform:"translate(6 19)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),i||(i=c.createElement("path",{d:"M15,11H27",transform:"translate(15 11)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),a||(a=c.createElement("path",{d:"M27,7H15",transform:"translate(15 7)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),l||(l=c.createElement("path",{d:"M9,12.5h2a2,2,0,1,1-2,2v-5a4,4,0,0,1,4-4",transform:"translate(9 5.5)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),s||(s=c.createElement("path",{d:"M3,12.5H5a2,2,0,1,1-2,2v-5a4,4,0,0,1,4-4",transform:"translate(3 5.5)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})))}var h=c.forwardRef(m);n.p},9325:function(e,t,n){n.r(t),n.d(t,{default:function(){return dt}});var r=n(1413),o=n(885),i=n(6030),a=n(6871),l=n(2791),s=n(4687);var c,u,f=function(e,t){var n=(0,l.useState)(e),r=(0,o.Z)(n,2),i=r[0],a=r[1];return(0,l.useEffect)((function(){var n=setTimeout((function(){a(e)}),t);return function(){clearTimeout(n)}}),[e,t]),i},d=n(5454),m=n(4569),h=n.n(m),_=n(5248),p=n(9316),v=function(e){var t=parseInt(e,10);return[Math.floor(t/3600),Math.floor(t/60)%60,t%60].map((function(e){return e<10?"0"+e:e})).filter((function(e,t){return"00"!==e||t>0})).join(":")},b=n(4643),k=["title","titleId"];function y(){return y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(this,arguments)}function g(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function j(e,t){var n=e.title,r=e.titleId,o=g(e,k);return l.createElement("svg",y({xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 48 48",ref:t,"aria-labelledby":r},o),n?l.createElement("title",{id:r},n):null,c||(c=l.createElement("circle",{cx:18,cy:18,r:18,transform:"translate(6 6)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),u||(u=l.createElement("path",{d:"M12,7V17l6,6",transform:"translate(12 7)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})))}var w,x,O=l.forwardRef(j),E=(n.p,n(184)),S=function(e){var t=e.mobileView,n=e.bookMeta,r=e.preview,s=(0,i.v9)((function(e){return e.UserState})),c=(0,i.v9)((function(e){return e.WalletState})),u=(0,l.useState)(0),f=(0,o.Z)(u,2),d=f[0],m=f[1],k=(0,l.useState)(0),y=(0,o.Z)(k,2),g=y[0],j=y[1],w=(0,l.useState)(null),x=(0,o.Z)(w,2),S=x[0],L=x[1],N=(0,i.I0)(),Z=(0,a.s0)();return(0,l.useEffect)((function(){(0,p.fb)(t)&&!1!==t||(0,p.fb)(r)&&!r&&((0,p.fb)(c.wallet.provider)?L(c.wallet.address):Z(-1))}),[t,c,Z,r]),(0,l.useEffect)((function(){!r&&(0,p.fb)(n)&&((0,p.fb)(S)||(0,p.fb)(t)&&!0===t)&&h()({url:"".concat(_._,"/api/reader/read-time"),method:"GET",headers:{address:S,"user-id":s.user.uid,authorization:"Bearer ".concat(s.tokens.acsTkn.tkn)},params:{bookAddress:n.book_address}}).then((function(e){200===e.status&&(m(e.data.read_time),j(e.data.read_time))})).catch((function(e){N((0,b.e1)("ERROR"))}))}),[t,n,N,S,r,s]),(0,l.useEffect)((function(){if((0,p.fb)(n)||(0,p.fb)(S)||(0,p.fb)(t)||!0===t){var e=setInterval((function(){m((function(e){return e+1}))}),1e3);return function(){clearInterval(e)}}}),[t,n,S]),(0,l.useEffect)((function(){if(!r){var e=d;e-g>10&&h()({url:"".concat(_._,"/api/reader/read-time"),method:"PUT",headers:{address:S,"user-id":s.user.uid,authorization:"Bearer ".concat(s.tokens.acsTkn.tkn)},data:{bookAddress:n.book_address,readTime:e}}).then((function(e){200===e.status&&j(e.data.read_time)})).catch((function(e){N((0,b.e1)("ERROR"))}))}}),[n,d,S,g,N,r,s]),(0,E.jsxs)("div",{className:"readtime",children:[(0,E.jsx)(O,{width:"3rem",height:"3rem",stroke:"currentColor"}),(0,E.jsx)("div",{className:"readtime__time",children:v(d)})]})},L=n(9135),N=function(e){var t=e.show,n=void 0!==t&&t,r=e.setShow,o=void 0===r?function(){}:r,i=e.position,a=void 0===i?"right":i,l=e.title,s=void 0===l?"":l,c=e.children;return(0,E.jsxs)("div",{className:function(){var e=["sidepanel"];return!0===n&&e.push("sidepanel--open"),e.push("sidepanel--".concat(a)),e.join(" ")}(),children:[(0,E.jsxs)("div",{className:"sidepanel__header",children:[(0,E.jsx)("div",{className:"sidepanel__header__close-btn",children:(0,E.jsx)(d.Z,{type:"icon",onClick:function(){return o(!1)},children:(0,E.jsx)(L.r,{width:24,height:24,stroke:"currentColor"})})}),(0,E.jsx)("div",{className:"sidepanel__header__title typo__head--6",children:s})]}),(0,E.jsx)("div",{className:"sidepanel__body",children:c})]})},Z=n(5899),R={fontSize:{min:100,max:250,step:10,offset:50},lineHeight:{min:1,max:2,step:.25},fontFamily:[{id:"reader-font-family-arial",name:"Arial",value:"'Arial', sans-serif"},{id:"reader-font-family-times",name:"Times",value:"'Times New Roman', serif"},{id:"reader-font-family-trebuchet",name:"Trebuchet",value:"'Trebuchet MS', sans-serif"}],themes:[{id:"reader-theme-light",name:"Light",backgroundColor:"white",color:"black",bodyTheme:"light"},{id:"reader-theme-dark",name:"Dark",backgroundColor:"black",color:"white",bodyTheme:"dark"}]},C={fontSize:170,lineHeight:1.6,fontFamily:R.fontFamily.find((function(e){return"reader-font-family-arial"===e.id})),theme:R.themes.find((function(e){return"reader-theme-light"===e.id}))},z={body:{"--font-family":C.fontFamily.value,"--font-size":C.fontSize+"%","--line-height":C.lineHeight,"--background-color":C.theme.backgroundColor,"--color":C.theme.color,"background-color":"var(--background-color) !important",color:"var(--color) !important","font-size":"var(--font-size) !important"},p:{"text-align":"justify","font-family":"var(--font-family) !important","line-height":"var(--line-height) !important"}},I=["title","titleId"];function P(){return P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P.apply(this,arguments)}function W(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function F(e,t){var n=e.title,r=e.titleId,o=W(e,I);return l.createElement("svg",P({xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 48 48",ref:t,"aria-labelledby":r},o),n?l.createElement("title",{id:r},n):null,w||(w=l.createElement("line",{y2:28,transform:"translate(24 10)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),x||(x=l.createElement("line",{x2:28,transform:"translate(10 24)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})))}var M,T=l.forwardRef(F),A=(n.p,["title","titleId"]);function H(){return H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H.apply(this,arguments)}function V(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function B(e,t){var n=e.title,r=e.titleId,o=V(e,A);return l.createElement("svg",H({xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 48 48",ref:t,"aria-labelledby":r},o),n?l.createElement("title",{id:r},n):null,M||(M=l.createElement("line",{x2:28,transform:"translate(10 24)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})))}var J,q=l.forwardRef(B),D=(n.p,function(e){var t=e.value,n=void 0===t?0:t,r=e.setValue,o=void 0===r?function(){}:r,i=e.unit,a=void 0===i?"":i,l=e.min,s=void 0===l?0:l,c=e.max,u=void 0===c?100:c,f=e.step,d=void 0===f?1:f,m=e.offset,h=void 0===m?0:m;return(0,E.jsxs)("div",{className:"number-input",children:[(0,E.jsx)("div",{className:"number-input__button",onClick:function(){o(Math.max(s,n-d))},children:(0,E.jsx)(q,{width:24,stroke:"currentColor"})}),(0,E.jsxs)("div",{className:"number-input__value",children:[n-h,a]}),(0,E.jsx)("div",{className:"number-input__button",onClick:function(){o(Math.min(u,n+d))},children:(0,E.jsx)(T,{width:24,stroke:"currentColor"})})]})}),G=function(e){var t=e.rendition,n=(0,l.useState)((0,r.Z)((0,r.Z)({},C),{},{fontFamily:C.fontFamily.id,theme:C.theme.id})),i=(0,o.Z)(n,2),a=i[0],s=i[1],c=(0,l.useCallback)((function(){try{var e=t.currentLocation();t.clear(),t.display(e.start.cfi)}catch(n){}}),[t]);(0,l.useEffect)((function(){var e=function(){if(!window.localStorage)return{};try{return JSON.parse(window.localStorage.getItem("READER_PREFERENCES"))||{}}catch(e){return{}}}(),t=e.fontSize,n=void 0===t?C.fontSize:t,r=e.lineHeight,o=void 0===r?C.lineHeight:r,i=e.fontFamily,a=void 0===i?C.fontFamily.id:i,l=e.theme,c=void 0===l?C.theme.id:l;s({fontSize:n,lineHeight:o,fontFamily:a,theme:c})}),[]),(0,l.useEffect)((function(){if((0,p.fb)(t)){var e=R.themes.find((function(e){return e.id===a.theme})),n=R.fontFamily.find((function(e){return e.id===a.fontFamily}));(0,p.fb)(e)||(e=R.themes[0]),(0,p.fb)(n)||(n=R.fontFamily[0]),t.themes.override("--font-size",a.fontSize+"%"),t.themes.override("--font-family",n.value),t.themes.override("--line-height",a.lineHeight),t.themes.override("--background-color",e.backgroundColor),t.themes.override("--color",e.color),window.document.body.setAttribute("data-theme",e.bodyTheme),c(),function(e){window.localStorage&&window.localStorage.setItem("READER_PREFERENCES",JSON.stringify(e))}(a)}}),[a,t,c]);return(0,E.jsxs)("div",{className:"panel panel__customizer",children:[(0,E.jsxs)("div",{className:"panel__customizer__field",children:[(0,E.jsx)("div",{className:"panel__customizer__field__lable typo__head--6",children:"Font Size"}),(0,E.jsx)("div",{className:"panel__customizer__field__input",children:(0,E.jsx)(D,{value:a.fontSize,setValue:function(e){(0,Z.Z)("event_customizer_fontsize_"+e),s((function(t){return(0,r.Z)((0,r.Z)({},t),{},{fontSize:e})}))},unit:"%",offset:R.fontSize.offset,min:R.fontSize.min,max:R.fontSize.max,step:R.fontSize.step})})]}),(0,E.jsxs)("div",{className:"panel__customizer__field",children:[(0,E.jsx)("div",{className:"panel__customizer__field__lable typo__head--6",children:"Line Spacing"}),(0,E.jsx)("div",{className:"panel__customizer__field__input",children:(0,E.jsx)(D,{value:a.lineHeight,setValue:function(e){(0,Z.Z)("event_customizer_lineheight_"+e),s((function(t){return(0,r.Z)((0,r.Z)({},t),{},{lineHeight:e})}))},min:R.lineHeight.min,max:R.lineHeight.max,step:R.lineHeight.step})})]}),(0,E.jsxs)("div",{className:"panel__customizer__field",children:[(0,E.jsx)("div",{className:"panel__customizer__field__lable typo__head--6",children:"Themes"}),(0,E.jsx)("div",{className:"panel__customizer__field__input panel__customizer__field__input--themes",children:R.themes.map((function(e){return(0,E.jsx)("div",{className:"panel__customizer__field__input__chip"+(a.theme===e.id?" panel__customizer__field__input__chip--selected":""),onClick:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"reader-theme-light";(0,Z.Z)("event_customizer_theme_"+e),s((function(t){return(0,r.Z)((0,r.Z)({},t),{},{theme:e})}))}(e.id)},style:{color:e.color,backgroundColor:e.backgroundColor},children:"Aa"},e.id)}))})]}),(0,E.jsxs)("div",{className:"panel__customizer__field",children:[(0,E.jsx)("div",{className:"panel__customizer__field__lable typo__head--6",children:"Fonts"}),(0,E.jsx)("div",{className:"panel__customizer__field__input panel__customizer__field__input--fonts",children:R.fontFamily.map((function(e){return(0,E.jsxs)("div",{className:"panel__customizer__field__input__font"+(a.fontFamily===e.id?" panel__customizer__field__input__font--selected":""),style:{fontFamily:e.value},onClick:function(){var t;t=e.id,(0,Z.Z)("event_customizer_font_"+t),s((function(e){return(0,r.Z)((0,r.Z)({},e),{},{fontFamily:t})}))},children:[(0,E.jsx)("div",{className:"panel__customizer__field__input__font__demo",children:"Aa"}),(0,E.jsx)("div",{className:"panel__customizer__field__input__font__name",children:e.name})]},e.id)}))})]})]})},U=n(2982),K=n(4127),Q=function(e){var t=e.mobileView,n=e.preview,r=e.rendition,s=e.bookMeta,c=e.addAnnotationRef,u=e.onRemove,f=void 0===u?function(){}:u,m=e.hideModal,v=void 0===m?function(){}:m,k=(0,i.I0)(),y=(0,a.s0)(),g=(0,i.v9)((function(e){return e.WalletState})),j=(0,l.useState)(null),w=(0,o.Z)(j,2),x=w[0],O=w[1],S=(0,l.useState)(!1),L=(0,o.Z)(S,2),N=L[0],R=L[1],C=(0,l.useState)([]),z=(0,o.Z)(C,2),I=z[0],P=z[1];(0,l.useEffect)((function(){k(N?(0,K.yh)():(0,K.v3)())}),[N,k]),(0,l.useEffect)((function(){(0,p.fb)(t)&&!1!==t||(0,p.fb)(n)&&!n&&((0,p.fb)(g.wallet.provider)?O(g.wallet.address):y(-1))}),[g,y,n,t]),(0,l.useEffect)((function(){(0,p.fb)(n)&&!n&&(0,p.fb)(s)&&(0,p.fb)(x)&&(0,p.fb)(r)&&(R(!0),h()({url:"".concat(_._,"/api/reader/annotations"),method:"GET",params:{bookAddress:s.book_address,ownerAddress:x}}).then((function(e){if(200===e.status){var t=JSON.parse(e.data.annotations)||[];P(t),t.forEach((function(e){r.annotations.add("highlight",e.cfiRange,{},(function(){}),"",{fill:e.color,"fill-opacity":"0.35","mix-blend-mode":"multiply"})}))}else k((0,b.e1)("NOT200"))})).catch((function(e){k((0,b.e1)("ERROR"))})).finally((function(){return R(!1)})))}),[s,x,k,r,n]);var W=function(e,t){if((0,Z.Z)("event_annotationpanel_remove"),(0,p.fb)(n)&&!n&&(0,p.fb)(s)&&(0,p.fb)(x)&&(0,p.fb)(r)){if(!(0,p.fb)(r))return;if(!(0,p.fb)(s))return;R(!0);var o=I.filter((function(t,n){return n!==e}));h()({url:"".concat(_._,"/api/reader/annotations"),method:"POST",data:{bookAddress:s.book_address,ownerAddress:x,annotations:JSON.stringify(o)}}).then((function(e){200===e.status?(P(o),r.annotations.remove(t.cfiRange,"highlight"),f()):k((0,b.e1)("NOT200"))})).catch((function(e){k((0,b.e1)("ERROR"))})).finally((function(){return R(!1)}))}},F=function(e){(0,Z.Z)("event_annotationpanel_goto_page"),(0,p.fb)(r)&&(r.display(e),r.display(e),v())},M=(0,l.useCallback)((function(e){if((0,Z.Z)("event_annotationpanel_annotate"),(0,p.fb)(n)&&!n&&(0,p.fb)(s)&&(0,p.fb)(x)&&(0,p.fb)(r)){if(!(0,p.fb)(r))return;if(!(0,p.fb)(s))return;R(!0);var t=[].concat((0,U.Z)(I),[e]);h()({url:"".concat(_._,"/api/reader/annotations"),method:"POST",data:{bookAddress:s.book_address,ownerAddress:x,annotations:JSON.stringify(t)}}).then((function(n){200===n.status?(P(t),r.annotations.add("highlight",e.cfiRange,{},(function(){}),"",{fill:e.color,"fill-opacity":"0.35","mix-blend-mode":"multiply"})):k((0,b.e1)("NOT200"))})).catch((function(e){k((0,b.e1)("ERROR"))})).finally((function(){return R(!1)}))}}),[I,x,s,k,r,n]);return(0,l.useEffect)((function(){c.current=M}),[c,M]),(0,E.jsxs)("div",{className:"panel panel__annotation",children:[" ",function(){var e=[];return(0,p.fb)(r)&&(0,p.fb)(s)?(I.forEach((function(t,n){e.push((0,E.jsxs)("div",{className:"panel__annotation__item",onClick:function(){return F(t.cfiRange)},children:[(0,E.jsxs)("div",{className:"panel__annotation__item__container",children:[(0,E.jsx)("div",{className:"panel__annotation__item__color",style:{backgroundColor:t.color}}),(0,E.jsx)("div",{className:"panel__annotation__item__name",children:t.text})]}),(0,E.jsx)(d.Z,{size:"sm",type:"icon",onClick:function(e){e.stopPropagation(),W(n,t)},children:"remove"})]},n))})),0===e.length&&e.push((0,E.jsx)("div",{className:"panel__empty",children:"No Items"},"empty")),e):""}()," "]})},X=function(e){var t=e.onColorSelect,n=void 0===t?function(){}:t,r=e.onClose,o=void 0===r?function(){}:r;return(0,E.jsxs)("div",{className:"annotation-context-menu",children:[(0,E.jsx)("div",{className:"annotation-context-menu__container",children:["#e6192a","#0080ff","#14b84b","#ffd500","#aa00ff"].map((function(e){return(0,E.jsx)("div",{style:{"--color":e},className:"annotation-context-menu__container__item",onClick:function(){return n(e)}},e)}))}),(0,E.jsx)("div",{className:"annotation-context-menu__close",children:(0,E.jsx)(d.Z,{type:"icon",onClick:o,children:(0,E.jsx)(L.r,{})})})]})},Y=["title","titleId"];function $(){return $=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$.apply(this,arguments)}function ee(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function te(e,t){var n=e.title,r=e.titleId,o=ee(e,Y);return l.createElement("svg",$({xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 48 48",ref:t,"aria-labelledby":r},o),n?l.createElement("title",{id:r},n):null,J||(J=l.createElement("path",{d:"M21,6,9,18,21,30",transform:"translate(9 6)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})))}var ne,re=l.forwardRef(te),oe=(n.p,["title","titleId"]);function ie(){return ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ie.apply(this,arguments)}function ae(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function le(e,t){var n=e.title,r=e.titleId,o=ae(e,oe);return l.createElement("svg",ie({xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 48 48",ref:t,"aria-labelledby":r},o),n?l.createElement("title",{id:r},n):null,ne||(ne=l.createElement("path",{d:"M9,6,21,18,9,30",transform:"translate(9 6)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})))}var se,ce=l.forwardRef(le),ue=(n.p,["title","titleId"]);function fe(){return fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fe.apply(this,arguments)}function de(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function me(e,t){var n=e.title,r=e.titleId,o=de(e,ue);return l.createElement("svg",fe({xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 48 48",ref:t,"aria-labelledby":r},o),n?l.createElement("title",{id:r},n):null,se||(se=l.createElement("path",{d:"M11,4H23a4,4,0,0,1,4,4V36L17,30,7,36V8a4,4,0,0,1,4-4",transform:"translate(7 4)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})))}var he,_e,pe,ve,be=l.forwardRef(me),ke=(n.p,["title","titleId"]);function ye(){return ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ye.apply(this,arguments)}function ge(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function je(e,t){var n=e.title,r=e.titleId,o=ge(e,ke);return l.createElement("svg",ye({xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 48 48",ref:t,"aria-labelledby":r},o),n?l.createElement("title",{id:r},n):null,he||(he=l.createElement("circle",{cx:7,cy:7,r:7,transform:"translate(28 24)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),_e||(_e=l.createElement("path",{d:"M3,33V12a7,7,0,1,1,14,0V33",transform:"translate(3 5)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),pe||(pe=l.createElement("path",{d:"M3,13H17",transform:"translate(3 13)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),ve||(ve=l.createElement("path",{d:"M21,12V26",transform:"translate(21 12)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})))}var we,xe,Oe,Ee,Se,Le,Ne,Ze,Re=l.forwardRef(je),Ce=(n.p,n(4998)),ze=["title","titleId"];function Ie(){return Ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ie.apply(this,arguments)}function Pe(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function We(e,t){var n=e.title,r=e.titleId,o=Pe(e,ze);return l.createElement("svg",Ie({xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 48 48",ref:t,"aria-labelledby":r},o),n?l.createElement("title",{id:r},n):null,we||(we=l.createElement("path",{d:"M16,4h8v8",transform:"translate(16 4)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),xe||(xe=l.createElement("line",{y1:12,x2:12,transform:"translate(28 8)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),Oe||(Oe=l.createElement("path",{d:"M12,24H4V16",transform:"translate(4 16)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),Ee||(Ee=l.createElement("line",{y1:12,x2:12,transform:"translate(8 28)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),Se||(Se=l.createElement("path",{d:"M16,24h8V16",transform:"translate(16 16)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),Le||(Le=l.createElement("line",{x2:12,y2:12,transform:"translate(28 28)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),Ne||(Ne=l.createElement("path",{d:"M12,4H4v8",transform:"translate(4 4)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),Ze||(Ze=l.createElement("line",{x2:12,y2:12,transform:"translate(8 8)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})))}var Fe,Me,Te,Ae,He,Ve,Be,Je,qe=l.forwardRef(We),De=(n.p,["title","titleId"]);function Ge(){return Ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ge.apply(this,arguments)}function Ue(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Ke(e,t){var n=e.title,r=e.titleId,o=Ue(e,De);return l.createElement("svg",Ge({xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 48 48",ref:t,"aria-labelledby":r},o),n?l.createElement("title",{id:r},n):null,Fe||(Fe=l.createElement("path",{d:"M5,13h8V5",transform:"translate(5 5)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),Me||(Me=l.createElement("line",{x2:12,y2:12,transform:"translate(6 6)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),Te||(Te=l.createElement("path",{d:"M5,15h8v8",transform:"translate(5 15)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),Ae||(Ae=l.createElement("line",{y1:12,x2:12,transform:"translate(6 30)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),He||(He=l.createElement("path",{d:"M23,13H15V5",transform:"translate(15 5)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),Ve||(Ve=l.createElement("line",{y1:12,x2:12,transform:"translate(30 6)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),Be||(Be=l.createElement("path",{d:"M23,15H15v8",transform:"translate(15 15)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),Je||(Je=l.createElement("line",{x2:12,y2:12,transform:"translate(30 30)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})))}var Qe,Xe,Ye,$e,et,tt,nt=l.forwardRef(Ke),rt=(n.p,["title","titleId"]);function ot(){return ot=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ot.apply(this,arguments)}function it(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function at(e,t){var n=e.title,r=e.titleId,o=it(e,rt);return l.createElement("svg",ot({xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 48 48",ref:t,"aria-labelledby":r},o),n?l.createElement("title",{id:r},n):null,Qe||(Qe=l.createElement("line",{x2:22,transform:"translate(18 12)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),Xe||(Xe=l.createElement("line",{x2:22,transform:"translate(18 24)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),Ye||(Ye=l.createElement("line",{x2:22,transform:"translate(18 36)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),$e||($e=l.createElement("line",{y2:.02,transform:"translate(10 12)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),et||(et=l.createElement("line",{y2:.02,transform:"translate(10 24)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),tt||(tt=l.createElement("line",{y2:.02,transform:"translate(10 36)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})))}var lt=l.forwardRef(at),st=(n.p,function(e){var t=e.rendition,n=e.onGoto,r=void 0===n?function(){}:n,i=e.onSelect,a=void 0===i?function(){}:i,s=(0,l.useState)([]),c=(0,o.Z)(s,2),u=c[0],f=c[1];(0,l.useEffect)((function(){(0,p.fb)(t)&&(0,p.fb)(t.book)&&t.book.loaded.navigation.then((function(e){var t=e.toc.map((function(e){return{label:e.label,href:e.href}}));f(t)}))}),[t]);var d=function(e){a(),(0,Z.Z)("event_toc_panel_goto"),(0,p.fb)(t)&&(t.display(e),t.display(e),r())};return(0,E.jsx)("div",{className:"panel panel__toc",children:function(){(0,Z.Z)("event_toc_panel_show");var e=[];return(0,p.fb)(t)?(u.forEach((function(t,n){e.push((0,E.jsx)("div",{className:"panel__toc__item",onClick:function(){return d("".concat(t.href))},children:(0,E.jsx)("div",{className:"typo__body typo__body--1",children:t.label})},n))})),0===e.length&&e.push((0,E.jsx)("div",{className:"panel__empty",children:"No Items"},"empty")),e):""}()})}),ct=function(e){var t=e.className,n=void 0===t?"":t,r=e.value,o=e.onChange,i=e.min,a=void 0===i?0:i,s=e.max,c=void 0===s?100:s,u=e.step,f=void 0===u?1:u,d=(0,l.useRef)();return(0,l.useEffect)((function(){if((0,p.fb)(d.current)){var e=r/(c-a);d.current.style.setProperty("--progress",e)}}),[r,a,c,d]),(0,E.jsx)("div",{ref:d,className:"range-slider "+n,children:(0,E.jsx)("input",{type:"range",value:r,onChange:o,min:a,max:c,step:f,className:"range-slider__input"})})},ut=n(6026),ft=n(2043),dt=function(){var e=(0,a.TH)(),t=(0,i.I0)(),n=(0,a.s0)(),c=(0,i.v9)((function(e){return e.WalletState.wallet})),u=(0,l.useState)(null),m=(0,o.Z)(u,2),v=m[0],k=m[1],y=(0,l.useState)(!1),g=(0,o.Z)(y,2),j=g[0],w=g[1],x=(0,l.useState)({}),O=(0,o.Z)(x,2),L=O[0],R=O[1],C=(0,l.useState)(0),I=(0,o.Z)(C,2),P=I[0],W=I[1],F=(0,l.useState)(),M=(0,o.Z)(F,2),T=M[0],A=M[1],H=(0,l.useState)(!1),V=(0,o.Z)(H,2),B=V[0],J=V[1],q=(0,l.useState)(!1),D=(0,o.Z)(q,2),U=D[0],Y=D[1],$=(0,l.useState)(!1),ee=(0,o.Z)($,2),te=ee[0],ne=ee[1],oe=(0,l.useState)(0),ie=(0,o.Z)(oe,2),ae=ie[0],le=ie[1],se=(0,l.useState)(!1),ue=(0,o.Z)(se,2),fe=ue[0],de=ue[1],me=(0,l.useState)(!1),he=(0,o.Z)(me,2),_e=he[0],pe=he[1],ve=(0,l.useState)(null),ke=(0,o.Z)(ve,2),ye=ke[0],ge=ke[1],je=(0,l.useState)(!0),we=(0,o.Z)(je,2),xe=we[0],Oe=we[1],Ee=(0,l.useState)({}),Se=(0,o.Z)(Ee,2),Le=Se[0],Ne=Se[1],Ze=(0,l.useState)(!1),ze=(0,o.Z)(Ze,2),Ie=ze[0],Pe=ze[1],We=(0,l.useState)(""),Fe=(0,o.Z)(We,2),Me=Fe[0],Te=Fe[1],Ae=(0,l.useState)(""),He=(0,o.Z)(Ae,2),Ve=He[0],Be=He[1],Je=f(P,300),De=(0,l.useRef)(),Ge=(0,l.useRef)(!1),Ue=(0,l.useCallback)((function(){ft.Z.connectWallet().then((function(e){t((0,ut.kH)(e.selectedAddress)),t((0,b.e1)({show:!0,message:"Wallet connected.",type:1}))})).catch((function(e){t((0,b.e1)({show:!0,message:"Error while connecting to wallet",type:4}))})).finally((function(){return w(!1)}))}),[t]),Ke=(0,l.useCallback)((function(e){if((0,Z.Z)("event_reader_lastPage_save"),(0,p.fb)(window.localStorage)&&(0,p.fb)(L)){var t="".concat(L.id,":lastread");localStorage.setItem(t,e)}}),[L]),Qe=(0,l.useCallback)((function(){if((0,p.fb)(T)&&(0,p.fb)(L)){var e="".concat(L.id,":bookmarks"),t=window.localStorage.getItem(e);if(!(0,p.vd)(t))return!1;var n=JSON.parse(t)||{},r=new s.OS,o=T.currentLocation();try{return 0===r.compare(n.cfi,o.start.cfi)||(0===r.compare(n.cfi,o.end.cfi)||1===r.compare(n.cfi,o.start.cfi)&&-1===r.compare(n.cfi,o.end.cfi))}catch(i){return!1}}}),[L,T]),Xe=(0,l.useCallback)((function(){(0,Z.Z)("event_reader_page_bookmark");var e=Qe();ne(e)}),[Qe]),Ye=(0,l.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.customizer,n=void 0===t||t,r=e.annotation,o=void 0===r||r,i=e.toc,a=void 0===i||i;(0,Z.Z)("event_reader_panels_hide"),n&&de(!1),o&&Y(!1),a&&pe(!1)}),[]);(0,l.useEffect)((function(){(0,Z.Z)("page_view_reader")}),[]),(0,l.useEffect)((function(){!0===B?((0,Z.Z)("event_reader_screen_full"),$e()):((0,Z.Z)("event_reader_screen_window"),et())}),[B]),(0,l.useEffect)((function(){t(j?(0,K.yh)():(0,K.v3)())}),[j,t]),(0,l.useEffect)((function(){w(!0),(0,p.fb)(c)?ge(c.address):Ue(),w(!1)}),[c,Ue]),(0,l.useEffect)((function(){Ye()}),[xe,Ye]),(0,l.useEffect)((function(){w(!0);var n=null,r=e.state;(0,p.fb)(r.preview)&&!0===r.preview?((0,Z.Z)("event_reader_mode_preview"),n=_._+"/files/"+r.book.preview,k(!0)):((0,Z.Z)("event_reader_mode_live"),n=r.book.url,k(!1));try{var o=(0,s.ZP)(n,{openAs:"epub"});o.ready.then((function(){var e=document.querySelector("#book__reader");e&&(e.innerHTML="");var t=o.renderTo("book__reader",{width:"100%",height:"100%",manager:"continuous",flow:"paginated",snap:"true",gap:40,allowScriptedContent:!0});t.themes.default(z),t.display(),A(t),w(!1)})).catch((function(e){t((0,b.e1)({show:!0,message:"Error while loading book.",type:4})),w(!1)})),R(r.book)}catch(i){t((0,b.e1)({show:!0,message:"Error while loading book.",type:4})),w(!1)}}),[e,t]),(0,l.useEffect)((function(){if((0,p.fb)(T)){var e=function(){(0,Z.Z)("event_reader_resize"),T.manager.resize("100%","100%")},t=function(){(0,p.fb)(window.document.fullscreenElement)?((0,Z.Z)("event_reader_fullscreen"),J(!0)):((0,Z.Z)("event_reader_window"),J(!1)),e()};return window.addEventListener("resize",e),window.addEventListener("fullscreenchange",t),function(){window.removeEventListener("resize",e),window.removeEventListener("fullscreenchange",t)}}}),[T]),(0,l.useEffect)((function(){(0,p.fb)(T)&&((0,p.fb)(Ve)||(0,p.vd)(Ve))&&T.book.loaded.navigation.then((function(){var e,t=Ve,n=T.book.spine.get(t);if((0,p.fb)(n)){var r=T.book.navigation.get(n.href);Te((null===r||void 0===r||null===(e=r.label)||void 0===e?void 0:e.trim())||"")}}))}),[T,Ve]),(0,l.useEffect)((function(){if((0,p.fb)(T)&&(0,p.fb)(L)){var e=function(e){Xe(),W(e.start.location),Ke(e.start.cfi),Be(e.start.cfi)},t=function(){Oe((function(e){return!e}))},n=function(e){(0,Z.Z)("event_reader_navigate_keys"),"ArrowLeft"!==e.key&&37!==(e.keyCode||e.which)||T.prev(),"ArrowRight"!==e.key&&39!==(e.keyCode||e.which)||T.next()};return T.on("relocated",e),T.on("click",t),T.on("keyup",n),document.addEventListener("keyup",n),function(){T.off("relocated",e),T.off("click",t),T.off("keyup",n),document.removeEventListener("keyup",n)}}}),[T,L,Xe,Ke,Be]),(0,l.useEffect)((function(){if((0,p.fb)(T)&&(0,p.fb)(L)){var e="".concat(L.id,":locations"),t=localStorage.getItem(e);t?(T.book.locations.load(t),le(JSON.parse(t).length)):T.book.locations.generate().then((function(){le(T.book.locations.total),localStorage.setItem(e,T.book.locations.save())})).catch((function(e){}))}}),[T,L]),(0,l.useEffect)((function(){(0,p.fb)(T)&&!0===Ge.current&&(T.display(T.book.locations.cfiFromLocation(Je)),Ge.current=!1)}),[Je,T,Ge]),(0,l.useEffect)((function(){if((0,p.fb)(window.localStorage)&&(0,p.fb)(L)&&(0,p.fb)(T)){var e="".concat(L.id,":lastread"),t=localStorage.getItem(e);(0,p.fb)(t)&&T.display(t)}}),[L,T]),(0,l.useEffect)((function(){if((0,p.fb)(T)&&(0,p.fb)(L)){var e=function(e,t){(0,Z.Z)("event_reader_content_selected"),T.book.getRange(e).then((function(t){Ne({cfiRange:e,text:null===t||void 0===t?void 0:t.toString()}),Pe(!0)})).catch((function(){Ne({})}))};return T.on("selected",e),function(){T.off("selected",e)}}}),[T,L]),(0,l.useEffect)((function(){if((0,p.fb)(T)&&(0,p.fb)(L)){var e=function(e,t,n){Y(!0)};return T.on("markClicked",e),function(){T.off("markClicked",e)}}}),[T,L]);var $e=function(){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},et=function(){document.fullscreenElement&&(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen())};return(0,E.jsxs)("div",{className:"reader",children:[(0,E.jsxs)("div",{className:"reader__header"+(xe?" reader__header--show":""),children:[(0,E.jsxs)("div",{className:"reader__header__left",children:[(0,E.jsx)(d.Z,{type:"icon",onClick:function(){n(-1)},children:(0,E.jsx)(re,{})}),(0,E.jsx)("div",{className:"reader__header__left__timer",children:T&&(0,E.jsx)(S,{preview:v,bookMeta:L})})]}),(0,E.jsx)("div",{className:"reader__header__center",children:(0,E.jsx)("div",{className:"typo__body--2 typo__color--n700 typo__transform--capital",children:L.title||"Untitled"})}),(0,E.jsxs)("div",{className:"reader__header__right",children:[(0,E.jsxs)(d.Z,{className:"reader__header__right__hide-on-mobile",type:"icon",onClick:function(){return J((function(e){return!e}))},children:[" ",B?(0,E.jsx)(nt,{}):(0,E.jsx)(qe,{})," "]}),(0,E.jsxs)(d.Z,{type:"icon",className:_e?"reader__header__right__button--active":"",onClick:function(){Ye({toc:!1}),pe((function(e){return!e}))},children:[" ",(0,E.jsx)(lt,{})," "]}),(0,E.jsxs)(d.Z,{type:"icon",className:U?"reader__header__right__button--active":"",onClick:function(){Ye({annotation:!1}),Y((function(e){return!e}))},children:[" ",(0,E.jsx)(Ce.r,{})," "]}),(0,E.jsx)(d.Z,{type:"icon",className:te?"reader__header__right__button--active":"",onClick:function(){!0===Qe()?function(){if((0,Z.Z)("event_bookmarkpanel_bookmark_remove"),(0,p.fb)(v)&&!v&&(0,p.fb)(L)&&(0,p.fb)(ye)){if(!(0,p.fb)(T))return;if(!(0,p.fb)(L))return;w(!0),h()({url:"".concat(_._,"/api/reader/bookmarks"),method:"POST",data:{bookAddress:L.book_address,ownerAddress:ye,bookmarks:""}}).then((function(e){if(200===e.status){var n="".concat(L.id,":bookmarks");localStorage.setItem(n,""),Xe()}else t((0,b.e1)("NOT200"))})).catch((function(e){t((0,b.e1)("ERROR"))})).finally((function(){return w(!1)}))}}():function(){if((0,Z.Z)("event_bookmarkpanel_bookmark"),(0,p.fb)(v)&&!v&&(0,p.fb)(L)&&(0,p.fb)(ye)){if(!(0,p.fb)(T))return;if(!(0,p.fb)(L))return;w(!0);var e={cfi:T.currentLocation().start.cfi,percent:T.currentLocation().start.percentage};h()({url:"".concat(_._,"/api/reader/bookmarks"),method:"POST",data:{bookAddress:L.book_address,ownerAddress:ye,bookmarks:JSON.stringify(e)}}).then((function(n){if(200===n.status){var r="".concat(L.id,":bookmarks");localStorage.setItem(r,JSON.stringify(e)),Xe()}else t((0,b.e1)("NOT200"))})).catch((function(e){t((0,b.e1)("ERROR"))})).finally((function(){return w(!1)}))}}()},children:(0,E.jsx)(be,{})}),(0,E.jsx)(d.Z,{type:"icon",className:fe?"reader__header__right__button--active":"",onClick:function(){Ye({customizer:!1}),de((function(e){return!e}))},children:(0,E.jsx)(Re,{})})]})]}),(0,E.jsxs)("div",{className:"reader__container",children:[(0,E.jsx)("div",{className:te?"reader__container__bookmark reader__container__bookmark--show":"reader__container__bookmark"}),(0,E.jsx)("div",{className:"reader__container__prev-btn",children:(0,E.jsx)("div",{className:"reader__container__prev-btn__button",onClick:function(){return T.prev()},children:(0,E.jsx)(re,{width:32,stroke:"currentColor"})})}),(0,E.jsx)("div",{id:"book__reader",className:"reader__container__book"}),(0,E.jsx)("div",{className:"reader__container__next-btn",children:(0,E.jsx)("div",{className:"reader__container__next-btn__button",onClick:function(){return T.next()},children:(0,E.jsx)(ce,{width:32,stroke:"currentColor"})})}),!v&&(0,E.jsx)("div",{className:Ie?"reader__container__context-menu-container reader__container__context-menu-container--show":"reader__container__context-menu-container",children:(0,E.jsx)(X,{onColorSelect:function(e){!function(e){(0,p.fb)(Le)&&(0,p.fb)(T)&&(0,p.fb)(L)&&(0,p.fb)(De.current)&&"function"===typeof De.current&&De.current((0,r.Z)((0,r.Z)({},Le),{},{color:e}))}(e),Pe(!1)},onClose:function(){return Pe(!1)}})}),(0,E.jsx)(N,{show:_e,setShow:pe,position:"right",title:"Table of Content",children:(0,E.jsx)(st,{onSelect:function(){Ye({toc:!1}),pe(!1)},rendition:T})}),(0,E.jsx)(N,{show:U,setShow:Y,position:"right",title:"Annotations",children:(0,E.jsx)(Q,{preview:v,rendition:T,bookMeta:L,show:U,addAnnotationRef:De,hideModal:function(){Y(!1)},onRemove:function(){Y(!1)}})}),(0,E.jsx)(N,{show:fe,setShow:de,position:"right-bottom",title:"Preferences",children:(0,E.jsx)(G,{initialFontSize:100,rendition:T})})]}),(0,E.jsxs)("nav",{className:"reader__nav"+(xe?" reader__nav--show":""),children:[(0,E.jsxs)("div",{className:"reader__nav__value",children:[(0,E.jsx)("div",{className:"reader__nav__value__chapter-title typo__gray--n600 typo__transform--capital",children:Me||L.title||""}),(0,E.jsxs)("div",{children:[Math.floor(100*Je/ae)||"0","%"]})]}),(0,E.jsx)("div",{className:"reader__nav__progress",children:(0,E.jsx)(ct,{value:P,onChange:function(e){Ge.current=!0,W(e.target.value)},max:ae,className:"reader__nav__progress"})})]})]})}}}]);
//# sourceMappingURL=325.45585253.chunk.js.map