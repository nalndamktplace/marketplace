{"version":3,"file":"static/js/680.777ef8a6.chunk.js","mappings":"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","sources":["components/modal/Search/SearchModal.jsx","pages/Explore.jsx"],"sourcesContent":["import { useNavigate } from \"react-router\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport React, { useEffect, useState } from \"react\";\n\nimport Button from \"../../ui/Buttons/Button\";\nimport Backdrop from \"../../hoc/Backdrop/Backdrop\";\n\nimport { hideModal, SHOW_SEARCH_MODAL } from \"../../../store/actions/modal\";\n\nimport { ReactComponent as CloseIcon } from \"../../../assets/icons/close-icon.svg\";\nimport { ReactComponent as SearchIcon } from \"../../../assets/icons/search.svg\";\n\nimport { isFilled } from \"../../../helpers/functions\";\nimport { BASE_URL } from \"../../../config/env\";\nimport axios from \"axios\";\nimport { setSnackbar } from \"../../../store/actions/snackbar\";\n\nconst Modal = ({\n  title = \"\",\n  open = false,\n  toggleModal,\n  children,\n  cancellable,\n}) => {\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    window.document.documentElement.style.overflowY = open ? \"hidden\" : \"auto\";\n  }, [open]);\n\n  const getClasses = () => {\n    let classes = [\"modal_search__wrapper\"];\n    if (open) classes.push(\"modal__wrapper--open\");\n    else classes.push(\"modal__wrapper--close\");\n    return classes.join(\" \");\n  };\n\n  return (\n    <Backdrop show={open} hideOnClick={true}>\n      <div className={getClasses()}>\n        <div className=\"modal_search__header\">\n          <div className=\"modal__wrapper__header__title typo__head--6\">\n            {title}\n          </div>\n          <div className=\"modal__wrapper__header__close-button\">\n            {cancellable ? (\n              <Button type=\"icon\" className=\"modal_search__wrapper__close-icon\" onClick={() => dispatch(hideModal())}>\n                <CloseIcon />\n              </Button>\n            ) : null}\n          </div>\n        </div>\n        <div className=\"modal_search__content\">{children}</div>\n      </div>\n    </Backdrop>\n  );\n};\n\nconst SearchModal = () => {\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n\n  const ModalState = useSelector((state) => state.ModalState);\n  const [Loading, setLoading] = useState(false);\n  const [Show, setShow] = useState(false);\n  const [SearchResults, setSearchResults] = useState([]);\n  const [SearchQuery, setSearchQuery] = useState(\"\");\n\n  useEffect(() => {\n    if (SearchQuery.length > 3 && SearchQuery.length < 16) {\n      setLoading(true);\n      axios({\n        url: BASE_URL + \"/api/book/search\",\n        method: \"GET\",\n        params: { query: SearchQuery },\n      })\n        .then((res) => {\n          if (res.status === 200) setSearchResults(res.data);\n          else dispatch(setSnackbar(\"NOT200\"));\n        })\n        .catch((err) => {\n          dispatch(setSnackbar(\"ERROR\"));\n        })\n        .finally(() => setLoading(false));\n    }\n  }, [dispatch, SearchQuery]);\n\n  useEffect(() => {\n    if (ModalState.show === true && ModalState.type === SHOW_SEARCH_MODAL) {\n      setShow(true);\n    } else setShow(false);\n  }, [ModalState]);\n\n  const modalCloseHandler = (state) => {\n    if (state === false) dispatch(hideModal());\n  };\n\n  const getSearchResultsClasses = () => {\n    let classes = [\"modal_search__options\"];\n    if (isFilled(SearchQuery) && SearchQuery.length > 3)\n      classes.push(\"dropdown__options--open\");\n    return classes.join(\" \");\n  };\n\n  const renderSearchResults = () => {\n    let searchResultsDOM = [];\n    if (isFilled(SearchResults))\n      SearchResults.forEach((result) => {\n        searchResultsDOM.push(\n          <div\n            onClick={() => {\n              navigate(\"/book\", { state: result });\n              setSearchQuery(\"\");\n            }}\n            className=\"header__content__search__result\"\n            key={result.id}\n          >\n            <img\n              src={\n                result.cover_public_url ? result.cover_public_url : result.cover\n              }\n              alt={result.title + \"'s Cover\"}\n              className=\"header__content__search__result__cover\"\n              loading=\"lazy\"\n            />\n            <div className=\"header__content__search__result__info\">\n              <div className=\"header__content__search__result__info__name typo__head typo__subtitle typo__transform--capital\">\n                {result.title}\n              </div>\n              <div className=\"header__content__search__result__info__author typo__subtitle typo__subtitle--2 typo__transform--upper\">\n                {result.author}\n              </div>\n              <div className=\"index__collection__books__item__data__price typo__act typo__color--success\">\n                {result.price === 0 ? (\n                  \"FREE\"\n                ) : (\n                  <>\n                    <img\n                      src=\"https://imagedelivery.net/yOWneHxM1h9mu46Te3Yjwg/59c27d12-e4eb-4f74-7a6e-b33ba6537600/icon48\"\n                      style={{ width: 20, height: 20, objectFit: \"contain\" }}\n                      alt=\"USDC\"\n                    />\n                    &nbsp;{result.price}\n                  </>\n                )}\n              </div>\n            </div>\n          </div>\n        );\n      });\n    return searchResultsDOM;\n  };\n\n  return (\n    <Backdrop show={Show}>\n      <Modal\n        title=\"Search\"\n        open={Show}\n        toggleModal={modalCloseHandler}\n        cancellable\n      >\n        <div className=\"modal_search\">\n          <input\n            value={SearchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            type=\"text\"\n            placeholder=\"Search books and authors\"\n            className=\"modal_search__input\"\n          />\n          <div className=\"modal_search__icon\">\n            <SearchIcon width={24} height={24} stroke=\"currentColor\" />\n          </div>\n        </div>\n          <div className={getSearchResultsClasses()}>\n            {renderSearchResults()}\n        </div>\n      </Modal>\n    </Backdrop>\n  );\n};\n\nexport default SearchModal;\n","import axios from 'axios'\nimport { useNavigate } from 'react-router'\nimport { useEffect, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\n\nimport { setSnackbar } from '../store/actions/snackbar'\nimport { isFilled, isUsable } from '../helpers/functions'\nimport { hideSpinner, showSpinner } from '../store/actions/spinner'\n\nimport { BASE_URL } from '../config/env'\nimport { EXPLORE_PAGE_FILTERS } from '../config/filters'\n\nimport Page from '../components/hoc/Page/Page'\nimport Contracts from '../connections/contracts'\nimport Button from '../components/ui/Buttons/Button'\nimport BookItem from '../components/ui/BookItem/BookItem'\nimport FilterPanel from '../components/ui/FilterPanel/FilterPanel'\nimport { showModal, SHOW_SEARCH_MODAL } from '../store/actions/modal'\nimport SearchModal from '../components/modal/Search/SearchModal'\n\nimport {ReactComponent as FilterIcon} from \"../assets/icons/filter.svg\"\nimport {ReactComponent as SearchIcon} from \"../assets/icons/search.svg\"\nimport GaTracker from '../trackers/ga-tracker'\n\nconst ExplorePage = () => {\n\n\tconst DEFAULT_FILTERS = [{key: 'price', value: null, type: 'range'}, {key: 'genres', value: [], type: 'multiselect'}, {key: 'age_group', value: [], type: 'multiselect'}, {key: 'orderby', value: null, type: 'select'}]\n\n\tconst navigate = useNavigate()\n\tconst dispatch = useDispatch()\n\n\tconst WalletState = useSelector(state => state.WalletState)\n\n\tconst [Nfts, setNfts] = useState([])\n\tconst [WalletAddress, setWalletAddress] = useState(null)\n\tconst [Filters, setFilters] = useState(DEFAULT_FILTERS)\n\tconst [Loading, setLoading] = useState(false)\n\tconst [FiltersPanelOpen, setFiltersPanelOpen] = useState(false)\n\tconst [AllNfts, setAllNfts] = useState([])\n\tconst [maxPrice, setMaxPrice] = useState(100);\n\tconst buyHandler = nft => {\n\t\tGaTracker('event_explore_purchase_new')\n\t\tsetLoading(true)\n\t\tContracts.purchaseNft(WalletAddress, nft.book_address, nft.price.toString(), WalletState.wallet.signer).then(res => {\n\t\t\tdispatch(setSnackbar({show: true, message: \"Book purchased.\", type: 1}))\n\t\t\tconst tokenId = Number(res.events.filter(event => event.eventSignature === \"Transfer(address,address,uint256)\")[0].args[2]._hex)\n\t\t\taxios({\n\t\t\t\turl: BASE_URL+'/api/book/purchase',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: {ownerAddress: WalletAddress, bookAddress: nft.book_address, tokenId}\n\t\t\t}).then(res => {\n\t\t\t\tif(res.status !== 200) dispatch(setSnackbar('NOT200'))\n\t\t\t}).catch(err => {\n\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t}).finally(() => setLoading(false))\n\t\t\taxios({ url: BASE_URL+'/api/book/copies', method: 'POST', data: { bookAddress: nft.book_address, copies: tokenId } }).then(res => {\n\t\t\t\tif(res.status !== 200) dispatch(setSnackbar('NOT200'))\n\t\t\t}).catch(err => {\n\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t})\n\t\t}).catch(err => {\n\t\t\tsetLoading(false)\n\t\t\tif(err.code === 4001)\n\t\t\t\tdispatch(setSnackbar({show: true, message: \"Transaction denied by user.\", type: 3}))\n\t\t\telse dispatch(setSnackbar('ERROR'))\n\t\t})\n\t}\n\n\tconst openHandler = nft => {\n\t\tGaTracker('navigate_explore_book')\n\t\tnavigate(`/book/${nft.id}`)\n\t}\n\n\tconst renderNfts = () => {\n\t\tlet nftDOM = []\n\t\tNfts.forEach(nft => {\n\t\t\tnftDOM.push(<BookItem layout={window.innerWidth<600?\"LIST\":\"GRID\"} key={nft.id} book={nft} onBuy={()=>buyHandler(nft)} onOpen={()=>openHandler(nft)}/>)\n\t\t})\n\t\treturn nftDOM\n\t}\n\n\tuseEffect(() => { GaTracker('page_view_explore') }, [])\n\n\tuseEffect(() => {\n\t\tif(Loading) dispatch(showSpinner())\n\t\telse dispatch(hideSpinner())\n\t}, [Loading, dispatch])\n\n\tuseEffect(() => {\n\t\tsetLoading(true)\n\t\taxios({\n\t\t\turl: BASE_URL + '/api/book',\n\t\t\tmethod: 'GET'\n\t\t}).then(res => {\n\t\t\tif(res.status === 200) setAllNfts(res.data)\n\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t}).catch(err => {\n\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t}).finally(() => setLoading(false))\n\t}, [dispatch])\n\n\tuseEffect(() => {\n\t\tsetLoading(true)\n\t\tif(isUsable(WalletState.wallet.provider)) setWalletAddress(WalletState.wallet.address)\n\t\tsetLoading(false)\n\t}, [WalletState])\n\n\tuseEffect(() => {\n\t\tlet nfts = AllNfts\n\t\tif(isUsable(nfts)){\n\t\t\tFilters.forEach(filter => {\n\t\t\t\tswitch (filter.type) {\n\t\t\t\t\tcase 'range':\n\t\t\t\t\t\tif(isUsable(filter.value))\n\t\t\t\t\t\tnfts = nfts.filter(nft => nft[filter.key] <= filter.value)\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 'multiselect':\n\t\t\t\t\t\tif(isFilled(filter.value)){\n\t\t\t\t\t\t\tlet tempNfts = []\n\t\t\t\t\t\t\tfilter.value.forEach(filterValue => nfts.forEach(nft => { if(nft[filter.key].indexOf(filterValue)>-1 && tempNfts.filter(tempNft => tempNft[\"id\"] === nft.id).length<1) tempNfts.push(nft) }) )\n\t\t\t\t\t\t\tnfts = tempNfts\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 'select':\n\t\t\t\t\t\tif(filter.key === 'orderby'){\n\t\t\t\t\t\t\tswitch (filter.value) {\n\t\t\t\t\t\t\t\tcase 'PRICE_L_H':\n\t\t\t\t\t\t\t\t\tnfts.sort((a,b) => a.price<b.price)\n\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\tcase 'PRICE_H_L':\n\t\t\t\t\t\t\t\t\tnfts.sort((a,b) => a.price>b.price)\n\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\tcase 'RATING_L_H':\n\t\t\t\t\t\t\t\t\tnfts.sort((a,b) => a.rating<b.rating)\n\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\tcase 'RATING_H_L':\n\t\t\t\t\t\t\t\t\tnfts.sort((a,b) => a.rating>b.rating)\n\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t})\n\t\t\tsetNfts(nfts)\n\t\t}\n\t}, [Filters, AllNfts])\n\n\tuseEffect(()=>{\n\t\tif(!isFilled(AllNfts)) return ;\n\t\tlet maxNftPrice = Math.max(...AllNfts.map(nft => nft.price));\n\t\tmaxNftPrice = Math.ceil(maxNftPrice / 10) * 10 ; \n\t\tsetMaxPrice(maxNftPrice||100)\n\t},[AllNfts])\n\n\tconst onSearch = () => {\n\t\tdispatch(showModal(SHOW_SEARCH_MODAL));\n\t}\n\n\treturn (\n\t\t<Page noFooter={true} showRibbion={false} noPadding={true} fluid={true} containerClass={'explore'}>\n\t\t\t<div className=\"explore__data\">\n\t\t\t\t<div className=\"explore__data__filter-panel-container\" data-filter-open={FiltersPanelOpen}>\n\t\t\t\t\t<FilterPanel maxPrice={maxPrice} setFiltersPanelOpen={setFiltersPanelOpen} config={EXPLORE_PAGE_FILTERS} defaults={DEFAULT_FILTERS} filters={Filters} setFilters={setFilters}/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"explore__data__books\" data-filter-open={FiltersPanelOpen}> \n\t\t\t\t\t<div className=\"explore__data__books__header\">\n\t\t\t\t\t\t<div className='explore__data__books__header__filter'>\n\t\t\t\t\t\t\t<Button type=\"icon\" onClick={()=>setFiltersPanelOpen(s=>!s)}><FilterIcon fill={FiltersPanelOpen?\"currentColor\":\"transparent\"} /></Button>\n\t\t\t\t\t\t\t<div className=\"typo__body typo__color--n500\">Found <span className=\"typo__color--n700\" style={{fontWeight:\"500\"}}>{Nfts.length}</span> results</div>\n\t\t\t\t\t\t</div>{\n\t\t\t\t\t\t\twindow.innerWidth<600?<div className=\"explore__data__books__header__layout\">\n\t\t\t\t\t\t\t<Button className=\"account__data__books__header__layout__button typo__act\" onClick={()=>onSearch()} ><SearchIcon/></Button>\n\t\t\t\t\t\t</div>:null\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"explore__data__books__wrapper\" data-layout={window.innerWidth<600?\"LIST\":\"GRID\"}>\n\t\t\t\t\t\t{isUsable(Nfts) && Nfts.length > 0\n\t\t\t\t\t\t\t? \trenderNfts()\n\t\t\t\t\t\t\t: \t<div className='explore__data__books__wrapper__empty'>\n\t\t\t\t\t\t\t\t\t<img src='https://imagedelivery.net/yOWneHxM1h9mu46Te3Yjwg/fb06196e-29ca-4c59-9460-6fdbd43fa700/square240' alt=\"books shelf\" className=\"explore__data__books__wrapper__image\" loading=\"lazy\"/>\n\t\t\t\t\t\t\t\t\t<h4 className=\"typo__head typo__head--4\">No eBooks yet</h4>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<SearchModal/>\n\t\t</Page>\n\t)\n}\n\nexport default ExplorePage\n"],"names":["Modal","title","open","children","toggleModal","cancellable","dispatch","useDispatch","useEffect","window","document","documentElement","style","overflowY","Backdrop","show","hideOnClick","className","classes","push","join","getClasses","Button","type","onClick","hideModal","navigate","useNavigate","ModalState","useSelector","state","useState","setLoading","Show","setShow","SearchResults","setSearchResults","SearchQuery","setSearchQuery","length","axios","url","BASE_URL","method","params","query","then","res","status","data","setSnackbar","catch","err","finally","SHOW_SEARCH_MODAL","value","onChange","e","target","placeholder","width","height","stroke","isFilled","getSearchResultsClasses","searchResultsDOM","forEach","result","src","cover_public_url","cover","alt","loading","author","price","objectFit","id","renderSearchResults","DEFAULT_FILTERS","key","WalletState","Nfts","setNfts","WalletAddress","setWalletAddress","Filters","setFilters","Loading","FiltersPanelOpen","setFiltersPanelOpen","AllNfts","setAllNfts","maxPrice","setMaxPrice","GaTracker","showSpinner","hideSpinner","isUsable","wallet","provider","address","nfts","filter","nft","tempNfts","filterValue","indexOf","tempNft","sort","a","b","rating","maxNftPrice","Math","max","map","ceil","Page","noFooter","showRibbion","noPadding","fluid","containerClass","FilterPanel","config","EXPLORE_PAGE_FILTERS","defaults","filters","s","fill","fontWeight","innerWidth","showModal","nftDOM","BookItem","layout","book","onBuy","Contracts","book_address","toString","signer","message","tokenId","Number","events","event","eventSignature","args","_hex","ownerAddress","bookAddress","copies","code","buyHandler","onOpen","openHandler","renderNfts"],"sourceRoot":""}