{"version":3,"file":"static/js/953.9076cddc.chunk.js","mappings":"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","sources":["components/ui/Tags/Price.jsx","components/modal/Purchase/Purchase.jsx","pages/Book.jsx"],"sourcesContent":["import React from 'react'\nimport { isUsable } from '../../../helpers/functions'\n\nconst PriceTag = ({label, price}) => {\n    return (\n        <div className=\"tag__price\">{label}:&nbsp;{isUsable(price)?price===0?\"FREE\":<><img src='https://imagedelivery.net/yOWneHxM1h9mu46Te3Yjwg/59c27d12-e4eb-4f74-7a6e-b33ba6537600/icon48' style={{width: 24, height: 24, objectFit: 'contain'}} alt=\"USDC\"/>{parseFloat(price)}</>:\"loading...\"}</div>\n    )\n}\n\nexport default PriceTag","import React, { useCallback, useEffect, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\n\nimport Button from '../../ui/Buttons/Button'\nimport Backdrop from '../../hoc/Backdrop/Backdrop'\n\nimport GaTracker from '../../../trackers/ga-tracker'\n\nimport { hideSpinner, showSpinner } from '../../../store/actions/spinner'\nimport { SHOW_PURCHASE_MODAL } from '../../../store/actions/modal'\n\nimport { ReactComponent as CloseIcon } from \"../../../assets/icons/close-icon.svg\"\n\nimport { ChainId } from '@biconomy/core-types'\nimport { ethers } from 'ethers'\nimport PriceTag from '../../ui/Tags/Price'\n\nconst PurchaseModal = ({onOldBookPurchase,onNewBookPurchase,data}) => {\n\n\tconst dispatch = useDispatch()\n\n\tconst UserState = useSelector(state => state.UserState)\n\tconst ModalState = useSelector(state => state.ModalState)\n\tconst BWalletState = useSelector(state => state.BWalletState)\n\n\tconst [Show, setShow] = useState(false)\n\tconst [Loading, setLoading] = useState(false)\n\tconst [WalletData, setWalletData] = useState(null)\n\n\tconst getBalance = useCallback(\n\t\tasync () => {\n\t\t\tconst balanceParams = {\n\t\t\t\tchainId: ChainId.POLYGON_MUMBAI,\n\t\t\t\teoaAddress: BWalletState.smartAccount.address,\n\t\t\t\ttokenAddresses: ['0xdA5289fCAAF71d52a80A254da614a192b693e977'],\n\t\t\t}\n\t\t\tconst balances = await BWalletState.smartAccount.getAlltokenBalances(balanceParams)\n\t\t\tconst usdc = balances.data.filter(token => token.contract_address === \"0xda5289fcaaf71d52a80a254da614a192b693e977\")[0]\n\t\t\tusdc.balance = ethers.utils.formatUnits(usdc?.balance, \"mwei\")\n\t\t\tsetWalletData(usdc)\n\t\t},\n\t\t[BWalletState.smartAccount],\n\t)\n\n\tconst getClasses = () => {\n\t\tlet classes = [\"purchase purchase__wrapper\"]\n\t\tif (Show) classes.push(\"purchase__wrapper--open\")\n\t\telse classes.push(\"purchase__wrapper--close\")\n\t\treturn classes.join(\" \")\n\t}\n\n\tuseEffect(() => {\n\t\twindow.document.documentElement.style.overflowY = Show ? \"hidden\" : \"auto\"\n\t}, [Show])\n\n\tuseEffect(() => {\n\t\tif(Loading) dispatch(showSpinner())\n\t\telse dispatch(hideSpinner())\n\t}, [Loading, dispatch])\n\n\tuseEffect(() => {\n\t\tif(ModalState.show === true && ModalState.type === SHOW_PURCHASE_MODAL){\n\t\t\tGaTracker('modal_view_purchase')\n\t\t\tsetShow(true)\n\t\t\tgetBalance()\n\t\t}\n\t\telse setShow(false)\n\t}, [ModalState, BWalletState, getBalance])\n\n\treturn (\n\t\t<Backdrop show={Show}>\n\t\t\t<div className={getClasses()}>\n\t\t\t\t<div className=\"purchase__wrapper__header\">\n\t\t\t\t\t<div className=\"purchase__wrapper__header__title typo__head--6 typo__transform--capital\">Checkout</div>\n\t\t\t\t\t<div className=\"purchase__wrapper__header__close-button\">\n\t\t\t\t\t\t<div onClick={()=>setShow(false)}><CloseIcon width={20} height={20}/></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"purchase__wrapper__content\">\n\t\t\t\t\t<div className=\"\">Title: {data.title}</div>\n\t\t\t\t\t<PriceTag label={\"price\"} price={data.price}/>\n\t\t\t\t\t<PriceTag label={\"your balance\"} price={WalletData?.balance}/>\n\t\t\t\t\t<PriceTag label={\"balance after purchase\"} price={parseFloat(WalletData?.balance - data.price).toFixed(6)}/>\n\t\t\t\t\t<br/>\n\t\t\t\t\t<Button type=\"primary\" onClick={()=>onNewBookPurchase()}>Purchase</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Backdrop>\n\t)\n}\n\nexport default PurchaseModal","import axios from 'axios'\nimport moment from 'moment'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { useParams, useNavigate } from 'react-router'\nimport React, { useCallback, useEffect, useRef, useState } from 'react'\nimport { Helmet } from 'react-helmet'\n\nimport { ethers } from 'ethers'\nimport { keccak256 } from \"@ethersproject/keccak256\";\nimport { toUtf8Bytes } from \"@ethersproject/strings\";\n\nimport Page from '../components/hoc/Page/Page'\n\nimport Contracts from '../connections/contracts'\n\nimport Stars from '../components/ui/Stars/Stars'\nimport Button from '../components/ui/Buttons/Button'\nimport ListModal from '../components/modal/List/List'\nimport QuoteModal from '../components/modal/Quote/QuoteModal'\nimport ReviewModal from '../components/modal/Review/ReviewModal'\nimport PurchaseModal from '../components/modal/Purchase/Purchase'\nimport ShareListModal from '../components/modal/ShareList/ShareList'\n\nimport Wallet from '../connections/wallet'\n\nimport GaTracker from '../trackers/ga-tracker'\nimport { BASE_URL } from '../config/env'\nimport { isFilled, isNotEmpty, isUsable } from '../helpers/functions'\n\nimport { setSnackbar } from '../store/actions/snackbar'\nimport { hideSpinner, showSpinner } from '../store/actions/spinner'\nimport { hideModal, showModal, SHOW_LIST_MODAL, SHOW_PURCHASE_MODAL, SHOW_QUOTE_MODAL, SHOW_REVIEW_MODAL, SHOW_SHARE_MODAL } from '../store/actions/modal'\n\nimport useIsLoggedIn from '../hook/useIsLoggedIn'\n\nimport BackgroundBook from '../assets/images/background-book.svg'\nimport {ReactComponent as LikeIcon} from '../assets/icons/like.svg'\nimport {ReactComponent as CartIcon} from \"../assets/icons/cart-add.svg\"\nimport {ReactComponent as PrintIcon} from \"../assets/icons/print.svg\"\nimport {ReactComponent as QuoteIcon} from \"../assets/icons/quote.svg\"\nimport {ReactComponent as UsersIcon} from \"../assets/icons/users.svg\"\nimport {ReactComponent as ReviewIcon} from \"../assets/icons/message.svg\"\nimport {ReactComponent as SynopsisIcon} from \"../assets/icons/text.svg\"\nimport {ReactComponent as LanguageIcon} from \"../assets/icons/language.svg\"\nimport {ReactComponent as BlockQuoteIcon} from \"../assets/icons/block-quote.svg\"\nimport {ReactComponent as LiveReadersIcon} from \"../assets/icons/live_readers.svg\"\nimport {ReactComponent as ExternalLinkIcon} from \"../assets/icons/external-link.svg\"\nimport {ReactComponent as TotalReadTimeIcon} from \"../assets/icons/total_read_time.svg\"\n\nimport {useWeb3AuthContext} from '../contexts/SocialLoginContext'\n\nconst BookPage = props => {\n\n\tconst TABS = [{id: 'TAB01', label: 'Synopsis', icon : <SynopsisIcon />}, {id: 'TAB02', label: 'reviews',icon : <ReviewIcon />}, {id: 'TAB03', label: 'quotes',icon:<BlockQuoteIcon/>}]\n\n\tconst params = useParams()\n\tconst dispatch = useDispatch()\n\tconst navigate = useNavigate()\n\tconst isLoggedIn = useIsLoggedIn()\n\n\tconst {\n\t\taddress,\n\t\tconnect,\n\t\tprovider,\n\t} = useWeb3AuthContext();\n\n\tconst UserState = useSelector(state => state.UserState)\n\tconst BWalletState = useSelector(state=> state.BWalletState)\n\n\tconst [WalletAddress, setWalletAddress] = useState(null)\n\tconst [Loading, setLoading] = useState(false)\n\tconst [ActiveTab, setActiveTab] = useState('TAB01')\n\t// NFT\n\tconst [NFT, setNFT] = useState(null)\n\tconst [Owner, setOwner] = useState(null)\n\tconst [Listed, setListed] = useState(null)\n\tconst [UserCopy, setUserCopy] = useState(null)\n\tconst [Published, setPublished] = useState(null)\n\t// ListedNFT\n\tconst [bookID, setBookID] = useState(null)\n\t// Likes\n\tconst [Likes, setLikes] = useState(0)\n\tconst [Liked, setLiked] = useState(false)\n\t// Reviews\n\tconst [Rating, setRating] = useState(0)\n\tconst [Review, setReview] = useState(null)\n\tconst [Reviews, setReviews] = useState([])\n\tconst [TotalReveiws, setTotalReveiws] = useState(0)\n\tconst [ReviewForm, setReviewForm] = useState({title: '', body: '', rating: 0})\n\t// Quotes\n\tconst [Quote, setQuote] = useState(null)\n\tconst [Quotes, setQuotes] = useState([])\n\tconst [QuotesForm, setQuotesForm] = useState({quote: ''})\n\t// live reader count\n\tconst [totalReaders, setTotalReaders] = useState(0)\n\tconst [liveReaderCount, setLiveReaderCount] = useState(0)\n\tconst [totalReadTime, setTotalReadTime] = useState(0)\n\t// tabs\n\tconst TabContainerRef = useRef();\n\n\tuseEffect(() => { GaTracker('page_view_book') }, [])\n\n\tuseEffect(() => {\n\t\tif(ActiveTab === 'TAB01') GaTracker('tab_view_book_synopsis')\n\t\telse if(ActiveTab === 'TAB02') GaTracker('tab_view_book_reviews')\n\t\telse GaTracker('tab_view_book_quotes')\n\t}, [ActiveTab])\n\n\tuseEffect(() => { if(isUsable(NFT)) setListed(NFT.listed === 1?true:false) }, [NFT])\n\n\tconst getReviews = useCallback(\n\t\t() => {\n\t\t\tif(isUsable(NFT)){\n\t\t\t\tsetLoading(true)\n\t\t\t\taxios({\n\t\t\t\t\turl: `${BASE_URL}/api/book/reviews`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tbookAddress: NFT.book_address\n\t\t\t\t\t}\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif(res.status === 200){\n\t\t\t\t\t\tsetReviews(res.data.reviews)\n\t\t\t\t\t\tsetRating(res.data.rating)\n\t\t\t\t\t\tsetTotalReveiws(res.data.total)\n\t\t\t\t\t}\n\t\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t}).finally(() => setLoading(false))\n\t\t\t}\n\t\t},\n\t\t[NFT, dispatch],\n\t)\n\t\n\tconst getUserReview = useCallback(\n\t\t() => {\n\t\t\tif(isUsable(NFT) && isUsable(WalletAddress)){\n\t\t\t\tsetLoading(true)\n\t\t\t\taxios({\n\t\t\t\t\turl: `${BASE_URL}/api/book/reviewed`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tbookAddress: NFT.book_address,\n\t\t\t\t\t\townerAddress: WalletAddress\n\t\t\t\t\t}\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif(res.status === 200){\n\t\t\t\t\t\tif(isNotEmpty(res.data))\n\t\t\t\t\t\t\tsetReview(res.data)}\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t}).finally(() => setLoading(false))\n\t\t\t}\n\t\t},\n\t\t[NFT, WalletAddress, dispatch],\n\t)\n\n\tconst getQuotes = useCallback(\n\t\t() => {\n\t\t\tif(isUsable(NFT)){\n\t\t\t\tsetLoading(true)\n\t\t\t\taxios({\n\t\t\t\t\turl: `${BASE_URL}/api/book/quotes`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tbookAddress: NFT.book_address\n\t\t\t\t\t}\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif(res.status === 200) setQuotes(res.data)\n\t\t\t\t\telse if(res.status === 204) {}\n\t\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t}).finally(() => setLoading(false))\n\t\t\t}\n\t\t},\n\t\t[NFT, dispatch],\n\t)\n\n\tconst getUserQuote = useCallback(\n\t\t() => {\n\t\t\tif(isUsable(NFT) && isUsable(WalletAddress)){\n\t\t\t\tsetLoading(true)\n\t\t\t\taxios({\n\t\t\t\t\turl: `${BASE_URL}/api/book/quoted`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tbookAddress: NFT.book_address,\n\t\t\t\t\t\townerAddress: WalletAddress\n\t\t\t\t\t}\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif(res.status === 200){\n\t\t\t\t\t\tif(isNotEmpty(res.data))\n\t\t\t\t\t\t\tsetQuote(res.data)\n\t\t\t\t\t}\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t}).finally(() => setLoading(false))\n\t\t\t}\n\t\t},\n\t\t[NFT, WalletAddress, dispatch],\n\t)\n\n\tuseEffect(() => { getReviews() }, [getReviews])\n\n\tuseEffect(() => { getUserReview() }, [getUserReview])\n\n\tuseEffect(() => { getQuotes() }, [getQuotes])\n\n\tuseEffect(() => { getUserQuote() }, [getUserQuote])\n\n\tuseEffect(() => {\n\t\tif(isUsable(NFT)){\n\t\t\tsetLoading(true)\n\t\t\taxios({\n\t\t\t\turl: `${BASE_URL}/api/book/likes`,\n\t\t\t\tmethod: 'GET',\n\t\t\t\tparams: {\n\t\t\t\t\tbookAddress: NFT.book_address\n\t\t\t\t}\n\t\t\t}).then(res => {\n\t\t\t\tif(res.status === 200) setLikes(res.data.likes)\n\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t}).catch(err => {\n\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t}).finally( () => setLoading(false))\n\t\t}\n\t}, [NFT, dispatch])\n\n\tuseEffect(() => {\n\t\tif(isUsable(NFT) && isUsable(WalletAddress)){\n\t\t\tsetLoading(true)\n\t\t\taxios({\n\t\t\t\turl: `${BASE_URL}/api/book/liked`,\n\t\t\t\tmethod: 'GET',\n\t\t\t\tparams: {\n\t\t\t\t\tbookAddress: NFT.book_address,\n\t\t\t\t\townerAddress: WalletAddress\n\t\t\t\t}\n\t\t\t}).then(res => {\n\t\t\t\tif(res.status === 200) setLiked(res.data.liked)\n\t\t\t}).catch(err => {\n\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t}).finally(() => setLoading(false))\n\t\t}\n\t}, [NFT, WalletAddress, dispatch])\n\n\tuseEffect(() => {\n\t\tif(isUsable(NFT)){\n\t\t\tsetLoading(true)\n\t\t\taxios({\n\t\t\t\turl: `${BASE_URL}/api/reader/total-reader-count`,\n\t\t\t\tmethod: 'GET',\n\t\t\t\tparams: { bookAddress: NFT.book_address }\n\t\t\t}).then(res => {\n\t\t\t\tif(res.status === 200) setTotalReaders(res.data.total_readers)\n\t\t\t}).catch(err => {\n\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t}).finally(() => setLoading(false))\n\t\t}\n\t}, [NFT, dispatch])\n\n\tuseEffect(() => {\n\t\tif(isUsable(NFT)){\n\t\t\tsetLoading(true)\n\t\t\taxios({\n\t\t\t\turl: `${BASE_URL}/api/reader/count`,\n\t\t\t\tmethod: 'GET',\n\t\t\t\tparams: { bookAddress: NFT.book_address }\n\t\t\t}).then(res => {\n\t\t\t\tif(res.status === 200) setLiveReaderCount(res.data.reader_count)\n\t\t\t}).catch(err => {\n\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t}).finally(() => setLoading(false))\n\t\t}\n\t}, [NFT, dispatch])\n\n\tuseEffect(() => {\n\t\tif(isUsable(NFT)){\n\t\t\tsetLoading(true)\n\t\t\taxios({\n\t\t\t\turl: `${BASE_URL}/api/reader/total-read-time`,\n\t\t\t\tmethod: 'GET',\n\t\t\t\tparams: { bookAddress: NFT.book_address }\n\t\t\t}).then(res => {\n\t\t\t\tif(res.status === 200) setTotalReadTime(res.data.total_read_time)\n\t\t\t}).catch(err => {\n\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t}).finally(() => setLoading(false))\n\t\t}\n\t}, [NFT, dispatch])\n\n\tuseEffect(() => {\n\t\tsetLoading(true)\n\t\tif(isUsable(BWalletState.smartAccount)){\n\t\t\tsetWalletAddress(BWalletState.smartAccount.address)\n\t\t} \n\t\t\n\t\tsetLoading(false)\n\t}, [BWalletState])\n\n\tuseEffect(() => { if(isUsable(Review)) setReviewForm({title: Review.title, body: Review.body, rating: Review.rating}) }, [Review])\n\tuseEffect(() => {\n        const bookID = params.bookID\n        axios({\n            url: `${BASE_URL}/api/book`,\n            method: 'GET',\n            params: {\n                id: bookID\n            }\n        }).then(res=>{\n            setNFT(res.data[0])\n        })\n\t}, [params])\n\t\n\tuseEffect(() =>{\n\t\tif(isUsable(WalletAddress) && isUsable(NFT)){\n\t\t\tsetLoading(true)\n\t\t\tconst book = NFT\n\t\t\tif(book.new_owner === WalletAddress) setOwner(true)\n\t\t\telse setOwner(false)\n\t\t\tif(book.publisher_address === WalletAddress) setPublished(true)\n\t\t\telse setPublished(false)\n\t\t\taxios({\n\t\t\t\turl: BASE_URL+'/api/book/owner',\n\t\t\t\tmethod: 'GET',\n\t\t\t\tparams: {\n\t\t\t\t\townerAddress: WalletAddress,\n\t\t\t\t\tbookAddress: book.book_address\n\t\t\t\t}\n\t\t\t}).then(res => { if(res.status === 200) setOwner(true)\n\t\t\t}).catch(err => {\n\t\t\t}).finally(() => setLoading(false))\n\t\t} }, [NFT, params, dispatch, WalletAddress]\n\t)\n\n\tuseEffect(() => { if(isUsable(NFT) && isUsable(Published) && isUsable(Owner)) setLoading(false) }, [NFT, Published, Owner])\n\n\tuseEffect(() => {\n\t\tif(Loading) dispatch(showSpinner())\n\t\telse dispatch(hideSpinner())\n\t}, [Loading, dispatch])\n\n\tuseEffect(()=>{\n\t\tlet activeTabElement = document.getElementById(\"BOOK_PAGE_\" + ActiveTab);\n\t\tif(!isUsable(activeTabElement)) return ;\n\t\tif(!isUsable(TabContainerRef.current)) return;\n\t\tTabContainerRef.current.style.setProperty(\"--marker-x\",activeTabElement.offsetLeft);\n\t},[ActiveTab])\n\n\tuseEffect(() => {\n\t\tif(Owner){\n\t\t\taxios({\n\t\t\t\turl: `${BASE_URL}/api/user/book`,\n\t\t\t\tmethod: 'GET',\n\t\t\t\theaders: {\n\t\t\t\t\t'user-id': UserState.user.uid,\n\t\t\t\t\t'address': BWalletState.smartAccount.address,\n\t\t\t\t\t'authorization': `Bearer ${UserState.tokens.acsTkn.tkn}`\n\t\t\t\t},\n\t\t\t\tparams: {walletAddress: BWalletState.smartAccount.address, bookAddress: NFT.book_address}\n\t\t\t}).then(res => {\n\t\t\t\tif(res.status === 200) {\n\t\t\t\t\tsetUserCopy(res.data)\n\t\t\t\t\tsetListed(res.data.listed)\n\t\t\t\t}\n\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t}).catch(err => {\n\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t})\n\t\t}\n\t}, [Owner, UserState, BWalletState, dispatch, NFT])\n\n\tconst loginHandler = async () => {\n\t\tconnect();\n\t}\n\n\tconst walletStatus = () => {\n\t\tif (isUsable(BWalletState.smartAccount)) {\n\t\t\tsetWalletAddress(BWalletState.smartAccount.address)\n\t\t\treturn true\n\t\t}\n\t\telse {\n\t\t\tif (!address) {\n\t\t\t\tloginHandler();\n\t\t\t}\n\t\t\tWallet(provider, dispatch);\n\t\t}\n\t}\n\n\tconst unlistHandler = () => {\n\t\tGaTracker('event_book_unlist')\n\t\tif(isUsable(WalletAddress)){\n\t\t\tsetLoading(true)\n\t\t\taxios({\n\t\t\t\turl: BASE_URL + '/api/user/book/listed',\n\t\t\t\tmethod: 'GET',\n\t\t\t\theaders: {\n\t\t\t\t\t'user-id': UserState.user.uid,\n\t\t\t\t\t'authorization': `Bearer ${UserState.tokens.acsTkn.tkn}`\n\t\t\t\t},\n\t\t\t\tparams: {\n\t\t\t\t\townerAddress: WalletAddress,\n\t\t\t\t\ttokenId: UserCopy.token_id,\n\t\t\t\t\tbookAddress: NFT.book_address\n\t\t\t\t}\n\t\t\t}).then(res => {\n\t\t\t\tif(res.status === 200){\n\t\t\t\t\tsetLoading(true)\n\t\t\t\t\tconst orderId = res.data.order_id\n\t\t\t\t\tContracts.unlistBookFromMarketplace(orderId, BWalletState.smartAccount.signer).then(res => {\n\t\t\t\t\t\tsetLoading(true)\n\t\t\t\t\t\taxios({\n\t\t\t\t\t\t\turl: BASE_URL + '/api/book/unlist',\n\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\townerAddress: WalletAddress,\n\t\t\t\t\t\t\t\tbookAddress: NFT.book_address,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).then(res => {\n\t\t\t\t\t\t\tif(res.status === 200){\n\t\t\t\t\t\t\t\tsetListed(false)\n\t\t\t\t\t\t\t\tdispatch(hideModal())\n\t\t\t\t\t\t\t\tdispatch(setSnackbar({show: true, message: \"Book unlisted from marketplace.\", type: 1}))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t\t\t}).finally( ()=> { setLoading(false) })\n\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\tsetLoading(false)\n\t\t\t\t\t\tif(isUsable(err.reason)){\n\t\t\t\t\t\t\tif(err.reason.includes('NFT not yet listed / already sold')) dispatch(setSnackbar({show: true, message: \"eBook already sold or not listed.\", type: 3}))\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse dispatch(setSnackbar('ERROR'))\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t}).catch(err => {\n\t\t\t\tsetLoading(false)\n\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t})\n\t\t}\n\t}\n\n\tconst listHandler = () => {\n\t\tdispatch(showModal(SHOW_LIST_MODAL))\n\t\tif(moment(NFT.secondary_sales_from).isSame(moment()) || moment(NFT.secondary_sales_from).isBefore(moment())) dispatch(showModal(SHOW_LIST_MODAL))\n\t\telse if(moment(NFT.secondary_sales_from).isAfter(moment())) dispatch(setSnackbar({show: true, message: `Secondary Sales will open only after ${moment(NFT.secondary_sales_from).format('D MMM, YYYY')}.`, type: 2}))\n\t}\n\n\t// TODO: Compatible for Biconomy wallet\n\tconst onListHandler = listPrice => {\n\t\tGaTracker('event_book_list')\n\t\tif(isUsable(WalletAddress)){\n\t\t\tsetLoading(true)\n\t\t\tContracts.listBookToMarketplace(NFT.book_address, UserCopy.token_id, listPrice, BWalletState.smartAccount.signer).then(res => {\n\t\t\t\tsetLoading(true)\n\t\t\t\tconst orderId = parseInt(res.events.filter(event => event.event === 'CoverListed')[0].args[0]._hex)\n\t\t\t\taxios({\n\t\t\t\t\turl: BASE_URL + '/api/book/list',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\townerAddress: WalletAddress,\n\t\t\t\t\t\tbookAddress: NFT.book_address,\n\t\t\t\t\t\tbookPrice: listPrice,\n\t\t\t\t\t\tbookOrderId: orderId,\n\t\t\t\t\t\tbookTokenId: UserCopy.token_id\n\t\t\t\t\t}\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif(res.status === 200){\n\t\t\t\t\t\tsetListed(true)\n\t\t\t\t\t\tdispatch(hideModal())\n\t\t\t\t\t\tdispatch(setSnackbar({show: true, message: \"Book listed on marketplace.\", type: 1}))\n\t\t\t\t\t\tif(res.data){\n\t\t\t\t\t\t\tsetBookID(res.data)\n\t\t\t\t\t\t\tdispatch(showModal(SHOW_SHARE_MODAL))\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t}).finally( ()=> { setLoading(false) })\n\t\t\t}).catch(err => {\n\t\t\t\tif(isUsable(err.reason)){\n\t\t\t\t\tif(err.reason.includes(\"Can't list the cover at this time\")) dispatch(setSnackbar({show: true, message: \"Please wait for some more time before listing the book.\", type: 3}))\n\t\t\t\t\telse if(err.reason.includes(\"Listing for this book is disabled\")) dispatch(setSnackbar({show: true, message: \"Listing this book is not allowed right now. Please try again later.\", type: 3}))\n\t\t\t\t\telse if(err.reason.includes(\"Seller should own the NFT to list\")) dispatch(setSnackbar({show: true, message: \"Book is already listed. Please contact us on support@nalnda.com\", type: 3}))\n\t\t\t\t}\n\t\t\t\telse dispatch(setSnackbar('ERROR'))\n\t\t\t}).finally(() => setLoading(false))\n\t\t}\n\t}\n\n\tconst readHandler = async () => {\n\t\tGaTracker('event_book_read')\n\t\tsetLoading(true)\n\t\ttry {\n\t\t\t// axios({\n\t\t\t// \turl: `${BASE_URL}/api/verify`,\n\t\t\t// \tmethod: 'GET',\n\t\t\t// \tparams: {\n\t\t\t// \t\tbookAddress: NFT.book_address,\n\t\t\t// \t\townerAddress: WalletAddress\n\t\t\t// \t}\n\t\t\t// }).then(res => {\n\t\t\t// \tif(res.status === 200){\n\t\t\t// \t\tconst messageToSign = res.data\n\t\t\t// \t\tWallet.signMessage(BWalletState.smartAccount.signer, JSON.stringify(messageToSign)).then(res => {\n\t\t\t// \t\t\tif(res.isValid === true){\n\t\t\t// \t\t\t\taxios({\n\t\t\t// \t\t\t\t\turl : BASE_URL + '/api/verify',\n\t\t\t// \t\t\t\t\tmethod : \"POST\",\n\t\t\t// \t\t\t\t\theaders: {\n\t\t\t// \t\t\t\t\t\t'address': BWalletState.smartAccount.address,\n\t\t\t// \t\t\t\t\t\t'user-id': UserState.user.uid,\n\t\t\t// \t\t\t\t\t\t'authorization': `Bearer ${UserState.tokens.acsTkn.tkn}`\n\t\t\t// \t\t\t\t\t},\n\t\t\t// \t\t\t\t\tdata : {\n\t\t\t// \t\t\t\t\t\taccountAddress: WalletAddress,\n\t\t\t// \t\t\t\t\t\tbookAddress: NFT.book_address,\n\t\t\t// \t\t\t\t\t\tsignedData: res.signedData,\n\t\t\t// \t\t\t\t\t\tcid : NFT.book.slice(NFT.book.lastIndexOf(\"/\")+1),\n\t\t\t// \t\t\t\t\t}\n\t\t\t// \t\t\t\t}).then(res=>{\n\t\t\t// \t\t\t\t\tif(res.status === 200) {\n\t\t\t// \t\t\t\t\t\tGaTracker('navigate_book_reader')\n\t\t\t// \t\t\t\t\t\tnavigate('/library/reader', {state: {book: {...NFT, url: res.data.url}, preview: false}}) \n\t\t\t// \t\t\t\t\t}\n\t\t\t// \t\t\t\t\telse dispatch(setSnackbar({show:true,message : \"Error\", type : 4}))\n\t\t\t// \t\t\t\t}).catch(err => { dispatch(setSnackbar('ERROR'))\n\t\t\t// \t\t\t\t}).finally( () => setLoading(false))\n\t\t\t// \t\t\t}\n\t\t\t// \t\t\telse dispatch(setSnackbar({show: true, message: \"Could not verify the authenticity of the signature.\", type: 3}))\n\t\t\t// \t\t})\n\t\t\t// \t}\n\t\t\t// \telse dispatch(setSnackbar('NOT200'))\n\t\t\t// })\n\t\t\taxios({\n\t\t\t\turl: `${BASE_URL}/api/verify/mobile`,\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: {\n\t\t\t\t\t'address': BWalletState.smartAccount.address,\n\t\t\t\t\t'user-id': UserState.user.uid,\n\t\t\t\t\t'authorization': `Bearer ${UserState.tokens.acsTkn.tkn}`\n\t\t\t\t},\n\t\t\t\tdata: {\n\t\t\t\t\tbookAddress: NFT.book_address,\n\t\t\t\t\townerAddress: BWalletState.smartAccount.address\n\t\t\t\t}\n\t\t\t}).then(res => {\n\t\t\t\tif(res.status === 200){\n\t\t\t\t\tGaTracker('navigate_book_reader')\n\t\t\t\t\tnavigate('/library/reader', {\n\t\t\t\t\t\tstate: {\n\t\t\t\t\t\t\tbook: {\n\t\t\t\t\t\t\t\t...NFT,\n\t\t\t\t\t\t\t\turl: `${res.data.base}?token=${res.data.token}&cid=${res.data.cid}&fileName=${res.data.fileName}`\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t} catch (err) {\n\t\t\tsetLoading(false)\n\t\t}\n\t}\n\n\tconst previewHandler = () => {\n\t\tGaTracker('navigate_book_preview')\n\t\tnavigate('/book/preview', {state: {book: NFT, preview: true}})\n\t}\n\n\tconst purchaseHandler = () => isLoggedIn?dispatch(showModal(SHOW_PURCHASE_MODAL)):dispatch(setSnackbar('NOT_LOGGED_IN'))\n\n\tconst reviewModalHandler = () => isLoggedIn?dispatch(showModal(SHOW_REVIEW_MODAL)):dispatch(setSnackbar('NOT_LOGGED_IN'))\n\n\tconst quoteModalHandler = () => isLoggedIn?dispatch(showModal(SHOW_QUOTE_MODAL)):dispatch(setSnackbar('NOT_LOGGED_IN'))\n\n\tconst purchaseNewCopyHandler = () => {\n\t\tconst purchase = async() => {\n\t\t\ttry{\n\t\t\t\tconst approveErc721Interface = new ethers.utils.Interface(['function approve(address spender, uint256 amount)'])\n\t\t\t\tconst address = BWalletState.smartAccount.address\n\t\t\t\tconst approveData = approveErc721Interface.encodeFunctionData( 'approve', [NFT.book_address, ethers.utils.parseUnits(NFT.price.toString(), 6)] )\n\t\t\t\tconst approveTx = { to: \"0xdA5289fCAAF71d52a80A254da614a192b693e977\", data: approveData }\n\t\t\t\tconst safeMintErc721Interface = new ethers.utils.Interface(['function safeMint(address to)'])\n\t\t\t\tconst safeMintData = safeMintErc721Interface.encodeFunctionData( 'safeMint', [address] )\n\t\t\t\tconst safeMintTx = { to: NFT.book_address, data: safeMintData }\n\t\t\t\tBWalletState.smartAccount.on('txMined', response => {\n\t\t\t\t\tconst logs = response.receipt.logs.filter(log => log.address === NFT.book_address && log.topics.length === 4 && isFilled(log.topics.filter(topic => topic === keccak256(toUtf8Bytes(\"Transfer(address,address,uint256)\")) && isFilled(log.topics[log.topics.length-1]))) )\n\t\t\t\t\tif(isFilled(logs)){\n\t\t\t\t\t\tconst tokenId = parseInt(logs[0].topics[logs[0].topics.length-1])\n\t\t\t\t\t\taxios({\n\t\t\t\t\t\t\turl: BASE_URL+'/api/book/purchase',\n\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\tdata: {ownerAddress: address, bookAddress: NFT.book_address, tokenId, purchasePrice: NFT.price}\n\t\t\t\t\t\t}).then(res => {\n\t\t\t\t\t\t\tif(res.status === 200){\n\t\t\t\t\t\t\t\tsetOwner(true)\n\t\t\t\t\t\t\t\tdispatch(hideModal())\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t\t\t}).finally(() => setLoading(false))\n\t\t\t\t\t\taxios({\n\t\t\t\t\t\t\turl: BASE_URL+'/api/book/copies',\n\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\tdata: {bookAddress: NFT.book_address, copies: tokenId}\n\t\t\t\t\t\t}).then(res => {\n\t\t\t\t\t\t\tif(res.status !== 200) dispatch(setSnackbar('NOT200'))\n\t\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tBWalletState.smartAccount.on('error', response => {\n\t\t\t\t\tsetLoading(false)\n\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t\tconsole.error({error: response})\n\t\t\t\t})\n\t\t\t\tconst transactions = [approveTx, safeMintTx]\n\t\t\t\tconst feeQuotes = await BWalletState.smartAccount.prepareRefundTransactionBatch({ transactions })\n\t\t\t\tconst transaction = await BWalletState.smartAccount.createRefundTransactionBatch({ transactions, feeQuote: feeQuotes[1] })\n\t\t\t\tawait BWalletState.smartAccount.sendTransaction({\n\t\t\t\t\ttx: transaction,\n\t\t\t\t\tgasLimit: { hex: \"0x4C4B40\", type: \"hex\" }\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tsetLoading(false)\n\t\t\t\tconsole.error({error})\n\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t}\n\t\t}\n\t\tGaTracker('event_book_purchase_new')\n\t\tsetLoading(true)\n\t\tif(isUsable(WalletAddress)) purchase()\n\t\telse dispatch(setSnackbar({show: true, message: \"Please connect your WEB3 wallet.\", type: 3}))\n\t}\n\n\tconst purchaseOldCopyHandler = offer => {\n\t\tGaTracker('event_book_purchase_old')\n\t\tif(walletStatus()){\n\t\t\tsetLoading(true)\n\t\t\tContracts.buyListedCover(offer.order_id, offer.price, BWalletState.smartAccount.signer).then(res => {\n\t\t\t\taxios({\n\t\t\t\t\turl: BASE_URL+'/api/book/purchase/secondary',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tnewOwnerAddress: WalletAddress,\n\t\t\t\t\t\tpreviousOwnerAddress: offer.previous_owner,\n\t\t\t\t\t\tbookAddress: offer.book_address,\n\t\t\t\t\t\ttokenId: offer.token_id,\n\t\t\t\t\t\tpurchasePrice: offer.price,\n\t\t\t\t\t\torderId: offer.order_id,\n\t\t\t\t\t\tdaScore: offer.da_score\n\t\t\t\t\t}\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif(res.status === 200){\n\t\t\t\t\t\tdispatch(hideModal())\n\t\t\t\t\t\tsetOwner(true)\n\t\t\t\t\t}\n\t\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t}).finally(() => setLoading(false))\n\t\t\t}).catch(err => {\n\t\t\t\tsetLoading(false)\n\t\t\t})\n\t\t}\n\t}\n\n\tconst likeHandler = () => {\n\t\tif(walletStatus()){\n\t\t\tif(Owner){\n\t\t\t\tif(!Liked){\n\t\t\t\t\tsetLikes(old => old+1)\n\t\t\t\t\tGaTracker('event_book_like')\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tsetLikes(old => old-1)\n\t\t\t\t\tGaTracker('event_book_unlike')\n\t\t\t\t}\n\t\t\t\taxios({\n\t\t\t\t\turl: `${BASE_URL}/api/book/likes`,\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tbookAddress: NFT.book_address,\n\t\t\t\t\t\townerAddress: WalletAddress,\n\t\t\t\t\t\tlikedState: !Liked\n\t\t\t\t\t}\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif(res.status === 200) setLiked(old => !old)\n\t\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t}).finally( () => setLoading(false) )\n\t\t\t}\n\t\t\telse dispatch(setSnackbar({show: true, message: \"Only owners can like a book.\", type: 3}))\n\t\t}\n\t\telse dispatch(setSnackbar({show: true, message: \"Please login first.\", type: 3}))\n\t}\n\n\tconst renderGrid = () => {\n\t\treturn (\n\t\t\t<div className='book__data__container__desc__summary__grid typo__color--n700'>\n\t\t\t\t<div className='book__data__container__desc__summary__grid__item'>\n\t\t\t\t\t<LanguageIcon />\n\t\t\t\t\t<div className='book__data__container__desc__summary__grid__item__data'>{NFT.language}</div>\n\t\t\t\t</div>\n\t\t\t\t<div className='book__data__container__desc__summary__grid__item'>\n\t\t\t\t\t<UsersIcon />\n\t\t\t\t\t<div className='book__data__container__desc__summary__grid__item__data'>{totalReaders} readers</div>\n\t\t\t\t</div>\n\t\t\t\t<div className='book__data__container__desc__summary__grid__item'>\n\t\t\t\t\t<LiveReadersIcon />\n\t\t\t\t\t<div className='book__data__container__desc__summary__grid__item__data'>{liveReaderCount} people reading</div>\n\t\t\t\t</div>\n\t\t\t\t<div className='book__data__container__desc__summary__grid__item'>\n\t\t\t\t\t<TotalReadTimeIcon />\n\t\t\t\t\t<div className='book__data__container__desc__summary__grid__item__data'>{Math.ceil(totalReadTime / 60)} minutes</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n\n\tconst renderTabs = () => {\n\t\tlet tabsDOM = []\n\t\tTABS.forEach(tab => {\n\t\t\ttabsDOM.push(\n\t\t\t\t<div onClick={()=>setActiveTab(tab.id)} id={\"BOOK_PAGE_\"+tab.id} className={tab.id === ActiveTab?\"book__data__container__desc__tabs__container__item book__data__container__desc__tabs__container__item--active\":\"book__data__container__desc__tabs__container__item utils__cursor--pointer\"} key={tab.id}>\n\t\t\t\t\t{isUsable(tab.icon) && tab.icon}\n\t\t\t\t\t<h5 className=\"typo__head typo__head--6 typo__transform--capital\">{tab.label}</h5>\n\t\t\t\t</div>\n\t\t\t)\n\t\t})\n\t\treturn tabsDOM\n\t}\n\n\tconst renderTabData = () => {\n\t\tswitch (ActiveTab) {\n\t\t\tcase 'TAB01':\n\t\t\t\treturn <p className=\"typo--break-spaces typo__body typo__color--n600\">{NFT.synopsis}</p>\n\t\t\tcase 'TAB02':\n\t\t\t\tconst renderReviews = reviews => {\n\t\t\t\t\tlet reviewsDOM = []\n\t\t\t\t\tif(isFilled(reviews)) reviews.forEach(review => reviewsDOM.push(\n\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__reviews__item\">\n\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__reviews__item__header__head typo__head typo__head--6\">{review.title}</div>\n\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__reviews__item__header\">\n\t\t\t\t\t\t\t\t<Stars rating={review.rating} size={'small'}/>\n\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__reviews__item__header__time typo__color--n500\">{moment(review.reviewed_at).format(\"D MMM, YYYY\")}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__reviews__item__body typo__body typo__body--2\">{review.body}</div>\n\t\t\t\t\t\t</div>))\n\t\t\t\t\treturn reviewsDOM\n\t\t\t\t}\n\t\t\t\treturn <React.Fragment>\n\t\t\t\t\t{ !isUsable(Review) && Owner ?\n\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__action\">\n\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__action__icon\">\n\t\t\t\t\t\t\t\t<ReviewIcon width={32} height={32} stroke=\"currentColor\"/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__action__label typo__head--6\">Write a Review</div>\n\t\t\t\t\t\t\t<Button type=\"primary\" onClick={()=>reviewModalHandler()}>Review</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t:null}\n\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__reviews\">\n\t\t\t\t\t\t{renderReviews(Reviews)}\n\t\t\t\t\t\t{Reviews?.length === 0 ? <div className='book__data__container__desc__tabs__data__empty'>No Reviews</div> : \"\"}\n\t\t\t\t\t</div>\n\t\t\t\t</React.Fragment>\n\t\t\tcase 'TAB03':\n\t\t\t\tconst renderQuotes = quotes => {\n\t\t\t\t\tlet quotesDOM = []\n\t\t\t\t\tquotes.forEach((quote,i) => {\n\t\t\t\t\t\tquotesDOM.push(\n\t\t\t\t\t\t\t<div key={i} className='book__data__container__desc__tabs__data__quotes__item'>\n\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__quotes__item__icon\">\n\t\t\t\t\t\t\t\t\t<QuoteIcon width={32} height={32}  stroke=\"currentColor\"/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__quotes__item__body typo__body\">\n\t\t\t\t\t\t\t\t\t{quote.body}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__quotes__item__time typo__cap typo__cap--2\">\n\t\t\t\t\t\t\t\t\t{moment(quote.created_at).format(\"D MMM, YYYY\") || \"-\"}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)\n\t\t\t\t\t})\n\t\t\t\t\treturn quotesDOM\n\t\t\t\t}\n\t\t\t\treturn <React.Fragment>\n\t\t\t\t\t{ !isUsable(Quote) && ( Published || Owner ) ?\n\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__action\">\n\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__action__icon\">\n\t\t\t\t\t\t\t\t<BlockQuoteIcon width={32} height={32} stroke=\"currentColor\"/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__action__label typo__head--6\">Write a Quote</div>\n\t\t\t\t\t\t\t<Button type=\"primary\" onClick={()=>quoteModalHandler()}>Quote</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t:null}\n\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__quotes\">\n\t\t\t\t\t\t{renderQuotes(Quotes)}\n\t\t\t\t\t\t{Quotes?.length === 0 ? <div className='book__data__container__desc__tabs__data__empty'>No Quotes</div> : \"\"}\n\t\t\t\t\t</div>\n\t\t\t\t</React.Fragment>\n\t\t\tdefault:\n\t\t\t\tbreak\n\t\t}\n\t}\n\n\tconst reviewHandler = () => {\n\t\tGaTracker('event_book_review')\n\t\tif(isUsable(WalletAddress)){\n\t\t\tif(isNotEmpty(ReviewForm.body) && isNotEmpty(ReviewForm.rating) && isNotEmpty(ReviewForm.title)){\n\t\t\t\tsetLoading(true)\n\t\t\t\taxios({\n\t\t\t\t\turl: `${BASE_URL}/api/book/reviews`,\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\treview: {...ReviewForm},\n\t\t\t\t\t\tbookAddress: NFT.book_address,\n\t\t\t\t\t\townerAddress: WalletAddress\n\t\t\t\t\t}\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif(res.status === 200) {\n\t\t\t\t\t\tdispatch(hideModal())\n\t\t\t\t\t\tgetUserReview()\n\t\t\t\t\t\tgetReviews()\n\t\t\t\t\t}\n\t\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tsetLoading(false)\n\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t})\n\t\t\t}\n\t\t\telse dispatch(setSnackbar({show: true, message: \"Please fill the review.\", type: 3}))\n\t\t}\n\t\telse dispatch(setSnackbar({show: true, message: \"Please login first\", type: 3}))\n\t}\n\n\tconst quoteHandler = () => {\n\t\tGaTracker('event_book_quote')\n\t\tif(isUsable(WalletAddress)){\n\t\t\tif(isNotEmpty(QuotesForm.quote)){\n\t\t\t\tsetLoading(true)\n\t\t\t\taxios({\n\t\t\t\t\turl: `${BASE_URL}/api/book/quotes`,\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tquote: {body:QuotesForm.quote},\n\t\t\t\t\t\tbookAddress: NFT.book_address,\n\t\t\t\t\t\townerAddress: WalletAddress\n\t\t\t\t\t}\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif(res.status === 200){\n\t\t\t\t\t\tdispatch(hideModal())\n\t\t\t\t\t\tgetUserQuote()\n\t\t\t\t\t\tgetQuotes()\n\t\t\t\t\t}\n\t\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tsetLoading(false)\n\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t})\n\t\t\t}\n\t\t\telse dispatch(setSnackbar({show: true, message: \"Please enter the quote.\", type: 3}))\n\t\t}\n\t\telse dispatch(setSnackbar({show: true, message: \"Please login first\", type: 3}))\n\t}\n\n\treturn (\n\t\t<>\n\t\t<Helmet>\n\t\t\t<meta name=\"Book's Page\" content='Buy & Read the book you like'/>\n\t\t</Helmet>\n\t\t<Page>\n\t\t\t<div className=\"book__bg\">\n\t\t\t\t<img src={BackgroundBook} alt=\"background\" loading=\"lazy\"/>\n\t\t\t</div>\n\t\t\t{isUsable(NFT)?\n\t\t\t\t<>\n\t\t\t\t\t<div className=\"book__data\">\n\t\t\t\t\t\t<div className=\"book__data__background\"/>\n\t\t\t\t\t\t<div className=\"book__data__container\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div className='book__data__container__cover'>\n\t\t\t\t\t\t\t\t\t<img className='book__data__container__cover__image' src={NFT.cover_display_url?NFT.cover_display_url:NFT.cover_public_url?NFT.cover_public_url:NFT.cover} alt={NFT.name}/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className='book__data__container__meta'>\n\t\t\t\t\t\t\t\t\t<h3 className=\"typo__color--n700 typo__head typo__head--3 typo__transform--capital\">{NFT.title}</h3>\n\t\t\t\t\t\t\t\t\t<h5 className=\"typo__color--n500 typo__head typo__head--6 typo__transform--upper\">{NFT.author}</h5>\n\t\t\t\t\t\t\t\t\t{Owner||Published?null:<div className='book__data__container__meta__price typo-head--6 typo__act typo__color--success'>{NFT.price===0?\"FREE\":<><img src='https://imagedelivery.net/yOWneHxM1h9mu46Te3Yjwg/59c27d12-e4eb-4f74-7a6e-b33ba6537600/icon48' style={{width: 20, height: 20, objectFit: 'contain'}} alt=\"USDC\"/>&nbsp;{NFT.price}</>}</div>}\n\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__meta__rating\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__meta__rating__stars\">\n\t\t\t\t\t\t\t\t\t\t\t<Stars size={'small'} rating={Rating}/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className='book__data__container__meta__rating__count typo__body'>\n\t\t\t\t\t\t\t\t\t\t\t{TotalReveiws} reviews\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__meta__cta\">\n\t\t\t\t\t\t\t\t\t\t{Listed\n\t\t\t\t\t\t\t\t\t\t\t?\n\t\t\t\t\t\t\t\t\t\t\t\t<Button type=\"primary\" size=\"lg\" onClick={()=>unlistHandler()}>Unlist</Button>\n\t\t\t\t\t\t\t\t\t\t\t:Published\n\t\t\t\t\t\t\t\t\t\t\t\t?<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button type=\"primary\" size=\"lg\" onClick={()=>readHandler()}>Read</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t:Owner\n\t\t\t\t\t\t\t\t\t\t\t\t\t?<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button type=\"primary\" size=\"lg\" onClick={()=>readHandler()}>Read</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button onClick={()=>listHandler()}>List</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t\t:<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button type=\"primary\" size=\"lg\" onClick={()=>purchaseHandler()}>Buy Now</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button onClick={()=>previewHandler()}>Preview</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className='book__data__container__desc'>\n\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__left\">\n\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__summary\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__summary__contract\" onClick={()=>window.open(`https://mumbai.polygonscan.com/address/${NFT.book_address}`, \"_blank\")}>\n\t\t\t\t\t\t\t\t\t\t\t<div className='book__data__container__desc__summary__contract__data'>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className='book__data__container__desc__summary__contract__label typo__color--n700'>Contract Address</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className='book__data__container__desc__summary__contract__value typo__color--n500'>{(NFT.book_address||\"\").slice(0,12)}…{(NFT.book_address||\"\").slice((NFT.contract||\"\").length-10)}</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className='book__data__container__desc__summary__contract__icon'>\n\t\t\t\t\t\t\t\t\t\t\t\t<ExternalLinkIcon width={24} height={24}/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className='book__data__container__desc__summary__head typo__color--n700'>Genres</div>\n\t\t\t\t\t\t\t\t\t\t<div className='book__data__container__desc__summary__chips typo__transform--capital'>{JSON.parse(NFT.genres).map(g=><div className=\"book__data__container__desc__summary__chips__item\">{g}</div>)}</div>\n\t\t\t\t\t\t\t\t\t\t<div className='book__data__container__desc__summary__head typo__color--n700'>Prefered Age Group</div>\n\t\t\t\t\t\t\t\t\t\t<div className='book__data__container__desc__summary__chips typo__transform--capital'>{JSON.parse(NFT.age_group).map(g=><div className=\"book__data__container__desc__summary__chips__item\">{g}</div>)}</div>\n\t\t\t\t\t\t\t\t\t\t{renderGrid()}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__right\">\n\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__interacts\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__interacts__item\">\n\t\t\t\t\t\t\t\t\t\t\t<div className='typo__subtitle typo__color--n500'>Likes</div>\n\t\t\t\t\t\t\t\t\t\t\t<LikeIcon width={24} height={24} className=\"book__data__container__desc__interacts__item__icon\" stroke={Liked?\"#ff5722\":\"currentColor\"} fill={Liked?\"#ff5722\":\"transparent\"} onClick={ ()=>likeHandler() }/>\n\t\t\t\t\t\t\t\t\t\t\t<div className='typo__head--5 typo__color--n600'>{Likes||\"0\"}</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__interacts__item\">\n\t\t\t\t\t\t\t\t\t\t\t<div className='typo__subtitle typo__color--n500'>Reviews</div>\n\t\t\t\t\t\t\t\t\t\t\t<ReviewIcon width={24} height={24} stroke=\"currentColor\"/>\n\t\t\t\t\t\t\t\t\t\t\t<div className='typo__head--5 typo__color--n600'>{TotalReveiws||\"0\"}</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__interacts__item\">\n\t\t\t\t\t\t\t\t\t\t\t<div className='typo__subtitle typo__color--n500'>Pages</div>\n\t\t\t\t\t\t\t\t\t\t\t<PrintIcon width={24} height={24} stroke=\"currentColor\"/>\n\t\t\t\t\t\t\t\t\t\t\t<div className='typo__head--5 typo__color--n600'>{NFT.print||\"00\"}</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__interacts__item\">\n\t\t\t\t\t\t\t\t\t\t\t<div className='typo__subtitle typo__color--n500'>Sold</div>\n\t\t\t\t\t\t\t\t\t\t\t<CartIcon width={24} height={24} stroke=\"currentColor\"/>\n\t\t\t\t\t\t\t\t\t\t\t<div className='typo__head--5 typo__color--n600'>{NFT.copies||\"00\"}</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs\">\n\t\t\t\t\t\t\t\t\t\t<div ref={TabContainerRef} className=\"book__data__container__desc__tabs__container\">\n\t\t\t\t\t\t\t\t\t\t\t{renderTabs()}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data\">\n\t\t\t\t\t\t\t\t\t\t\t{renderTabData()}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<PurchaseModal data={NFT} onNewBookPurchase={()=>purchaseNewCopyHandler()} onOldBookPurchase={offer=>purchaseOldCopyHandler(offer)}/>\n\t\t\t\t\t<ListModal book={NFT} userCopy={UserCopy} onListHandler={listPrice=>onListHandler(listPrice)} />\n\t\t\t\t\t<ReviewModal ReviewForm={ReviewForm} setReviewForm={setReviewForm} reviewHandler={reviewHandler}/>\n\t\t\t\t\t<QuoteModal QuotesForm={QuotesForm} setQuotesForm={setQuotesForm} quoteHandler={quoteHandler}/>\n\t\t\t\t\t<ShareListModal bookID={bookID} />\n\t\t\t\t</>\n\t\t\t\t:null\n\t\t\t}\n\t\t</Page>\n\t\t</>\n\t)\n}\n\nexport default BookPage\n"],"names":["label","price","className","isUsable","src","style","width","height","objectFit","alt","parseFloat","onOldBookPurchase","onNewBookPurchase","data","dispatch","useDispatch","ModalState","useSelector","state","UserState","BWalletState","useState","Show","setShow","Loading","WalletData","setWalletData","getBalance","useCallback","balanceParams","chainId","ChainId","eoaAddress","smartAccount","address","tokenAddresses","getAlltokenBalances","balances","usdc","filter","token","contract_address","balance","ethers","useEffect","window","document","documentElement","overflowY","showSpinner","hideSpinner","show","type","SHOW_PURCHASE_MODAL","GaTracker","Backdrop","classes","push","join","getClasses","onClick","title","Price","toFixed","Button","props","TABS","id","icon","params","useParams","navigate","useNavigate","isLoggedIn","useIsLoggedIn","useWeb3AuthContext","connect","provider","WalletAddress","setWalletAddress","setLoading","ActiveTab","setActiveTab","NFT","setNFT","Owner","setOwner","Listed","setListed","UserCopy","setUserCopy","Published","setPublished","bookID","setBookID","Likes","setLikes","Liked","setLiked","Rating","setRating","Review","setReview","Reviews","setReviews","TotalReveiws","setTotalReveiws","body","rating","ReviewForm","setReviewForm","Quote","setQuote","Quotes","setQuotes","quote","QuotesForm","setQuotesForm","totalReaders","setTotalReaders","liveReaderCount","setLiveReaderCount","totalReadTime","setTotalReadTime","TabContainerRef","useRef","listed","getReviews","axios","url","BASE_URL","method","bookAddress","book_address","then","res","status","reviews","total","setSnackbar","catch","err","finally","getUserReview","ownerAddress","isNotEmpty","getQuotes","getUserQuote","likes","liked","total_readers","reader_count","total_read_time","book","new_owner","publisher_address","activeTabElement","getElementById","current","setProperty","offsetLeft","headers","user","uid","tokens","acsTkn","tkn","walletAddress","loginHandler","walletStatus","Wallet","readHandler","base","cid","fileName","Helmet","name","content","Page","BackgroundBook","loading","cover_display_url","cover_public_url","cover","author","Stars","size","tokenId","token_id","orderId","order_id","Contracts","signer","hideModal","message","reason","includes","showModal","SHOW_LIST_MODAL","moment","secondary_sales_from","isSame","isBefore","isAfter","format","preview","open","slice","contract","length","JSON","parse","genres","map","g","age_group","language","Math","ceil","stroke","fill","old","likedState","print","copies","ref","tabsDOM","forEach","tab","renderTabs","synopsis","SHOW_REVIEW_MODAL","reviewsDOM","isFilled","review","reviewed_at","renderReviews","SHOW_QUOTE_MODAL","quotes","quotesDOM","i","created_at","renderQuotes","renderTabData","Purchase","purchase","approveErc721Interface","approveData","encodeFunctionData","toString","approveTx","to","safeMintErc721Interface","safeMintData","safeMintTx","on","response","logs","receipt","log","topics","topic","keccak256","toUtf8Bytes","parseInt","purchasePrice","console","error","transactions","prepareRefundTransactionBatch","feeQuotes","createRefundTransactionBatch","feeQuote","transaction","sendTransaction","tx","gasLimit","hex","purchaseNewCopyHandler","offer","newOwnerAddress","previousOwnerAddress","previous_owner","daScore","da_score","purchaseOldCopyHandler","List","userCopy","onListHandler","listPrice","events","event","args","_hex","bookPrice","bookOrderId","bookTokenId","SHOW_SHARE_MODAL","ReviewModal","reviewHandler","QuoteModal","quoteHandler","ShareList"],"sourceRoot":""}