{"version":3,"file":"static/js/590.65932f53.chunk.js","mappings":"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","sources":["assets/icons/image.svg","components/ui/ProgressBar/ProgressBar.jsx","config/ages.js","config/genres.js","config/languages.js","hook/useCryptoTransacts.js","pages/Publish.jsx"],"sourcesContent":["var _line, _rect, _path, _path2;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgImage(_ref, svgRef) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 48,\n    height: 48,\n    viewBox: \"0 0 48 48\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _line || (_line = /*#__PURE__*/React.createElement(\"line\", {\n    x2: 0.02,\n    transform: \"translate(30 16)\",\n    fill: \"none\",\n    stroke: \"currentcolor\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: 3.6\n  })), _rect || (_rect = /*#__PURE__*/React.createElement(\"rect\", {\n    width: 32,\n    height: 32,\n    rx: 3,\n    transform: \"translate(8 8)\",\n    fill: \"none\",\n    stroke: \"currentcolor\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: 3.6\n  })), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M4,19.67l8-8a4.029,4.029,0,0,1,6,0l10,10\",\n    transform: \"translate(4 10.33)\",\n    fill: \"none\",\n    stroke: \"currentcolor\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: 3.6\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M14,15.67l2-2a4.029,4.029,0,0,1,6,0l4,4\",\n    transform: \"translate(14 12.33)\",\n    fill: \"none\",\n    stroke: \"currentcolor\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: 3.6\n  })));\n}\n\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgImage);\nexport default __webpack_public_path__ + \"static/media/image.d725a59a8ae79cbfed52aefc8a064781.svg\";\nexport { ForwardRef as ReactComponent };","import { useEffect, useRef } from \"react\"\n\nconst ProgressBar = ({progress}) => {\n    const valueRef = useRef()\n\n    useEffect(()=>{\n        valueRef?.current?.style.setProperty(\"--progress\",progress)\n    },[progress])\n\n    return ( \n        <div className=\"progressbar\">\n            <div ref={valueRef} className=\"progressbar__value\"></div>\n        </div> \n    )\n}\n\nexport default ProgressBar","export const AGE_GROUPS = [\n\t'Children (0-14 years)',\n\t'Youth (15-24 years)',\n\t'Adults (25-64 years)',\n\t'Seniors 65+'\n]","export const GENRES = [\n    \"Adventure\",\n    \"Art\",\n    \"Autobiography\",\n    \"Biography\",\n    \"Business\",\n    \"Children's\",\n    \"Children's History\",\n    \"Classics\",\n    \"Comics\",\n    \"Contemporary Fiction\",\n    \"Cookbooks\",\n    \"Crime Fiction\",\n    \"Drama\",\n    \"Dystopian\",\n    \"Essays\",\n    \"Family\",\n    \"Fantasy\",\n    \"Fiction\",\n    \"Food & Drink\",\n    \"Graphic Novels\",\n    \"Guide / How-To\",\n    \"Health\",\n    \"Historical Fiction\",\n    \"History\",\n    \"Horror\",\n    \"Humanities & Social Sciences\",\n    \"Humor\",\n    \"LGBTQ+\",\n    \"Literary Fiction\",\n    \"Magical Realism\",\n    \"Management\",\n    \"Memoir\",\n    \"Music\",\n    \"Mystery\",\n    \"New Adult\",\n    \"Parenting & Families\",\n    \"Personal Development\",\n    \"Philosophy\",\n    \"Photography\",\n    \"Poetry\",\n    \"Politics\",\n    \"Psychological Thrillers\",\n    \"Psychology\",\n    \"Relationships\",\n    \"Religion & Spirituality\",\n    \"Romance\",\n    \"Science\",\n    \"Science & Technology\",\n    \"Science Fiction\",\n    \"Self Help\",\n    \"Short Story\",\n    \"Society & Culture\",\n    \"Sports\",\n    \"Thriller\",\n    \"Travel\",\n    \"Women's Fiction\",\n    \"Young Adult\",\n];\n","export const LANGUAGES = [\n\t\"EN - English\",\n\t\"ZH - Chinese\",\n\t\"DE - German\",\n\t\"ES - Spanish\",\n\t\"JA - Japanese\",\n\t\"RU - Russian\",\n\t\"FR - French\",\n\t\"KO - Korean\",\n\t\"IT - Italian\",\n\t\"NL - Dutch\",\n\t\"PT - Portugese\",\n\t\"HI - Hindi\",\n\t\"PL - Polish\",\n\t\"DA - Danish\",\n\t\"BN - Bangla\"\n]","import { useDispatch } from 'react-redux'\nimport { useEffect, useState } from 'react'\n\nimport { keccak256 } from '@ethersproject/keccak256'\nimport { toUtf8Bytes } from '@ethersproject/strings'\n\nimport { useAccount } from 'wagmi'\n\nimport { hideSpinner, showSpinner } from '../store/actions/spinner'\n\nimport { GAS_LIMIT, USDC_ADDRESS } from '../config/constants'\nimport { useSelector } from 'react-redux'\nimport { isFilled, isUsable } from '../helpers/functions'\nimport useWallet from './useWallet'\nimport { ethers } from 'ethers'\nimport axios from 'axios'\nimport { setSnackbar } from '../store/actions/snackbar'\nimport { BASE_URL } from '../config/env'\nimport Contracts from '../connections/contracts'\nimport { hideModal } from '../store/actions/modal'\nimport { MARKET_CONTRACT_ADDRESS } from '../config/contracts'\n\nconst useCryptoTransacts = () => {\n\tconst UserState = useSelector(state => state.UserState)\n\tconst BWalletState = useSelector(state => state.BWalletState)\n\n\tconst wallet = useWallet()\n\tconst dispatch = useDispatch()\n\tconst w3mAccount = useAccount()\n\n\tconst [Loading, setLoading] = useState(false)\n\n\tconst headers = { address: wallet.getAddress(), 'user-id': UserState.user.uid, authorization: `Bearer ${UserState.tokens.acsTkn.tkn}` }\n\n\tlet orderId = null\n\n\tconst BiconomyTransactions = {\n\t\tpurchase: async (bookAddress, bookPrice, onPurchaseHandler) => {\n\t\t\ttry {\n\t\t\t\tsetLoading(true)\n\n\t\t\t\tconst order = await axios.post(`${BASE_URL}/api/book/crypto/order/wc`, { amount: bookPrice }, { headers })\n\t\t\t\tif (order.status === 200) orderId = order.data.id\n\n\t\t\t\tconst approveErc721Interface = new ethers.utils.Interface(['function approve(address spender, uint256 amount)'])\n\t\t\t\tconst address = wallet.getAddress()\n\t\t\t\t// const approveData = approveErc721Interface.encodeFunctionData( 'approve', [bookAddress, ethers.utils.parseUnits(bookPrice.toString(), 6)] )\n\t\t\t\t// const approveData = approveErc721Interface.encodeFunctionData( 'approve', [bookAddress, ethers.utils.parseEther(bookPrice.toString())] )\n\t\t\t\tconst approveData = approveErc721Interface.encodeFunctionData('approve', [bookAddress, ethers.utils.parseEther(bookPrice.toString())])\n\t\t\t\tconst approveTx = { to: USDC_ADDRESS, data: approveData }\n\t\t\t\t// const safeMintErc721Interface = new ethers.utils.Interface(['function safeMint(address to)'])\n\t\t\t\tconst safeMintErc721Interface = new ethers.utils.Interface(['function privateMint(address to, uint256 _mintPrice, uint256 _authorEarningsPaidout)'])\n\t\t\t\t// const safeMintData = safeMintErc721Interface.encodeFunctionData( 'safeMint', [address] )\n\t\t\t\tconst safeMintData = safeMintErc721Interface.encodeFunctionData('privateMint', [address, ethers.utils.parseEther(bookPrice.toString()), ethers.utils.parseEther(bookPrice.toString())])\n\t\t\t\tconst safeMintTx = { to: bookAddress, data: safeMintData }\n\t\t\t\tBWalletState.smartAccount.on('txMined', async response => {\n\t\t\t\t\tconst txHash = response.receipt.transactionHash\n\t\t\t\t\tconst logs = response.receipt.logs.filter(\n\t\t\t\t\t\tlog =>\n\t\t\t\t\t\t\tlog.address === bookAddress &&\n\t\t\t\t\t\t\tlog.topics.length === 4 &&\n\t\t\t\t\t\t\tisFilled(log.topics.filter(topic => topic === keccak256(toUtf8Bytes('Transfer(address,address,uint256)')) && isFilled(log.topics[log.topics.length - 1])))\n\t\t\t\t\t)\n\t\t\t\t\tif (isFilled(logs)) {\n\t\t\t\t\t\taxios.post(`${BASE_URL}/api/book/crypto/mine`, { transactionId: orderId, wallet: wallet.getAddress(), hash: txHash }, { headers })\n\n\t\t\t\t\t\tconst tokenId = parseInt(logs[0].topics[logs[0].topics.length - 1])\n\t\t\t\t\t\taxios({\n\t\t\t\t\t\t\turl: `${BASE_URL}/api/book/copies`,\n\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\tdata: { bookAddress: bookAddress, copies: tokenId },\n\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then(res => {})\n\t\t\t\t\t\t\t.catch(err => {})\n\t\t\t\t\t\tconst data = { ownerAddress: address, bookAddress: bookAddress, tokenId, purchasePrice: bookPrice }\n\t\t\t\t\t\tconst purchase = await axios.post(`${BASE_URL}/api/book/purchase`, data, { headers })\n\t\t\t\t\t\tif (purchase.status === 200) onPurchaseHandler()\n\t\t\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t\t\t\tsetLoading(false)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tBWalletState.smartAccount.on('error', response => {\n\t\t\t\t\taxios.post(`${BASE_URL}/api/book/crypto/error/bc`, { transactionId: orderId, error: response }, { headers })\n\t\t\t\t\tsetLoading(false)\n\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t})\n\t\t\t\t// const transactions = [approveTx]\n\t\t\t\tconst transactions = [safeMintTx]\n\t\t\t\t// const transactions = [approveTx, safeMintTx]\n\t\t\t\tconst feeQuotes = await BWalletState.smartAccount.prepareRefundTransactionBatch({ transactions })\n\t\t\t\tconst transaction = await BWalletState.smartAccount.createRefundTransactionBatch({ transactions, feeQuote: feeQuotes[1] })\n\t\t\t\tawait BWalletState.smartAccount.sendTransaction({\n\t\t\t\t\ttx: transaction,\n\t\t\t\t\tgasLimit: { hex: GAS_LIMIT, type: 'hex' },\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\taxios.post(`${BASE_URL}/api/book/crypto/error/bc`, { transactionId: orderId, error }, { headers })\n\t\t\t\tsetLoading(false)\n\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t}\n\t\t},\n\t\tpublish: async (\n\t\t\tcoverUrl,\n\t\t\tprice,\n\t\t\tsecondaryFromInDays,\n\t\t\tlanguageId,\n\t\t\tgenreIDs,\n\t\t\tpreview,\n\t\t\tname,\n\t\t\tauthor,\n\t\t\tcover,\n\t\t\tbookUrl,\n\t\t\tgenres,\n\t\t\tageGroup,\n\t\t\tpages,\n\t\t\tpublication,\n\t\t\tsynopsis,\n\t\t\tlanguage,\n\t\t\tpublished,\n\t\t\tsecondaryFrom,\n\t\t\tonPublishHandler\n\t\t) => {\n\t\t\ttry {\n\t\t\t\tconst erc721Interface = new ethers.utils.Interface([\n\t\t\t\t\t'function createNewBook(address _author, string memory _coverURI, uint256 _initialPrice, uint256 _daysForSecondarySales, uint256 _lang, uint256[] memory _genre )',\n\t\t\t\t])\n\t\t\t\tconst address = BWalletState.smartAccount.address\n\t\t\t\tconst data = erc721Interface.encodeFunctionData(\n\t\t\t\t\t// 'createNewBook', [address, coverUrl, ethers.utils.parseUnits(price, 6), secondaryFromInDays, languageId, genreIDs]\n\t\t\t\t\t'createNewBook',\n\t\t\t\t\t[address, coverUrl, ethers.utils.parseEther(price), secondaryFromInDays, languageId, genreIDs]\n\t\t\t\t)\n\t\t\t\tconst tx = {\n\t\t\t\t\tto: MARKET_CONTRACT_ADDRESS,\n\t\t\t\t\tdata,\n\t\t\t\t}\n\t\t\t\tBWalletState.smartAccount.on('txMined', response => {\n\t\t\t\t\tresponse.receipt.logs.forEach(log => {\n\t\t\t\t\t\tlog.topics.forEach(topic => {\n\t\t\t\t\t\t\tif (topic === keccak256(toUtf8Bytes('OwnershipTransferred(address,address)'))) {\n\t\t\t\t\t\t\t\tconst bookAddress = log.address\n\t\t\t\t\t\t\t\tconst txHash = response.receipt.transactionHash\n\t\t\t\t\t\t\t\tconst status = response.receipt.status\n\t\t\t\t\t\t\t\tif (isUsable(bookAddress) && isUsable(status) && status === 1 && isUsable(txHash)) {\n\t\t\t\t\t\t\t\t\tlet formData = new FormData()\n\t\t\t\t\t\t\t\t\tformData.append('epub', preview)\n\t\t\t\t\t\t\t\t\tformData.append('name', name)\n\t\t\t\t\t\t\t\t\tformData.append('author', author)\n\t\t\t\t\t\t\t\t\tformData.append('cover', coverUrl)\n\t\t\t\t\t\t\t\t\tformData.append('coverFile', cover)\n\t\t\t\t\t\t\t\t\tformData.append('book', bookUrl)\n\t\t\t\t\t\t\t\t\tformData.append('genres', genres)\n\t\t\t\t\t\t\t\t\tformData.append('ageGroup', ageGroup)\n\t\t\t\t\t\t\t\t\tformData.append('price', price)\n\t\t\t\t\t\t\t\t\tformData.append('pages', pages)\n\t\t\t\t\t\t\t\t\tformData.append('publication', publication)\n\t\t\t\t\t\t\t\t\tformData.append('synopsis', synopsis)\n\t\t\t\t\t\t\t\t\tformData.append('language', language)\n\t\t\t\t\t\t\t\t\tformData.append('published', published)\n\t\t\t\t\t\t\t\t\tformData.append('secondarySalesFrom', secondaryFrom)\n\t\t\t\t\t\t\t\t\tformData.append('publisherAddress', wallet.getAddress())\n\t\t\t\t\t\t\t\t\tformData.append('bookAddress', bookAddress)\n\t\t\t\t\t\t\t\t\tformData.append('txHash', txHash)\n\t\t\t\t\t\t\t\t\taxios({\n\t\t\t\t\t\t\t\t\t\turl: BASE_URL + '/api/book/publish',\n\t\t\t\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\t\t\t\tdata: formData,\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t.then(res4 => {\n\t\t\t\t\t\t\t\t\t\t\tif (res4.status === 200) {\n\t\t\t\t\t\t\t\t\t\t\t\tonPublishHandler()\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\t\t\t\t\t\tif (isUsable(err.response)) {\n\t\t\t\t\t\t\t\t\t\t\t\tif (err.response.status === 413) dispatch(setSnackbar('LIMIT_FILE_SIZE'))\n\t\t\t\t\t\t\t\t\t\t\t\telse if (err.response.status === 415) dispatch(setSnackbar('INVALID_FILE_TYPE'))\n\t\t\t\t\t\t\t\t\t\t\t} else dispatch(setSnackbar('NOT200'))\n\t\t\t\t\t\t\t\t\t\t\tsetLoading(false)\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsetLoading(false)\n\t\t\t\t\t\t\t\t\tif (!isUsable(txHash)) dispatch(setSnackbar({ show: true, message: 'The transaction to mint eBook failed.', type: 3 }))\n\t\t\t\t\t\t\t\t\telse dispatch(setSnackbar({ show: true, message: `The transaction to mint eBook failed.\\ntxhash: ${txHash}`, type: 3 }))\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\tBWalletState.smartAccount.on('error', response => {\n\t\t\t\t\tsetLoading(false)\n\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t})\n\t\t\t\tconst feeQuotes = await BWalletState.smartAccount.prepareRefundTransaction({ transaction: tx })\n\t\t\t\tconst transaction = await BWalletState.smartAccount.createRefundTransaction({\n\t\t\t\t\ttransaction: tx,\n\t\t\t\t\tfeeQuote: feeQuotes[1],\n\t\t\t\t})\n\t\t\t\tconst sendtransaction = await BWalletState.smartAccount.sendTransaction({\n\t\t\t\t\ttx: transaction,\n\t\t\t\t\tgasLimit: {\n\t\t\t\t\t\thex: GAS_LIMIT,\n\t\t\t\t\t\ttype: 'hex',\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tsetLoading(false)\n\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t}\n\t\t},\n\t}\n\n\tconst WalletConnectTransactions = {\n\t\tpurchase: async (bookAddress, bookPrice, onPurchaseHandler) => {\n\t\t\tconst order = await axios.post(`${BASE_URL}/api/book/crypto/order/wc`, { amount: bookPrice }, { headers })\n\t\t\tif (order.status === 200) orderId = order.data.id\n\n\t\t\tsetLoading(true)\n\t\t\tContracts.purchaseNft(wallet.getAddress(), bookAddress, bookPrice.toString(), wallet.getSigner())\n\t\t\t\t.then(res => {\n\t\t\t\t\tdispatch(setSnackbar({ show: true, message: 'Book purchased.', type: 1 }))\n\t\t\t\t\tdispatch(hideModal())\n\t\t\t\t\tconst tokenId = Number(res.events.filter(event => event.eventSignature === 'Transfer(address,address,uint256)')[0].args[2]._hex)\n\n\t\t\t\t\taxios.post(`${BASE_URL}/api/book/crypto/mine`, { transactionId: orderId, wallet: wallet.getAddress(), hash: res.transactionHash }, { headers })\n\n\t\t\t\t\taxios({\n\t\t\t\t\t\turl: BASE_URL + '/api/book/purchase',\n\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\tdata: { ownerAddress: wallet.getAddress(), bookAddress: bookAddress, tokenId, purchasePrice: bookPrice },\n\t\t\t\t\t})\n\t\t\t\t\t\t.then(res => {\n\t\t\t\t\t\t\tif (res.status === 200) onPurchaseHandler()\n\t\t\t\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.finally(() => setLoading(false))\n\t\t\t\t\taxios({\n\t\t\t\t\t\turl: BASE_URL + '/api/book/copies',\n\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\tdata: { bookAddress: bookAddress, copies: tokenId },\n\t\t\t\t\t})\n\t\t\t\t\t\t.then(res => {})\n\t\t\t\t\t\t.catch(err => {})\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\taxios.post(`${BASE_URL}/api/book/crypto/error/bc`, { transactionId: orderId, error: err }, { headers })\n\t\t\t\t\tsetLoading(false)\n\t\t\t\t\tif (err.message) {\n\t\t\t\t\t\tif (err?.message?.indexOf('execution reverted: ERC20: transfer amount exceeds balance') > -1)\n\t\t\t\t\t\t\tdispatch(setSnackbar({ show: true, message: 'You do not have enough USDC to purchase this book. Please visit the faucet to get some.', type: 3 }))\n\t\t\t\t\t\telse if (err?.message?.indexOf('execution reverted: NalndaBook: Book unapproved from marketplace!') > -1)\n\t\t\t\t\t\t\tdispatch(setSnackbar({ show: true, message: 'The book has not been approved for sales yet. Please try again later.', type: 3 }))\n\t\t\t\t\t\telse if (err.code === 4001) dispatch(setSnackbar({ show: true, message: 'Transaction denied by user.', type: 3 }))\n\t\t\t\t\t} else dispatch(setSnackbar('ERROR'))\n\t\t\t\t})\n\t\t},\n\t\tpublish: (\n\t\t\tcoverUrl,\n\t\t\tprice,\n\t\t\tsecondaryFromInDays,\n\t\t\tlanguageId,\n\t\t\tgenreIDs,\n\t\t\tpreview,\n\t\t\tname,\n\t\t\tauthor,\n\t\t\tcover,\n\t\t\tbookUrl,\n\t\t\tgenres,\n\t\t\tageGroup,\n\t\t\tpages,\n\t\t\tpublication,\n\t\t\tsynopsis,\n\t\t\tlanguage,\n\t\t\tpublished,\n\t\t\tsecondaryFrom,\n\t\t\tonPublishHandler\n\t\t) => {\n\t\t\ttry {\n\t\t\t\tContracts.listNftForSales(wallet.getAddress(), coverUrl, price, secondaryFromInDays, languageId, genreIDs, wallet.getSigner())\n\t\t\t\t\t.then(tx => {\n\t\t\t\t\t\tconst bookAddress = tx.events.filter(event => event['event'] === 'OwnershipTransferred')[0].address\n\t\t\t\t\t\tconst status = tx.status\n\t\t\t\t\t\tconst txHash = tx.transactionHash\n\t\t\t\t\t\tif (isUsable(bookAddress) && isUsable(status) && status === 1 && isUsable(txHash)) {\n\t\t\t\t\t\t\tlet formData = new FormData()\n\t\t\t\t\t\t\tformData.append('epub', preview)\n\t\t\t\t\t\t\tformData.append('name', name)\n\t\t\t\t\t\t\tformData.append('author', author)\n\t\t\t\t\t\t\tformData.append('cover', coverUrl)\n\t\t\t\t\t\t\tformData.append('coverFile', cover)\n\t\t\t\t\t\t\tformData.append('book', bookUrl)\n\t\t\t\t\t\t\tformData.append('genres', genres)\n\t\t\t\t\t\t\tformData.append('ageGroup', ageGroup)\n\t\t\t\t\t\t\tformData.append('price', price)\n\t\t\t\t\t\t\tformData.append('pages', pages)\n\t\t\t\t\t\t\tformData.append('publication', publication)\n\t\t\t\t\t\t\tformData.append('synopsis', synopsis)\n\t\t\t\t\t\t\tformData.append('language', language)\n\t\t\t\t\t\t\tformData.append('published', published)\n\t\t\t\t\t\t\tformData.append('secondarySalesFrom', secondaryFrom)\n\t\t\t\t\t\t\tformData.append('publisherAddress', wallet.getAddress())\n\t\t\t\t\t\t\tformData.append('bookAddress', bookAddress)\n\t\t\t\t\t\t\tformData.append('txHash', txHash)\n\t\t\t\t\t\t\taxios({\n\t\t\t\t\t\t\t\turl: BASE_URL + '/api/book/publish',\n\t\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\t\tdata: formData,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.then(res4 => {\n\t\t\t\t\t\t\t\t\tif (res4.status === 200) {\n\t\t\t\t\t\t\t\t\t\tonPublishHandler()\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\t\t\t\tif (isUsable(err.response)) {\n\t\t\t\t\t\t\t\t\t\tif (err.response.status === 413) dispatch(setSnackbar('LIMIT_FILE_SIZE'))\n\t\t\t\t\t\t\t\t\t\telse if (err.response.status === 415) dispatch(setSnackbar('INVALID_FILE_TYPE'))\n\t\t\t\t\t\t\t\t\t} else dispatch(setSnackbar('NOT200'))\n\t\t\t\t\t\t\t\t\tsetLoading(false)\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetLoading(false)\n\t\t\t\t\t\t\tif (!isUsable(txHash)) dispatch(setSnackbar({ show: true, message: 'The transaction to mint eBook failed.', type: 3 }))\n\t\t\t\t\t\t\telse dispatch(setSnackbar({ show: true, message: `The transaction to mint eBook failed.\\ntxhash: ${txHash}`, type: 3 }))\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\tdispatch(setSnackbar('NOT200'))\n\t\t\t\t\t\tsetLoading(false)\n\t\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tsetLoading(false)\n\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t}\n\t\t},\n\t}\n\n\tuseEffect(() => {\n\t\tif (Loading) dispatch(showSpinner())\n\t\telse dispatch(hideSpinner())\n\t}, [Loading, dispatch])\n\n\treturn {\n\t\tpurchaseBook: (bookAddress, bookPrice, onPurchaseHandler) =>\n\t\t\tw3mAccount.isConnected ? WalletConnectTransactions.purchase(bookAddress, bookPrice, onPurchaseHandler) : BiconomyTransactions.purchase(bookAddress, bookPrice, onPurchaseHandler),\n\t\tpublishBook: (\n\t\t\tcoverUrl,\n\t\t\tprice,\n\t\t\tsecondaryFromInDays,\n\t\t\tlanguageId,\n\t\t\tgenreIDs,\n\t\t\tpreview,\n\t\t\tname,\n\t\t\tauthor,\n\t\t\tcover,\n\t\t\tbookUrl,\n\t\t\tgenres,\n\t\t\tageGroup,\n\t\t\tpages,\n\t\t\tpublication,\n\t\t\tsynopsis,\n\t\t\tlanguage,\n\t\t\tpublished,\n\t\t\tsecondaryFrom,\n\t\t\tonPublishHandler\n\t\t) =>\n\t\t\tw3mAccount.isConnected\n\t\t\t\t? WalletConnectTransactions.publish(\n\t\t\t\t\t\tcoverUrl,\n\t\t\t\t\t\tprice,\n\t\t\t\t\t\tsecondaryFromInDays,\n\t\t\t\t\t\tlanguageId,\n\t\t\t\t\t\tgenreIDs,\n\t\t\t\t\t\tpreview,\n\t\t\t\t\t\tname,\n\t\t\t\t\t\tauthor,\n\t\t\t\t\t\tcover,\n\t\t\t\t\t\tbookUrl,\n\t\t\t\t\t\tgenres,\n\t\t\t\t\t\tageGroup,\n\t\t\t\t\t\tpages,\n\t\t\t\t\t\tpublication,\n\t\t\t\t\t\tsynopsis,\n\t\t\t\t\t\tlanguage,\n\t\t\t\t\t\tpublished,\n\t\t\t\t\t\tsecondaryFrom,\n\t\t\t\t\t\tonPublishHandler\n\t\t\t\t  )\n\t\t\t\t: BiconomyTransactions.publish(\n\t\t\t\t\t\tcoverUrl,\n\t\t\t\t\t\tprice,\n\t\t\t\t\t\tsecondaryFromInDays,\n\t\t\t\t\t\tlanguageId,\n\t\t\t\t\t\tgenreIDs,\n\t\t\t\t\t\tpreview,\n\t\t\t\t\t\tname,\n\t\t\t\t\t\tauthor,\n\t\t\t\t\t\tcover,\n\t\t\t\t\t\tbookUrl,\n\t\t\t\t\t\tgenres,\n\t\t\t\t\t\tageGroup,\n\t\t\t\t\t\tpages,\n\t\t\t\t\t\tpublication,\n\t\t\t\t\t\tsynopsis,\n\t\t\t\t\t\tlanguage,\n\t\t\t\t\t\tpublished,\n\t\t\t\t\t\tsecondaryFrom,\n\t\t\t\t\t\tonPublishHandler\n\t\t\t\t  ),\n\t}\n}\n\nexport default useCryptoTransacts\n","import axios from 'axios'\nimport moment from 'moment'\nimport { useNavigate } from 'react-router'\nimport React, { useEffect, useState } from 'react'\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { Helmet } from 'react-helmet'\n\nimport Page from '../components/hoc/Page/Page'\nimport InputField from '../components/ui/Input/Input'\n\nimport GaTracker from '../trackers/ga-tracker'\n\nimport { deleteData } from '../helpers/storage'\nimport { setSnackbar } from '../store/actions/snackbar'\nimport { isFilled, isUsable } from '../helpers/functions'\nimport { hideSpinner, showSpinner } from '../store/actions/spinner'\n\nimport Button from '../components/ui/Buttons/Button'\nimport ProgressBar from '../components/ui/ProgressBar/ProgressBar'\n\nimport { ReactComponent as ImagePlaceholder } from \"../assets/icons/image.svg\"\n\nimport { GENRES } from '../config/genres'\nimport { BASE_URL } from '../config/env'\nimport { LANGUAGES } from '../config/languages'\nimport { AGE_GROUPS } from '../config/ages'\nimport useCryptoTransacts from '../hook/useCryptoTransacts'\nimport useWallet from '../hook/useWallet'\n\nconst PublishNftPage = props => {\n\n\tconst wallet = useWallet()\n\tconst dispatch = useDispatch()\n\tconst navigate = useNavigate()\n\tconst cryptoTransacts = useCryptoTransacts()\n\n\tconst UserState = useSelector(state => state.UserState)\n\n\tconst [Loading, setLoading] = useState(false)\n\tconst [CoverUrl, setCoverUrl] = useState(null)\n\tconst [FormInput, setFormInput] = useState({ name: '', author: '', cover: null, preview: null, book: null, genres: [], ageGroup: [], price: '', pages: '', publication: 'Independently Published', isbn: '', synopsis: '', language: '', published: moment().format(\"YYYY-MM-DD\"), secondarySalesDate: '', primarySales: '', secondaryFrom: moment().add(90, 'days')})\n\tconst [formProgress, setFormProgress] = useState(0)\n\tconst [loadingFromStorage, setLoadingFromStorage] = useState(true);\n\n\tuseEffect(() => { GaTracker('page_view_publish') }, [])\n\n\tuseEffect(() => { if(isUsable(FormInput.cover)) setCoverUrl(URL.createObjectURL(FormInput.cover)) }, [FormInput])\n\n\tuseEffect(() => {\n\t\tif(Loading) dispatch(showSpinner())\n\t\telse dispatch(hideSpinner())\n\t}, [Loading, dispatch])\n\n\tuseEffect(()=>{\n\t\tconst ignoreFields = [\"publication\",\"isbn\",\"primarySales\",\"secondarySalesDate\"] ;\n\t\tlet filled = 0;\n\t\tlet total = Object.keys(FormInput).length ;\n\t\tObject.keys(FormInput).forEach(key => {\n\t\t\tif(ignoreFields.includes(key)) return total-- ;\n\t\t\tif(!(FormInput[key]===\"\"||FormInput[key]?.length===0||FormInput[key]===null)) filled++ ;\n\t\t})\n\t\tsetFormProgress(filled/total)\n\t},[FormInput])\n\n\tuseEffect(()=>{\n\t\tif(!window.localStorage) return ;\n\t\ttry{\n\t\t\tGaTracker('event_publish_load_data')\n\t\t\tlet FormInputValues = JSON.parse(window.localStorage.getItem(\"publish-book-form-data\"));\n\t\t\tif(!isUsable(FormInputValues)) {\n\t\t\t\tsetLoadingFromStorage(false);\n\t\t\t\treturn ;\n\t\t\t}\n\t\t\tsetFormInput({\n\t\t\t\t...FormInput,\n\t\t\t\tname: FormInputValues.name,\n\t\t\t\tauthor: FormInputValues.author,\n\t\t\t\tgenres: FormInputValues.genres,\n\t\t\t\tageGroup: FormInputValues.ageGroup,\n\t\t\t\tprice: FormInputValues.price,\n\t\t\t\tpages: FormInputValues.pages,\n\t\t\t\tpublication: FormInputValues.publication,\n\t\t\t\tsynopsis: FormInputValues.synopsis,\n\t\t\t\tlanguage: FormInputValues.language,\n\t\t\t});\n\t\t\tsetLoadingFromStorage(false);\n\t\t} catch(err){\n\t\t\tsetLoadingFromStorage(false);\n\t\t}\n\t},[])\n\n\tuseEffect(()=>{\n\t\tGaTracker('event_publish_save_data')\n\t\tif(loadingFromStorage) return ;\n\t\tif(!window.localStorage) return ;\n\t\twindow.localStorage.setItem(\"publish-book-form-data\",JSON.stringify(FormInput));\n\t},[FormInput,loadingFromStorage])\n\n\tasync function listNFTForSale() {\n\t\tconst { name, author, cover, book, genres, ageGroup, price, pages, publication, synopsis, language, published, secondaryFrom } = FormInput\n\t\tif(isUsable(name) && isFilled(author) && isUsable(cover) && isUsable(book) && isUsable(genres) && isUsable(ageGroup) && isUsable(price) && isUsable(pages) && isUsable(synopsis) && isUsable(language) && isUsable(published) && isUsable(secondaryFrom)){\n\t\t\tGaTracker('event_publish_list')\n\t\t\tsetLoading(true)\n\t\t\tlet formData = new FormData()\n\t\t\tformData.append(\"book\",FormInput.book)\n\t\t\tformData.append(\"cover\",FormInput.cover)\n\t\t\tformData.append(\"bookTitle\",FormInput.title)\n\t\t\tformData.append(\"synopsis\", FormInput.synopsis)\n\t\t\taxios({\n\t\t\t\turl : BASE_URL + \"/api/book/submarine\",\n\t\t\t\tmethod : \"POST\",\n\t\t\t\theaders: {\n\t\t\t\t\t'user-id': UserState.user.uid,\n\t\t\t\t\t'address': UserState.user.wallet,\n\t\t\t\t\t'authorization': `Bearer ${UserState.tokens.acsTkn.tkn}`\n\t\t\t\t},\n\t\t\t\tdata : formData\n\t\t\t}).then(async res => {\n\t\t\t\tconst bookUrl = res.data.book.url\n\t\t\t\tconst coverUrl = res.data.cover.url\n\t\t\t\tlet genreIDs = []\n\t\t\t\tgenres.forEach(genre => genreIDs.push(GENRES.indexOf(genre).toString()))\n\t\t\t\tconst languageId = LANGUAGES.indexOf(language).toString()\n\t\t\t\tconst secondaryFromInDays = Math.round(moment.duration(FormInput.secondaryFrom - moment()).asDays())\n\t\t\t\tif(isUsable(languageId) && isUsable(genreIDs) && !isNaN(secondaryFromInDays) && isFilled(name) && isFilled(author) && isUsable(cover) && isUsable(book) && isFilled(pages)){\n\t\t\t\t\tconst onPublishHandler = () => {\n\t\t\t\t\t\tdeleteData('publish-book-form-data')\n\t\t\t\t\t\tsetLoading(false)\n\t\t\t\t\t\tnavigate('/library', { state: { tab: 'published' } })\n\t\t\t\t\t}\n\t\t\t\t\tcryptoTransacts.publishBook(coverUrl, price, secondaryFromInDays, languageId, genreIDs, FormInput.preview, name, author, FormInput.cover, bookUrl, JSON.stringify(genres.sort((a, b) => a > b)), JSON.stringify(ageGroup.sort((a, b) => a > b)), pages, publication, synopsis.replace(/<[^>]+>/g, ''), language, published, secondaryFrom, onPublishHandler)\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tdispatch(setSnackbar({show: true, message: \"Incomplete details\", type: 3}))\n\t\t\t\t\tsetLoading(false)\n\t\t\t\t}\n\t\t\t}).catch(err => {\n\t\t\t\tif(isUsable(err.response)){\n\t\t\t\t\tif(err.response.status === 413) dispatch(setSnackbar('LIMIT_FILE_SIZE'))\n\t\t\t\t\telse if(err.response.status === 415) dispatch(setSnackbar('INVALID_FILE_TYPE'))\n\t\t\t\t}\n\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t\tsetLoading(false)\n\t\t\t})\n\t\t}\n\t\telse dispatch(setSnackbar({show: true, message: \"Incomplete details\", type: 3}))\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<Helmet>\n\t\t\t\t<meta name='Publish' content='' />\n\t\t\t</Helmet>\n\t\t<Page noFooter={true} containerClass={'publish publish__bg'}>\n\t\t\t<div className=\"publish__data\">\n\t\t\t\t<div className=\"publish__data__form utils__padding__bottom--s\">\n\t\t\t\t\t<h3 className='typo__head typo__head--5 utils__margin__top--b utils__margin__bottom--m'>Publish eBook</h3>\n\t\t\t\t\t<InputField type=\"string\" label=\"book name\" value={FormInput.name} onChange={e => setFormInput({ ...FormInput, name: e.target.value })} description=\"Enter name of the book\"/>\n\t\t\t\t\t<InputField type=\"string\" label=\"book author\" value={FormInput.author} onChange={e => setFormInput({ ...FormInput, author: e.target.value })} description=\"Enter name of the author\"/>\n\t\t\t\t\t<h3 className='typo__head typo__head--5 utils__margin__top--b utils__margin__bottom--m'>Upload Files</h3>\n\t\t\t\t\t<InputField type=\"file\" label=\"cover\" accept='image/*' onChange={e => setFormInput({ ...FormInput, cover: e.target.files[0] })} description=\"Upload a picture of book cover. File types supported: JPG, PNG, GIF, SVG, WEBP\"/>\n\t\t\t\t\t<InputField type=\"file\" label=\"preview\" accept='application/epub+zip' onChange={e => setFormInput({ ...FormInput, preview: e.target.files[0] })} description=\"Upload a sample of book for preview. File types supported: EPUB\"/>\n\t\t\t\t\t<InputField type=\"file\" label=\"book\" accept='application/epub+zip' onChange={e => setFormInput({ ...FormInput, book: e.target.files[0] })} description=\"Upload a book. File types supported: EPUB\"/>\n\t\t\t\t\t<h3 className='typo__head typo__head--5 utils__margin__top--b utils__margin__bottom--m'>Meta Data</h3>\n\t\t\t\t\t<InputField type=\"number\" label=\"price in USDC\" value={FormInput.price} onChange={e => setFormInput({ ...FormInput, price: e.target.value })} description=\"Price of book in USDC\"/>\n\t\t\t\t\t<InputField type=\"list\" label=\"genres\" listType={'multiple'} minLimit={1} maxLimit={5} values={GENRES} value={FormInput.genres} onSave={values => setFormInput({ ...FormInput, genres: values })} placeholder=\"e.g., Action, Adventure\" description=\"Select genres for the book. Max 5 genres can be selected\"/>\n\t\t\t\t\t<InputField type=\"list\" label=\"age group\" listType={'multiple'} minLimit={1} maxLimit={AGE_GROUPS.length} values={AGE_GROUPS} value={FormInput.ageGroup} onSave={values => setFormInput({ ...FormInput, ageGroup: values })} placeholder=\"e.g., Youth (15-24 years)\" description=\"Select the most appropriate age group for the book.\"/>\n\t\t\t\t\t<InputField type=\"number\" label=\"number of print pages\" value={FormInput.pages} onChange={e => setFormInput({ ...FormInput, pages: e.target.value })} description=\"Enter number of pages in the book\"/>\n\t\t\t\t\t<InputField type=\"string\" label=\"publication\" value={FormInput.publication} onChange={e => setFormInput({ ...FormInput, publication: e.target.value })} description=\"Enter name of the publisher\" required={false}/>\n\t\t\t\t\t<InputField type=\"text\" label=\"synopsis\" lines={8} value={FormInput.synopsis} onChange={e => setFormInput({ ...FormInput, synopsis: e.target.value })} description=\"Write a brief description about the book\"/>\n\t\t\t\t\t<InputField type=\"list\" label=\"language\" listType={'single'} values={LANGUAGES} value={FormInput.language} onSave={value => setFormInput({ ...FormInput, language: value })} description=\"Select the language of the book\"/>\n\t\t\t\t\t<h3 className='typo__head typo__head--5 utils__margin__top--b utils__margin__bottom--m'>Secondary Sales Conditions</h3>\n\t\t\t\t\t<InputField type=\"date\" label=\"open on\" min={moment().add(90, 'days')} max={moment().add(150, 'days')} onChange={e => setFormInput({ ...FormInput, secondaryFrom: e.target.value })} description=\"From when to start secondary sales\"/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"publish__data__preview\">\n\t\t\t\t\t<div className=\"publish__data__preview__container\">\n\t\t\t\t\t\t<h3 className='typo__head typo__head--5 utils__margin__top--n'>Preview</h3>\n\t\t\t\t\t\t<div className='publish__data__preview__book' onClick={()=>{}}>\n\t\t\t\t\t\t\t<div className=\"publish__data__preview__book__cover\">\n\t\t\t\t\t\t\t\t{\tisUsable(CoverUrl)\n\t\t\t\t\t\t\t\t\t?<img className='publish__data__preview__book__cover__img' src={CoverUrl} alt={FormInput.name+\" cover\"} />\n\t\t\t\t\t\t\t\t\t: <div className='publish__data__preview__book__cover__placeholder'>\n\t\t\t\t\t\t\t\t\t\t<ImagePlaceholder stroke='currentColor'/>\n\t\t\t\t\t\t\t\t\t\t<span className='utils__margin__top--m'>Book Cover</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"publish__data__preview__book__data\">\n\t\t\t\t\t\t\t\t<div className=\"publish__data__preview__book__data__title  typo__head--5\">{FormInput.name}</div>\n\t\t\t\t\t\t\t\t<div className=\"publish__data__preview__book__data__author typo__subtitle typo__color--n500\">{FormInput.author}</div>\n\t\t\t\t\t\t\t\t{FormInput.price && <div className=\"publish__data__preview__book__data__price typo__color--success\">{parseFloat(FormInput.price)===0?\"FREE\":<><img src='https://imagedelivery.net/yOWneHxM1h9mu46Te3Yjwg/59c27d12-e4eb-4f74-7a6e-b33ba6537600/icon48' style={{width: 20, height: 20, objectFit: 'contain'}} alt=\"USDC\"/>&nbsp;{FormInput.price}</>}</div>}\n\t\t\t\t\t\t\t\t{FormInput.language && <div className=\"publish__data__preview__book__data__field\">\n\t\t\t\t\t\t\t\t\t<div className=\"publish__data__preview__book__data__field__label typo__body typo__color--n700\">Language</div>\n\t\t\t\t\t\t\t\t\t<div className=\"publish__data__preview__book__data__field__value typo__body typo__color--n500\">{FormInput.language}</div>\n\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t{isFilled(FormInput.genres) && <div className=\"publish__data__preview__book__data__field\">\n\t\t\t\t\t\t\t\t\t<div className=\"publish__data__preview__book__data__field__label typo__body typo__color--n700\">Genres</div>\n\t\t\t\t\t\t\t\t\t<div className=\"publish__data__preview__book__data__field__chips\">\n\t\t\t\t\t\t\t\t\t\t{FormInput.genres.map(item => <div key={item} className=\"publish__data__preview__book__data__field__chips__item typo__body\">{item}</div>)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t{FormInput.publication && <div className=\"publish__data__preview__book__data__field\">\n\t\t\t\t\t\t\t\t\t<div className=\"publish__data__preview__book__data__field__label typo__body typo__color--n700\">Publication</div>\n\t\t\t\t\t\t\t\t\t<div className=\"publish__data__preview__book__data__field__value typo__body typo__color--n500\">{FormInput.publication}</div>\n\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='publish__data__preview__progress'>\n\t\t\t\t\t\t\t<div className='publish__data__preview__progress__container'>\n\t\t\t\t\t\t\t\t<div className='publish__data__preview__progress__container__value typo__color--n700'>{Math.round(formProgress*100)}%</div>\n\t\t\t\t\t\t\t\t<ProgressBar progress={formProgress}/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Button type=\"primary\" disabled={false} size=\"lg\" onClick={()=>listNFTForSale()}>Publish</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Page>\n\t\t</>\n\t)\n}\n\nexport default PublishNftPage"],"names":["_line","_rect","_path","_path2","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","SvgImage","_ref","svgRef","title","titleId","props","xmlns","width","height","viewBox","ref","id","x2","transform","fill","stroke","strokeLinecap","strokeLinejoin","strokeWidth","rx","d","ForwardRef","progress","valueRef","useRef","useEffect","current","style","setProperty","className","AGE_GROUPS","GENRES","LANGUAGES","UserState","useSelector","state","BWalletState","wallet","useWallet","dispatch","useDispatch","w3mAccount","useAccount","Loading","setLoading","useState","headers","address","getAddress","user","uid","authorization","tokens","acsTkn","tkn","orderId","BiconomyTransactions","async","bookAddress","bookPrice","onPurchaseHandler","order","axios","BASE_URL","amount","status","data","approveErc721Interface","ethers","approveData","encodeFunctionData","toString","safeMintData","USDC_ADDRESS","safeMintTx","to","smartAccount","on","txHash","response","receipt","transactionHash","logs","filter","log","topics","isFilled","topic","keccak256","toUtf8Bytes","transactionId","hash","tokenId","parseInt","url","method","copies","then","res","catch","err","ownerAddress","purchasePrice","setSnackbar","error","transactions","feeQuotes","prepareRefundTransactionBatch","transaction","createRefundTransactionBatch","feeQuote","sendTransaction","tx","gasLimit","hex","GAS_LIMIT","type","coverUrl","price","secondaryFromInDays","languageId","genreIDs","preview","name","author","cover","bookUrl","genres","ageGroup","pages","publication","synopsis","language","published","secondaryFrom","onPublishHandler","erc721Interface","MARKET_CONTRACT_ADDRESS","forEach","isUsable","formData","FormData","append","res4","show","message","prepareRefundTransaction","createRefundTransaction","WalletConnectTransactions","Contracts","getSigner","hideModal","Number","events","event","eventSignature","args","_hex","finally","indexOf","code","showSpinner","hideSpinner","purchaseBook","isConnected","publishBook","navigate","useNavigate","cryptoTransacts","useCryptoTransacts","CoverUrl","setCoverUrl","FormInput","setFormInput","book","isbn","moment","format","secondarySalesDate","primarySales","add","formProgress","setFormProgress","loadingFromStorage","setLoadingFromStorage","GaTracker","URL","createObjectURL","ignoreFields","filled","total","keys","includes","window","localStorage","FormInputValues","JSON","parse","getItem","setItem","stringify","content","noFooter","containerClass","label","value","onChange","e","description","accept","files","listType","minLimit","maxLimit","values","onSave","placeholder","required","lines","min","max","onClick","src","alt","parseFloat","objectFit","map","item","Math","round","disabled","size","genre","push","asDays","isNaN","deleteData","tab","sort","a","b","replace","listNFTForSale"],"sourceRoot":""}