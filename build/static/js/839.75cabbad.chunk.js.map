{"version":3,"file":"static/js/839.75cabbad.chunk.js","mappings":"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","sources":["assets/icons/layout-list.svg","pages/Library.jsx"],"sourcesContent":["var _rect, _rect2;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgLayoutList(_ref, svgRef) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 48,\n    height: 48,\n    viewBox: \"0 0 48 48\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _rect || (_rect = /*#__PURE__*/React.createElement(\"rect\", {\n    width: 32,\n    height: 12,\n    rx: 2,\n    transform: \"translate(8 8)\",\n    fill: \"none\",\n    stroke: \"currentcolor\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: 3.6\n  })), _rect2 || (_rect2 = /*#__PURE__*/React.createElement(\"rect\", {\n    width: 32,\n    height: 12,\n    rx: 2,\n    transform: \"translate(8 28)\",\n    fill: \"none\",\n    stroke: \"currentcolor\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: 3.6\n  })));\n}\n\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgLayoutList);\nexport default __webpack_public_path__ + \"static/media/layout-list.4eb3f78700cdde60fe7254e3bae6217e.svg\";\nexport { ForwardRef as ReactComponent };","import axios from 'axios'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { useLocation, useNavigate } from 'react-router'\nimport React, { useCallback, useEffect, useState } from 'react'\nimport { Helmet } from 'react-helmet'\n\nimport Wallet from '../connections/wallet'\nimport { setWallet } from '../store/actions/wallet'\nimport { setSnackbar } from '../store/actions/snackbar'\nimport { isFilled, isUsable, isUserLoggedIn } from '../helpers/functions'\nimport { hideSpinner, showSpinner } from '../store/actions/spinner'\n\nimport Page from '../components/hoc/Page/Page'\nimport Button from '../components/ui/Buttons/Button'\nimport FilterPanel from '../components/ui/FilterPanel/FilterPanel'\n\nimport { BASE_URL } from '../config/env'\nimport { ACCOUNT_PAGE_FILTERS } from '../config/filters'\n\nimport BookItem from '../components/ui/BookItem/BookItem'\nimport {ReactComponent as FilterIcon} from \"../assets/icons/filter.svg\"\nimport {ReactComponent as GridViewIcon} from \"../assets/icons/layout-grid.svg\"\nimport {ReactComponent as ListViewIcon} from \"../assets/icons/layout-list.svg\"\nimport GaTracker from '../trackers/ga-tracker'\n\nimport { useWeb3AuthContext } from '../contexts/SocialLoginContext'\n\nconst LibraryPage = props => {\n\n\tconst {\n\t\tconnect,\n\t\taddress,\n\t\tprovider,\n\t} = useWeb3AuthContext();\n\n\tconst DEFAULT_FILTERS = [{key: 'price', value: null, type: 'range'}, {key: 'genres', value: [], type: 'multiselect'}, {key: 'age_group', value: [], type: 'multiselect'}, {key: 'orderby', value: null, type: 'select'}, {key: 'decayscore', value: null, type: 'range'}]\n\n\tconst params = useLocation()\n\tconst navigate = useNavigate()\n\tconst dispatch = useDispatch()\n\n\tconst UserState = useSelector(state => state.UserState)\n\tconst BWalletState = useSelector(state => state.BWalletState)\n\n\tconst [Nfts, setNfts] = useState([])\n\tconst [AllNfts, setAllNfts] = useState([])\n\tconst [Filters, setFilters] = useState(DEFAULT_FILTERS)\n\tconst [Loading, setLoading] = useState(false)\n\tconst [ActiveTab, setActiveTab] = useState(0)\n\tconst [WalletAddress, setWalletAddress] = useState(null)\n\tconst [FiltersPanelOpen, setFiltersPanelOpen] = useState(false)\n\tconst [layout, setLayout] = useState(window.innerWidth<600?\"LIST\":\"GRID\")\n\tconst [maxPrice, setMaxPrice] = useState(100);\n\n\tuseEffect(() => { GaTracker('page_view_account') }, [])\n\n\tuseEffect(() => {\n\t\tif(ActiveTab === 0) GaTracker('tab_view_account_owned')\n\t\telse GaTracker('tab_view_account_published')\n\t}, [ActiveTab])\n\t\n\tconst loginHandler = async () => {\n\t\tconnect();\n\t}\n\n\tconst connectWallet = useCallback(\n\t\t() => {\n\t\t\tif(!address){\n\t\t\t\tloginHandler();\n\t\t\t}\n\t\t\tWallet(provider, dispatch);\n\t\t},[dispatch]\n\t)\n\n\tuseEffect(() => {\n\t\tGaTracker('event_library_filter')\n\t\tlet nfts = AllNfts\n\t\tif(isUsable(nfts)){\n\t\t\tFilters.forEach(filter => {\n\t\t\t\tswitch (filter.type) {\n\t\t\t\t\tcase 'range':\n\t\t\t\t\t\tif(isUsable(filter.value))\n\t\t\t\t\t\tnfts = nfts.filter(nft => nft[filter.key] <= filter.value)\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 'multiselect':\n\t\t\t\t\t\tif(isFilled(filter.value)){\n\t\t\t\t\t\t\tlet tempNfts = []\n\t\t\t\t\t\t\tfilter.value.forEach(filterValue => nfts.forEach(nft => { if(nft[filter.key].indexOf(filterValue)>-1 && tempNfts.filter(tempNft => tempNft[\"id\"] === nft.id).length<1) tempNfts.push(nft) }) )\n\t\t\t\t\t\t\tnfts = tempNfts\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 'select':\n\t\t\t\t\t\tif(filter.key === 'orderby'){\n\t\t\t\t\t\t\tswitch (filter.value) {\n\t\t\t\t\t\t\t\tcase 'PRICE_L_H':\n\t\t\t\t\t\t\t\t\tnfts.sort((a,b) => a.price<b.price)\n\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\tcase 'PRICE_H_L':\n\t\t\t\t\t\t\t\t\tnfts.sort((a,b) => a.price>b.price)\n\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\tcase 'RATING_L_H':\n\t\t\t\t\t\t\t\t\tnfts.sort((a,b) => a.rating<b.rating)\n\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\tcase 'RATING_H_L':\n\t\t\t\t\t\t\t\t\tnfts.sort((a,b) => a.rating>b.rating)\n\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t})\n\t\t\tsetNfts(nfts)\n\t\t}\n\t}, [Filters, AllNfts])\n\n\tuseEffect(() => {\n\t\tif(isUsable(params.state)){\n\t\t\tconst tab = params.state.tab\n\t\t\tif(tab === 'published') setActiveTab(1)\n\t\t\telse setActiveTab(0)\n\t\t}\n\t}, [params])\n\n\tuseEffect(() => {\n\t\tsetLoading(true)\n\t\tif(isUsable(BWalletState.smartAccount)) setWalletAddress(BWalletState.smartAccount.address)\n\t\telse connectWallet()\n\t\tsetLoading(false)\n\t}, [BWalletState, connectWallet])\n\n\tuseEffect(() => {\n\t\tif(Loading) dispatch(showSpinner())\n\t\telse dispatch(hideSpinner())\n\t}, [Loading, dispatch])\n\n\tuseEffect(() => {\n\t\tif(isUserLoggedIn(UserState)){\n\t\t\tsetLoading(true)\n\t\t\tif(ActiveTab === 0)\n\t\t\t\taxios({\n\t\t\t\t\turl: BASE_URL+'/api/user/books/owned',\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'user-id': UserState.user.uid,\n\t\t\t\t\t\t'authorization': `Bearer ${UserState.tokens.acsTkn.tkn}`\n\t\t\t\t\t},\n\t\t\t\t\tparams: {userAddress: WalletAddress}\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif(res.status === 200) setAllNfts(res.data)\n\t\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t}).finally(() => setLoading(false))\n\t\t\telse if(ActiveTab === 1)\n\t\t\t\taxios({\n\t\t\t\t\turl: BASE_URL+'/api/user/books/published',\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'user-id': UserState.user.uid,\n\t\t\t\t\t\t'authorization': `Bearer ${UserState.tokens.acsTkn.tkn}`\n\t\t\t\t\t},\n\t\t\t\t\tparams: {userAddress: WalletAddress}\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif(res.status === 200) setAllNfts(res.data)\n\t\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t}).finally(() => setLoading(false))\n\t\t}\n\t}, [ActiveTab, WalletAddress, dispatch, UserState])\n\n\tuseEffect(()=>{\n\t\tif(!isFilled(AllNfts)) return ;\n\t\tlet maxNftPrice = Math.max(...AllNfts.map(nft => nft.price));\n\t\tmaxNftPrice = Math.ceil(maxNftPrice / 10) * 10 ; \n\t\tsetMaxPrice(maxNftPrice||100)\n\t},[AllNfts])\n\n\tconst readHandler = async (NFT) => {\n\t\tsetLoading(true)\n\t\ttry {\n\t\t\taxios({\n\t\t\t\turl: `${BASE_URL}/api/verify`,\n\t\t\t\tmethod: 'GET',\n\t\t\t\tparams: {\n\t\t\t\t\tbookAddress: NFT.book_address,\n\t\t\t\t\townerAddress: WalletAddress\n\t\t\t\t}\n\t\t\t}).then(res => {\n\t\t\t\tif(res.status === 200){\n\t\t\t\t\tconst messageToSign = res.data\n\t\t\t\t\tWallet.signMessage(BWalletState.smartAccount.signer, JSON.stringify(messageToSign)).then(res => {\n\t\t\t\t\t\tif(res.isValid === true){\n\t\t\t\t\t\t\taxios({\n\t\t\t\t\t\t\t\turl : BASE_URL + '/api/verify',\n\t\t\t\t\t\t\t\tmethod : \"POST\",\n\t\t\t\t\t\t\t\tdata : {\n\t\t\t\t\t\t\t\t\taccountAddress: WalletAddress,\n\t\t\t\t\t\t\t\t\tbookAddress: NFT.book_address,\n\t\t\t\t\t\t\t\t\tsignedData: res.signedData,\n\t\t\t\t\t\t\t\t\tcid : NFT.book.slice(NFT.book.lastIndexOf(\"/\")+1),\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}).then(res=>{\n\t\t\t\t\t\t\t\tif(res.status === 200) {\n\t\t\t\t\t\t\t\t\tGaTracker('navigate_book_reader')\n\t\t\t\t\t\t\t\t\tnavigate('/library/reader', {state: {book: {...NFT,submarineURL:res.data.url}, preview: false}}) \n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tdispatch(setSnackbar({show:true,message : \"Error\", type : 4}))\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\t\t}).finally( () => setLoading(false))\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse dispatch(setSnackbar({show: true, message: \"Could not verify the authenticity of the signature.\", type: 3}))\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t})\n\t\t} catch (err) {\n\t\t\tsetLoading(false)\n\t\t}\n\t}\n\n\tconst openHandler = nft => {\n\t\tGaTracker('navigate_account_book')\n\t\tnavigate(`/book/${nft.id}`)\n\t}\n\n\tconst renderNfts = () => {\n\t\tlet nftDOM = []\n\t\tlet nfts = Nfts\n\t\tnfts.forEach(nft => { nftDOM.push(<BookItem state={nft.publisher_address===WalletAddress?'publisher':'owned'} layout={layout} key={nft.id} book={nft} onRead={()=>readHandler(nft)} onOpen={()=>openHandler(nft)}/>) })\n\t\treturn nftDOM\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<Helmet>\n\t\t\t\t<meta name='Library' content='Explore library of  books' />\n\t\t\t</Helmet>\n\t\t\t<Page noFooter={true} showRibbion={false} noPadding={true} fluid={true} containerClass={'explore'}>\n\t\t\t<div className=\"account__data\">\n\t\t\t\t<div className=\"account__data__filter-panel-container\" data-filter-open={FiltersPanelOpen}>\n\t\t\t\t\t<FilterPanel maxPrice={maxPrice} setFiltersPanelOpen={setFiltersPanelOpen} config={ACCOUNT_PAGE_FILTERS} defaults={DEFAULT_FILTERS} filters={Filters} setFilters={setFilters}/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"account__data__books\" data-filter-open={FiltersPanelOpen}> \n\t\t\t\t\t<div className=\"account__data__books__header\">\n\t\t\t\t\t\t<div className='account__data__books__header__filter'>\n\t\t\t\t\t\t\t<Button type=\"icon\" onClick={()=>setFiltersPanelOpen(s=>!s)}><FilterIcon fill={FiltersPanelOpen?\"currentColor\":\"transparent\"} /></Button>\n\t\t\t\t\t\t\t<div className=\"account__data__books__header__filter__tabs\">\n\t\t\t\t\t\t\t\t<div onClick={()=>setActiveTab(0)} className=\"account__data__books__header__filter__tabs__item typo__head--6\" data-state={ActiveTab===0}>Library</div>\n\t\t\t\t\t\t\t\t<div onClick={()=>setActiveTab(1)} className=\"account__data__books__header__filter__tabs__item typo__head--6\" data-state={ActiveTab===1}>Published</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"account__data__books__header__layout\">\n\t\t\t\t\t\t\t<Button className=\"account__data__books__header__layout__button\" onClick={()=>setLayout(\"LIST\")}><ListViewIcon/><span>List</span></Button>\n\t\t\t\t\t\t\t<Button className=\"account__data__books__header__layout__button\" onClick={()=>setLayout(\"GRID\")}><GridViewIcon/><span>GRID</span></Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"account__data__books__wrapper\" data-layout={layout}>\n\t\t\t\t\t\t{isUsable(Nfts) && Nfts.length > 0\n\t\t\t\t\t\t\t? \trenderNfts()\n\t\t\t\t\t\t\t: \t<div className='account__data__books__wrapper__empty'>\n\t\t\t\t\t\t\t\t\t<img src='https://imagedelivery.net/yOWneHxM1h9mu46Te3Yjwg/fb06196e-29ca-4c59-9460-6fdbd43fa700/square240' alt=\"books shelf\" className=\"account__data__books__wrapper__image\" loading=\"lazy\"/>\n\t\t\t\t\t\t\t\t\t<h4 className=\"typo__head typo__head--4\">No eBooks yet</h4>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Page>\n\t\t</>\n\t)\n}\n\nexport default LibraryPage\n"],"names":["_rect","_rect2","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","SvgLayoutList","_ref","svgRef","title","titleId","props","xmlns","width","height","viewBox","ref","id","rx","transform","fill","stroke","strokeLinecap","strokeLinejoin","strokeWidth","ForwardRef","connect","address","provider","useWeb3AuthContext","DEFAULT_FILTERS","value","type","params","useLocation","navigate","useNavigate","dispatch","useDispatch","UserState","useSelector","state","BWalletState","Nfts","setNfts","useState","AllNfts","setAllNfts","Filters","setFilters","Loading","setLoading","ActiveTab","setActiveTab","WalletAddress","setWalletAddress","FiltersPanelOpen","setFiltersPanelOpen","layout","setLayout","window","innerWidth","maxPrice","setMaxPrice","useEffect","GaTracker","connectWallet","useCallback","async","loginHandler","Wallet","nfts","isUsable","forEach","filter","nft","isFilled","tempNfts","filterValue","indexOf","tempNft","push","sort","a","b","price","rating","tab","smartAccount","showSpinner","hideSpinner","isUserLoggedIn","axios","url","BASE_URL","method","headers","user","uid","tokens","acsTkn","tkn","userAddress","then","res","status","data","setSnackbar","catch","err","finally","maxNftPrice","Math","max","map","ceil","name","content","noFooter","showRibbion","noPadding","fluid","containerClass","className","config","ACCOUNT_PAGE_FILTERS","defaults","filters","onClick","s","nftDOM","publisher_address","book","onRead","bookAddress","NFT","book_address","ownerAddress","messageToSign","signer","JSON","stringify","isValid","accountAddress","signedData","cid","slice","lastIndexOf","submarineURL","preview","show","message","readHandler","onOpen","openHandler","renderNfts","src","alt","loading"],"sourceRoot":""}