{"version":3,"file":"static/js/935.aa8da8d1.chunk.js","mappings":"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","sources":["config/contracts.js","connections/contracts.js"],"sourcesContent":["export const NALNDA_TOKEN_CONTRACT_ADDRESS = '0xdA5289fCAAF71d52a80A254da614a192b693e977'\nexport const MARKET_CONTRACT_ADDRESS = '0xCcCABe37d0bDec98628860C69895092340de07B0'\nexport const DISCOUNT_CONTRACT_ADDRESS = '0x31D697De10E73f842821B2191b448A6f940A8feB'\n","import GaTracker from '../trackers/ga-tracker'\n\nimport { NALNDA_TOKEN_CONTRACT_ADDRESS, MARKET_CONTRACT_ADDRESS } from '../config/contracts'\n\nconst { ethers } = require('ethers')\n\nconst marketplace = require('../artifacts/contracts/NalndaMarketplace.sol/NalndaMarketplace.json')\nconst nalndaToken = require('../artifacts/contracts/mocks/NALNDA.sol/Nalnda.json')\nconst book = require('../artifacts/contracts/NalndaBook.sol/NalndaBook.json')\n\nconst getBooksCount = async function getBooksCount() {\n\tGaTracker('event_contracts_get_books_count')\n\tconst provider = new ethers.providers.Web3Provider(window.ethereum)\n\tlet marketplaceContract = new ethers.Contract(MARKET_CONTRACT_ADDRESS, marketplace.abi, provider)\n\tconst books = await marketplaceContract.totalBooksCreated()\n\treturn books.toString()\n}\n\nconst getBooks = async function getBooks(index) {\n\tGaTracker('event_contracts_get_books')\n\tconst provider = new ethers.providers.Web3Provider(window.ethereum)\n\tlet marketplaceContract = new ethers.Contract(MARKET_CONTRACT_ADDRESS, marketplace.abi, provider)\n\tconst books = await marketplaceContract.bookAddresses(index)\n\treturn books\n}\n\nconst listNftForSales = async function listNftForSales(authorAddress, coverUrl, price, daysForSecondarySale, language, genres, signer) {\n\tGaTracker('event_contracts_list_nft')\n\tlet marketplaceContract = new ethers.Contract(MARKET_CONTRACT_ADDRESS, marketplace.abi, signer)\n\tlet transaction = await marketplaceContract.createNewBook(authorAddress, coverUrl, ethers.utils.parseEther(price), daysForSecondarySale, language, genres)\n\tlet tx = await transaction.wait()\n\treturn tx\n}\n\nconst purchaseNft = async function purchaseNft(buyer, bookAddress, amount, signer) {\n\tGaTracker('event_contracts_purchase_nft')\n\tconst nalndaTokenContract = new ethers.Contract(NALNDA_TOKEN_CONTRACT_ADDRESS, nalndaToken.abi, signer)\n\ttry {\n\t\tconst approval = await nalndaTokenContract.approve(bookAddress, ethers.utils.parseEther(amount))\n\t\tawait approval.wait()\n\t\tconst bookContract = new ethers.Contract(bookAddress, book.abi, signer)\n\t\tconst transaction = await bookContract.safeMint(buyer)\n\t\tconst tx = await transaction.wait()\n\t\treturn tx\n\t} catch (err) {\n\t\tconsole.log(err)\n\t}\n}\n\nconst getBookUri = async function getBookUri(bookAddress, signer) {\n\tGaTracker('event_contracts_get_book_uri')\n\tconst bookContract = new ethers.Contract(bookAddress, book.abi, signer)\n\tconst uri = await bookContract.uri()\n\treturn uri\n}\n\nconst listBookToMarketplace = async function listBookToMarketplace(bookAddress, bookTokenId, bookPrice, signer) {\n\tGaTracker('event_contracts_list_book')\n\tconst marketplaceContract = new ethers.Contract(MARKET_CONTRACT_ADDRESS, marketplace.abi, signer)\n\tconst listing = await marketplaceContract.listCover(bookAddress, bookTokenId, ethers.utils.parseEther(bookPrice))\n\treturn await listing.wait()\n}\n\nconst unlistBookFromMarketplace = async function unlistBookFromMarketplace(bookOrderId, signer) {\n\tGaTracker('event_contracts_unlist_book')\n\tconst marketplaceContract = new ethers.Contract(MARKET_CONTRACT_ADDRESS, marketplace.abi, signer)\n\tconst unlisting = await marketplaceContract.unlistCover(bookOrderId)\n\treturn await unlisting.wait()\n}\n\nconst buyListedCover = async function buyListedCover(bookOrderId, bookPrice, signer) {\n\tGaTracker('event_contracts_buy_cover')\n\tconst nalndaTokenContract = new ethers.Contract(NALNDA_TOKEN_CONTRACT_ADDRESS, nalndaToken.abi, signer)\n\tconst approval = await nalndaTokenContract.approve(MARKET_CONTRACT_ADDRESS, ethers.utils.parseEther(bookPrice.toString()))\n\tawait approval.wait()\n\tconst marketplaceContract = new ethers.Contract(MARKET_CONTRACT_ADDRESS, marketplace.abi, signer)\n\tconst transaction = await marketplaceContract.buyCover(bookOrderId)\n\tconst tx = await transaction.wait()\n\treturn tx\n}\n\nconst createNewItoBook = async function createNewBook(authorAddress, idos, coverUrl, price, daysForSecondarySale, language, genres, signer) {\n\tGaTracker('event_contracts_create_ito')\n}\n\nconst Contracts = {\n\tnalndaToken,\n\tmarketplace,\n\tbook,\n\tgetBooksCount,\n\tgetBooks,\n\tlistNftForSales,\n\tpurchaseNft,\n\tgetBookUri,\n\tlistBookToMarketplace,\n\tunlistBookFromMarketplace,\n\tbuyListedCover,\n\tcreateNewItoBook,\n}\n\nexport default Contracts\n"],"names":["NALNDA_TOKEN_CONTRACT_ADDRESS","MARKET_CONTRACT_ADDRESS","ethers","require","marketplace","nalndaToken","book","getBooksCount","GaTracker","provider","providers","Web3Provider","window","ethereum","marketplaceContract","Contract","abi","totalBooksCreated","books","toString","getBooks","index","bookAddresses","listNftForSales","authorAddress","coverUrl","price","daysForSecondarySale","language","genres","signer","createNewBook","utils","parseEther","transaction","wait","tx","purchaseNft","buyer","bookAddress","amount","nalndaTokenContract","approve","approval","bookContract","safeMint","console","log","getBookUri","uri","listBookToMarketplace","bookTokenId","bookPrice","listCover","listing","unlistBookFromMarketplace","bookOrderId","unlistCover","unlisting","buyListedCover","buyCover","createNewItoBook","idos","Contracts"],"sourceRoot":""}