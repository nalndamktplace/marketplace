"use strict";(self.webpackChunkmarketplace=self.webpackChunkmarketplace||[]).push([[739],{64739:function(e,t,r){r.r(t),r.d(t,{default:function(){return X}});var n,a,i,o=r(15861),l=r(1413),s=r(29439),c=r(64687),u=r.n(c),d=r(74569),f=r.n(d),p=r(72791),h=r(16030),m=r(54270),v=r(88952),_=r(75454),y=r(61199),k=["title","titleId"];function b(){return b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b.apply(this,arguments)}function j(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function g(e,t){var r=e.title,o=e.titleId,l=j(e,k);return p.createElement("svg",b({xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 48 48",ref:t,"aria-labelledby":o},l),r?p.createElement("title",{id:o},r):null,n||(n=p.createElement("path",{d:"M8,4H28l8,8V32a4,4,0,0,1-4,4H8a4,4,0,0,1-4-4V8A4,4,0,0,1,8,4",transform:"translate(4 4)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),a||(a=p.createElement("circle",{cx:4,cy:4,r:4,transform:"translate(20 24)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),i||(i=p.createElement("path",{d:"M20,4v8H8V4",transform:"translate(8 4)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})))}var x,w,O=p.forwardRef(g),N=(r.p,["title","titleId"]);function E(){return E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E.apply(this,arguments)}function P(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Z(e,t){var r=e.title,n=e.titleId,a=P(e,N);return p.createElement("svg",E({xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 48 48",ref:t,"aria-labelledby":n},a),r?p.createElement("title",{id:n},r):null,x||(x=p.createElement("path",{d:"M7,10H9a4,4,0,0,0,4-4,2,2,0,0,1,2-2H27a2,2,0,0,1,2,2,4,4,0,0,0,4,4h2a4,4,0,0,1,4,4V32a4,4,0,0,1-4,4H7a4,4,0,0,1-4-4V14a4,4,0,0,1,4-4",transform:"translate(3 4)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),w||(w=p.createElement("circle",{cx:6,cy:6,r:6,transform:"translate(18 20)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})))}var L,C,I=p.forwardRef(Z),T=(r.p,["title","titleId"]);function R(){return R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},R.apply(this,arguments)}function S(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function H(e,t){var r=e.title,n=e.titleId,a=S(e,T);return p.createElement("svg",R({xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 48 48",ref:t,"aria-labelledby":n},a),r?p.createElement("title",{id:n},r):null,L||(L=p.createElement("path",{d:"M30,12V6a2,2,0,0,0-2-2H8a4,4,0,0,0,0,8H32a2,2,0,0,1,2,2v6m0,8v6a2,2,0,0,1-2,2H8a4,4,0,0,1-4-4V8",transform:"translate(4 4)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),C||(C=p.createElement("path",{d:"M26,12v8H18a4,4,0,0,1,0-8h8",transform:"translate(14 12)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})))}var W=p.forwardRef(H),A=(r.p,r(91938)),B=r(95899),U=r(29316),V=r(65248),M=r(61745),D=r(44643),F=r(4127),z=r(40696),q=r(298),G=(r(59319),r(80184)),X=function(){var e=(0,q.dD)(),t=e.address,r=e.connect,n=e.provider,a=(0,h.I0)(),i=(0,p.useRef)(),c=(0,h.v9)((function(e){return e.UserState})),d=(0,h.v9)((function(e){return e.BWalletState})),k=(0,p.useState)(!1),b=(0,s.Z)(k,2),j=b[0],g=b[1],x=(0,p.useState)({fullName:"",bio:"",displayPic:null}),w=(0,s.Z)(x,2),N=w[0],E=w[1],P=(0,p.useState)(null),Z=(0,s.Z)(P,2),L=Z[0],C=Z[1],T=function(){var e=(0,o.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,p.useEffect)((function(){(0,B.Z)("page_view_profile")}),[]),(0,p.useEffect)((function(){(0,U.fb)(N.displayPic)&&C(URL.createObjectURL(N.displayPic))}),[N.displayPic]),(0,p.useEffect)((function(){(0,U.Pc)(c)&&(g(!0),f()({url:V._+"/api/user/profile",method:"GET",headers:{"user-id":c.user.uid,authorization:"Bearer ".concat(c.tokens.acsTkn.tkn)}}).then((function(e){200===e.status?(E((function(t){return(0,l.Z)((0,l.Z)({},t),{},{fullName:(0,U.vd)(e.data.first_name)?"".concat(e.data.first_name," ").concat(e.data.last_name):"",bio:e.data.bio})})),(0,U.vd)(e.data.display_pic)?C("".concat(V._,"/files/").concat(e.data.display_pic)):C(e.data.social_pic)):a((0,D.e1)("NOT200"))})).catch((function(e){a((0,D.e1)("ERROR"))})).finally((function(){return g(!1)})))}),[c,a,d]),(0,p.useEffect)((function(){a(j?(0,F.yh)():(0,F.v3)())}),[j,a]),(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(m.q,{children:(0,G.jsx)("meta",{name:"Profile",content:"User Profile"})}),(0,G.jsx)(v.Z,{containerClass:"profile",children:(0,G.jsxs)("div",{className:"profile__container",children:[(0,G.jsxs)("div",{className:"profile__left",children:[(0,G.jsx)("img",{src:L,alt:"Display Pic",className:"profile__left__avatar"}),(0,G.jsxs)(_.Z,{onClick:function(){var e;return null===(e=i.current)||void 0===e?void 0:e.click()},children:[(0,G.jsx)(I,{}),"Change"]}),(0,G.jsx)("input",{className:"file-input__hidden-input",type:"file",accept:"image/*",onChange:function(e){if((0,U.vd)(e.target.files)){E((function(t){return(0,l.Z)((0,l.Z)({},t),{},{displayPic:e.target.files[0]})}));var t=new FormData;t.append("displayPic",e.target.files[0]),f()({url:V._+"/api/user/profile/pic",method:"PUT",headers:{address:d.smartAccount.address,"user-id":c.user.uid,authorization:"Bearer ".concat(c.tokens.acsTkn.tkn)},data:t}).then((function(e){200===e.status?(a((0,M.rX)(e.data)),a((0,D.e1)({show:!0,message:"Profile Pic Updated.",type:1}))):a((0,D.e1)("NOT200"))})).catch((function(e){(0,U.fb)(e.response)?413===e.response.status?a((0,D.e1)("LIMIT_FILE_SIZE")):415===e.response.status&&a((0,D.e1)("INVALID_FILE_TYPE")):a((0,D.e1)("ERROR"))})).finally((function(){return g(!1)}))}else E((function(e){return(0,l.Z)((0,l.Z)({},e),{},{displayPic:null})}))},ref:i})]}),(0,G.jsxs)("div",{className:"profile__details",children:[(0,G.jsxs)("div",{className:"profile__details__header",children:[(0,G.jsx)("div",{className:"typo__head--4",children:"Personal Details"}),(0,G.jsxs)(_.Z,{onClick:function(){return(0,B.Z)("event_profile_save"),void((0,U.vd)(N.fullName)&&(0,U.vd)(N.bio)?(g(!0),f()({url:V._+"/api/user/profile",method:"PUT",headers:{address:d.smartAccount.address,"user-id":c.user.uid,authorization:"Bearer ".concat(c.tokens.acsTkn.tkn)},data:{firstName:N.fullName.split(" ")[0],lastName:N.fullName.split(" ")[1],bio:N.bio}}).then((function(e){if(200===e.status){var t=(0,l.Z)((0,l.Z)({},e.data),{},{tokens:{acsTkn:c.tokens.acsTkn.tkn,rfsTkn:c.tokens.rfsTkn.tkn}});a((0,M.av)(t)),a((0,D.e1)({show:!0,message:"Profile Updated.",type:1}))}else a((0,D.e1)("NOT200"))})).catch((function(e){a((0,D.e1)("ERROR"))})).finally((function(){return g(!1)}))):a((0,D.e1)({show:!0,message:"Please fill all the details.",type:2})))},children:[(0,G.jsx)(O,{}),"Save"]})]}),(0,G.jsx)(y.Z,{type:"string",label:"fullname",value:(0,U.fb)(N.fullName)?N.fullName:"",onChange:function(e){return E((0,l.Z)((0,l.Z)({},N),{},{fullName:e.target.value}))},description:"Enter your full name"}),(0,G.jsx)(y.Z,{type:"text",label:"bio",value:N.bio,onChange:function(e){e.target.value.length<1001?E((0,l.Z)((0,l.Z)({},N),{},{bio:e.target.value})):a((0,D.e1)({show:!0,message:"Bio cannot be longer than 1,000 characters.",type:3}))},description:"Enter your bio (".concat((0,U.fb)(N.bio)?N.bio.length:0,"/1000)")}),(0,G.jsx)("div",{className:"profile__details__header",children:(0,G.jsx)("div",{className:"typo__head--4",children:"Connections"})}),(0,G.jsxs)("div",{className:"profile__details__connect",onClick:function(){},children:[(0,G.jsx)("div",{className:"profile__details__connect__icon",children:(0,G.jsx)(W,{width:32,height:32,stroke:"currentColor"})}),(0,G.jsxs)("div",{className:"profile__details__connect__label typo__head--6",children:["Wallet: ",d.smartAccount.address]}),(0,G.jsx)(_.Z,{type:"primary",onClick:function(){return(0,B.Z)("event_profile_wallet"),void(d.smartAccount||(t||T(),(0,z.Z)(n,a)))},children:d.smartAccount?"open":"Connect"})]}),(0,G.jsxs)("div",{className:"profile__details__connect",children:[(0,G.jsx)("div",{className:"profile__details__connect__icon",children:(0,G.jsx)(A.r,{width:32,height:32,stroke:"currentColor"})}),(0,G.jsx)("div",{className:"profile__details__connect__label typo__head--6",children:"Connect your Twitter Account"}),(0,G.jsx)(_.Z,{type:"primary",children:"CONNECT"})]})]}),(0,G.jsx)("div",{className:"profile__spacer"})]})})]})}}}]);
//# sourceMappingURL=739.23f2532a.chunk.js.map