"use strict";(self.webpackChunkmarketplace=self.webpackChunkmarketplace||[]).push([[739],{4739:function(e,t,r){r.r(t),r.d(t,{default:function(){return z}});var n,a,l,i=r(1413),o=r(885),s=r(4569),c=r.n(s),u=r(2791),d=r(6030),f=r(8979),p=r(5454),h=r(3958),v=["title","titleId"];function _(){return _=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_.apply(this,arguments)}function m(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function y(e,t){var r=e.title,i=e.titleId,o=m(e,v);return u.createElement("svg",_({xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 48 48",ref:t,"aria-labelledby":i},o),r?u.createElement("title",{id:i},r):null,n||(n=u.createElement("path",{d:"M8,4H28l8,8V32a4,4,0,0,1-4,4H8a4,4,0,0,1-4-4V8A4,4,0,0,1,8,4",transform:"translate(4 4)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),a||(a=u.createElement("circle",{cx:4,cy:4,r:4,transform:"translate(20 24)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),l||(l=u.createElement("path",{d:"M20,4v8H8V4",transform:"translate(8 4)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})))}var k,b,g=u.forwardRef(y),j=(r.p,["title","titleId"]);function w(){return w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w.apply(this,arguments)}function x(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function O(e,t){var r=e.title,n=e.titleId,a=x(e,j);return u.createElement("svg",w({xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 48 48",ref:t,"aria-labelledby":n},a),r?u.createElement("title",{id:n},r):null,k||(k=u.createElement("path",{d:"M7,10H9a4,4,0,0,0,4-4,2,2,0,0,1,2-2H27a2,2,0,0,1,2,2,4,4,0,0,0,4,4h2a4,4,0,0,1,4,4V32a4,4,0,0,1-4,4H7a4,4,0,0,1-4-4V14a4,4,0,0,1,4-4",transform:"translate(3 4)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),b||(b=u.createElement("circle",{cx:6,cy:6,r:6,transform:"translate(18 20)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})))}var N,E,Z=u.forwardRef(O),P=(r.p,["title","titleId"]);function L(){return L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},L.apply(this,arguments)}function C(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function I(e,t){var r=e.title,n=e.titleId,a=C(e,P);return u.createElement("svg",L({xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 48 48",ref:t,"aria-labelledby":n},a),r?u.createElement("title",{id:n},r):null,N||(N=u.createElement("path",{d:"M30,12V6a2,2,0,0,0-2-2H8a4,4,0,0,0,0,8H32a2,2,0,0,1,2,2v6m0,8v6a2,2,0,0,1-2,2H8a4,4,0,0,1-4-4V8",transform:"translate(4 4)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),E||(E=u.createElement("path",{d:"M26,12v8H18a4,4,0,0,1,0-8h8",transform:"translate(14 12)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})))}var T=u.forwardRef(I),R=(r.p,r(1938)),S=r(5899),H=r(9316),W=r(5248),V=r(1745),B=r(4643),U=r(4127),M=r(6026),A=r(2043),D=r(184),z=function(){var e=(0,d.I0)(),t=(0,u.useRef)(),r=(0,d.v9)((function(e){return e.UserState})),n=(0,d.v9)((function(e){return e.WalletState})),a=(0,u.useState)(!1),l=(0,o.Z)(a,2),s=l[0],v=l[1],_=(0,u.useState)({fullName:"",bio:"",displayPic:null}),m=(0,o.Z)(_,2),y=m[0],k=m[1],b=(0,u.useState)(null),j=(0,o.Z)(b,2),w=j[0],x=j[1];return(0,u.useEffect)((function(){(0,S.Z)("page_view_profile")}),[]),(0,u.useEffect)((function(){(0,H.fb)(y.displayPic)&&x(URL.createObjectURL(y.displayPic))}),[y.displayPic]),(0,u.useEffect)((function(){(0,H.Pc)(r)&&(v(!0),c()({url:W._+"/api/user/profile",method:"GET",headers:{"user-id":r.user.uid,authorization:"Bearer ".concat(r.tokens.acsTkn.tkn)}}).then((function(t){200===t.status?(k((function(e){return(0,i.Z)((0,i.Z)({},e),{},{fullName:(0,H.vd)(t.data.first_name)?"".concat(t.data.first_name," ").concat(t.data.last_name):"",bio:t.data.bio})})),(0,H.vd)(t.data.display_pic)?x("".concat(W._,"/files/").concat(t.data.display_pic)):x(t.data.social_pic)):e((0,B.e1)("NOT200"))})).catch((function(t){e((0,B.e1)("ERROR"))})).finally((function(){return v(!1)})))}),[r,e,n]),(0,u.useEffect)((function(){e(s?(0,U.yh)():(0,U.v3)())}),[s,e]),(0,D.jsx)(f.Z,{containerClass:"profile",children:(0,D.jsxs)("div",{className:"profile__container",children:[(0,D.jsxs)("div",{className:"profile__left",children:[(0,D.jsx)("img",{src:w,alt:"Display Pic",className:"profile__left__avatar"}),(0,D.jsxs)(p.Z,{onClick:function(){var e;return null===(e=t.current)||void 0===e?void 0:e.click()},children:[(0,D.jsx)(Z,{}),"Change"]}),(0,D.jsx)("input",{className:"file-input__hidden-input",type:"file",accept:"image/*",onChange:function(t){if((0,H.vd)(t.target.files)){k((function(e){return(0,i.Z)((0,i.Z)({},e),{},{displayPic:t.target.files[0]})}));var a=new FormData;a.append("displayPic",t.target.files[0]),c()({url:W._+"/api/user/profile/pic",method:"PUT",headers:{address:n.wallet.address,"user-id":r.user.uid,authorization:"Bearer ".concat(r.tokens.acsTkn.tkn)},data:a}).then((function(t){200===t.status?(e((0,V.rX)(t.data)),e((0,B.e1)({show:!0,message:"Profile Pic Updated.",type:1}))):e((0,B.e1)("NOT200"))})).catch((function(t){(0,H.fb)(t.response)?413===t.response.status?e((0,B.e1)("LIMIT_FILE_SIZE")):415===t.response.status&&e((0,B.e1)("INVALID_FILE_TYPE")):e((0,B.e1)("ERROR"))})).finally((function(){return v(!1)}))}else k((function(e){return(0,i.Z)((0,i.Z)({},e),{},{displayPic:null})}))},ref:t})]}),(0,D.jsxs)("div",{className:"profile__details",children:[(0,D.jsxs)("div",{className:"profile__details__header",children:[(0,D.jsx)("div",{className:"typo__head--4",children:"Personal Details"}),(0,D.jsxs)(p.Z,{onClick:function(){return(0,S.Z)("event_profile_save"),void((0,H.vd)(y.fullName)&&(0,H.vd)(y.bio)?(v(!0),c()({url:W._+"/api/user/profile",method:"PUT",headers:{address:n.wallet.address,"user-id":r.user.uid,authorization:"Bearer ".concat(r.tokens.acsTkn.tkn)},data:{firstName:y.fullName.split(" ")[0],lastName:y.fullName.split(" ")[1],bio:y.bio}}).then((function(t){if(200===t.status){var n=(0,i.Z)((0,i.Z)({},t.data),{},{tokens:{acsTkn:r.tokens.acsTkn.tkn,rfsTkn:r.tokens.rfsTkn.tkn}});e((0,V.av)(n)),e((0,B.e1)({show:!0,message:"Profile Updated.",type:1}))}else e((0,B.e1)("NOT200"))})).catch((function(t){e((0,B.e1)("ERROR"))})).finally((function(){return v(!1)}))):e((0,B.e1)({show:!0,message:"Please fill all the details.",type:2})))},children:[(0,D.jsx)(g,{}),"Save"]})]}),(0,D.jsx)(h.Z,{type:"string",label:"fullname",value:(0,H.fb)(y.fullName)?y.fullName:"",onChange:function(e){return k((0,i.Z)((0,i.Z)({},y),{},{fullName:e.target.value}))},description:"Enter your full name"}),(0,D.jsx)(h.Z,{type:"text",label:"bio",value:y.bio,onChange:function(t){t.target.value.length<1001?k((0,i.Z)((0,i.Z)({},y),{},{bio:t.target.value})):e((0,B.e1)({show:!0,message:"Bio cannot be longer than 1,000 characters.",type:3}))},description:"Enter your bio (".concat((0,H.fb)(y.bio)?y.bio.length:0,"/1000)")}),(0,D.jsx)("div",{className:"profile__details__header",children:(0,D.jsx)("div",{className:"typo__head--4",children:"Connections"})}),(0,D.jsxs)("div",{className:"profile__details__connect",onClick:function(){(0,H.fb)(n.wallet.wallet)&&n.wallet.wallet.sequence.openWallet()},children:[(0,D.jsx)("div",{className:"profile__details__connect__icon",children:(0,D.jsx)(T,{width:32,height:32,stroke:"currentColor"})}),(0,D.jsxs)("div",{className:"profile__details__connect__label typo__head--6",children:["Wallet: ",n.wallet.address]}),(0,D.jsx)(p.Z,{type:"primary",onClick:function(){return(0,S.Z)("event_profile_wallet"),void((0,H.AY)(n)||A.Z.connectWallet().then((function(t){e((0,M.kH)({wallet:t.wallet,provider:t.provider,signer:t.signer,address:t.address}))})).catch((function(e){})))},children:(0,H.AY)(n)?"open":"Connect"})]}),(0,D.jsxs)("div",{className:"profile__details__connect",children:[(0,D.jsx)("div",{className:"profile__details__connect__icon",children:(0,D.jsx)(R.r,{width:32,height:32,stroke:"currentColor"})}),(0,D.jsx)("div",{className:"profile__details__connect__label typo__head--6",children:"Connect your Twitter Account"}),(0,D.jsx)(p.Z,{type:"primary",children:"CONNECT"})]})]}),(0,D.jsx)("div",{className:"profile__spacer"})]})})}}}]);
//# sourceMappingURL=739.1a6f4f4d.chunk.js.map