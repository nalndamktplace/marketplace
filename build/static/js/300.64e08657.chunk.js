"use strict";(self.webpackChunkmarketplace=self.webpackChunkmarketplace||[]).push([[300],{84300:function(e,t,a){a.r(t),a.d(t,{default:function(){return re}});var s,o,_,n,r,i,c=a(1413),d=a(15861),l=a(29439),u=a(64687),h=a.n(u),m=a(74569),f=a.n(m),b=a(72426),p=a.n(b),k=a(16030),y=a(16871),v=a(72791),j=a(54270),x=a(88952),g=a(43935),w=a(4254),N=a(75454),E=a(90709),O=a(85807),R=a(46472),Z=a(77107),A=a(89018),T=a(95899),S=a(29316),C=a(87928),G=a(9135),B=["title","titleId"];function P(){return P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},P.apply(this,arguments)}function L(e,t){if(null==e)return{};var a,s,o=function(e,t){if(null==e)return{};var a,s,o={},_=Object.keys(e);for(s=0;s<_.length;s++)a=_[s],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(e);for(s=0;s<_.length;s++)a=_[s],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}function M(e,t){var a=e.title,c=e.titleId,d=L(e,B);return v.createElement("svg",P({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",ref:t,"aria-labelledby":c},d),a?v.createElement("title",{id:c},a):null,s||(s=v.createElement("path",{d:"M0,0H24V24H0Z",fill:"none"})),o||(o=v.createElement("path",{d:"M3,7v4a1,1,0,0,0,1,1H7",fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})),_||(_=v.createElement("path",{d:"M7,7V17",fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})),n||(n=v.createElement("path",{d:"M10,8v8a1,1,0,0,0,1,1h2a1,1,0,0,0,1-1V8a1,1,0,0,0-1-1H11A1,1,0,0,0,10,8Z",fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})),r||(r=v.createElement("path",{d:"M17,7v4a1,1,0,0,0,1,1h3",fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})),i||(i=v.createElement("path",{d:"M21,7V17",fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})))}var I=v.forwardRef(M),F=(a.p,a(80184)),q=function(e){var t=e.onOldBookPurchase,a=e.data,s=(0,k.v9)((function(e){return e.ModalState})),o=(0,v.useState)(!1),_=(0,l.Z)(o,2),n=_[0],r=_[1],i=(0,v.useState)([]),c=(0,l.Z)(i,2),d=c[0],u=c[1];return(0,v.useEffect)((function(){window.document.documentElement.style.overflowY=n?"hidden":"auto"}),[n]),(0,v.useEffect)((function(){!0===s.show&&s.type===C.m0?((0,T.Z)("modal_view_purchase"),r(!0)):r(!1)}),[s]),(0,v.useEffect)((function(){if(!0===n&&(0,S.fb)(a)){var e=[];e.push(a),u(e)}}),[n,a]),(0,F.jsx)(A.Z,{show:n,children:(0,F.jsxs)("div",{className:function(){var e=["purchase purchase__wrapper"];return n?e.push("purchase__wrapper--open"):e.push("purchase__wrapper--close"),e.join(" ")}(),children:[(0,F.jsx)("div",{className:"purchase__wrapper__header",children:(0,F.jsx)("div",{className:"purchase__wrapper__header__close-button",children:(0,F.jsx)("div",{onClick:function(){return r(!1)},children:(0,F.jsx)(G.r,{width:20,height:20})})})}),(0,F.jsx)("div",{className:"purchase__wrapper__content",children:(0,F.jsx)("div",{className:"purchase__wrapper__content__options",children:(0,S.vd)(d)?(0,F.jsxs)("div",{className:"purchase__wrapper__content__options__item",onClick:function(){t(a)},children:[(0,F.jsx)("p",{className:"typo__body utils__d__flex typo__align--center",children:"Buy Copy at"}),(0,F.jsx)("h5",{className:"typo__head typo__head--4 typo__transform--upper utils__d__flex utils__align__center",children:0===a.price?"FREE":(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("img",{src:"https://imagedelivery.net/yOWneHxM1h9mu46Te3Yjwg/59c27d12-e4eb-4f74-7a6e-b33ba6537600/icon48",style:{width:32,height:32,objectFit:"contain"},alt:"USDC"}),"\xa0",a.price]})})]}):(0,F.jsxs)("div",{className:"purchase__wrapper__content__options__item",children:[(0,F.jsx)("p",{className:"typo__body utils__d__flex typo__align--center",children:"No old copies available yet."}),(0,F.jsxs)("h5",{className:"typo__head typo__head--4 typo__transform--upper utils__d__flex utils__align__center",children:["\xa0",(0,F.jsx)(I,{height:32,width:32})]})]})})})]})})},D=a(40696),Y=a(65248),U=a(44643),W=a(4127),z=a(37793),V=a(25897),H=a(23358),K=a(88465),Q=a(33653),J=a(40116),X=a(96744),$=a(7445),ee=a(14998),te=a(88079),ae=a(1692),se=a(7215),oe=a(65748),_e=a(70476),ne=a(298),re=function(e){var t=[{id:"TAB01",label:"Synopsis",icon:(0,F.jsx)(X.r,{})},{id:"TAB02",label:"reviews",icon:(0,F.jsx)($.r,{})},{id:"TAB03",label:"quotes",icon:(0,F.jsx)(ee.r,{})}],a=(0,y.UO)(),s=(0,k.I0)(),o=(0,y.s0)(),_=(0,z.Z)(),n=(0,ne.dD)(),r=n.address,i=(n.loading,n.userInfo,n.connect),u=(n.disconnect,n.getUserInfo,n.provider),m=(0,k.v9)((function(e){return e.UserState})),b=(0,k.v9)((function(e){return e.BWalletState})),A=(0,v.useState)(null),G=(0,l.Z)(A,2),B=G[0],P=G[1],L=(0,v.useState)(!1),M=(0,l.Z)(L,2),I=M[0],re=M[1],ie=(0,v.useState)("TAB01"),ce=(0,l.Z)(ie,2),de=ce[0],le=ce[1],ue=(0,v.useState)(null),he=(0,l.Z)(ue,2),me=he[0],fe=he[1],be=(0,v.useState)(null),pe=(0,l.Z)(be,2),ke=pe[0],ye=pe[1],ve=(0,v.useState)(null),je=(0,l.Z)(ve,2),xe=je[0],ge=je[1],we=(0,v.useState)(null),Ne=(0,l.Z)(we,2),Ee=Ne[0],Oe=Ne[1],Re=(0,v.useState)(null),Ze=(0,l.Z)(Re,2),Ae=Ze[0],Te=Ze[1],Se=(0,v.useState)(null),Ce=(0,l.Z)(Se,2),Ge=Ce[0],Be=Ce[1],Pe=(0,v.useState)(null),Le=(0,l.Z)(Pe,2),Me=Le[0],Ie=Le[1],Fe=(0,v.useState)(0),qe=(0,l.Z)(Fe,2),De=qe[0],Ye=qe[1],Ue=(0,v.useState)(!1),We=(0,l.Z)(Ue,2),ze=We[0],Ve=We[1],He=(0,v.useState)(0),Ke=(0,l.Z)(He,2),Qe=Ke[0],Je=Ke[1],Xe=(0,v.useState)(null),$e=(0,l.Z)(Xe,2),et=$e[0],tt=$e[1],at=(0,v.useState)([]),st=(0,l.Z)(at,2),ot=st[0],_t=st[1],nt=(0,v.useState)(0),rt=(0,l.Z)(nt,2),it=rt[0],ct=rt[1],dt=(0,v.useState)({title:"",body:"",rating:0}),lt=(0,l.Z)(dt,2),ut=lt[0],ht=lt[1],mt=(0,v.useState)(null),ft=(0,l.Z)(mt,2),bt=ft[0],pt=ft[1],kt=(0,v.useState)([]),yt=(0,l.Z)(kt,2),vt=yt[0],jt=yt[1],xt=(0,v.useState)({quote:""}),gt=(0,l.Z)(xt,2),wt=gt[0],Nt=gt[1],Et=(0,v.useState)(0),Ot=(0,l.Z)(Et,2),Rt=Ot[0],Zt=Ot[1],At=(0,v.useState)(0),Tt=(0,l.Z)(At,2),St=Tt[0],Ct=Tt[1],Gt=(0,v.useState)(0),Bt=(0,l.Z)(Gt,2),Pt=Bt[0],Lt=Bt[1],Mt=(0,v.useRef)();(0,v.useEffect)((function(){(0,T.Z)("page_view_book")}),[]),(0,v.useEffect)((function(){"TAB01"===de?(0,T.Z)("tab_view_book_synopsis"):"TAB02"===de?(0,T.Z)("tab_view_book_reviews"):(0,T.Z)("tab_view_book_quotes")}),[de]),(0,v.useEffect)((function(){(0,S.fb)(me)&&ge(1===me.listed)}),[me]);var It=(0,v.useCallback)((function(){(0,S.fb)(me)&&(re(!0),f()({url:"".concat(Y._,"/api/book/reviews"),method:"GET",params:{bookAddress:me.book_address}}).then((function(e){200===e.status?(_t(e.data.reviews),Je(e.data.rating),ct(e.data.total)):s((0,U.e1)("NOT200"))})).catch((function(e){s((0,U.e1)("ERROR"))})).finally((function(){return re(!1)})))}),[me,s]),Ft=(0,v.useCallback)((function(){(0,S.fb)(me)&&(0,S.fb)(B)&&(re(!0),f()({url:"".concat(Y._,"/api/book/reviewed"),method:"GET",params:{bookAddress:me.book_address,ownerAddress:B}}).then((function(e){200===e.status&&(0,S.UE)(e.data)&&tt(e.data)})).catch((function(e){s((0,U.e1)("ERROR"))})).finally((function(){return re(!1)})))}),[me,B,s]),qt=(0,v.useCallback)((function(){(0,S.fb)(me)&&(re(!0),f()({url:"".concat(Y._,"/api/book/quotes"),method:"GET",params:{bookAddress:me.book_address}}).then((function(e){200===e.status?jt(e.data):204===e.status||s((0,U.e1)("NOT200"))})).catch((function(e){s((0,U.e1)("ERROR"))})).finally((function(){return re(!1)})))}),[me,s]),Dt=(0,v.useCallback)((function(){(0,S.fb)(me)&&(0,S.fb)(B)&&(re(!0),f()({url:"".concat(Y._,"/api/book/quoted"),method:"GET",params:{bookAddress:me.book_address,ownerAddress:B}}).then((function(e){200===e.status&&(0,S.UE)(e.data)&&pt(e.data)})).catch((function(e){s((0,U.e1)("ERROR"))})).finally((function(){return re(!1)})))}),[me,B,s]);(0,v.useEffect)((function(){It()}),[It]),(0,v.useEffect)((function(){Ft()}),[Ft]),(0,v.useEffect)((function(){qt()}),[qt]),(0,v.useEffect)((function(){Dt()}),[Dt]),(0,v.useEffect)((function(){(0,S.fb)(me)&&(re(!0),f()({url:"".concat(Y._,"/api/book/likes"),method:"GET",params:{bookAddress:me.book_address}}).then((function(e){200===e.status?Ye(e.data.likes):s((0,U.e1)("NOT200"))})).catch((function(e){s((0,U.e1)("ERROR"))})).finally((function(){return re(!1)})))}),[me,s]),(0,v.useEffect)((function(){(0,S.fb)(me)&&(0,S.fb)(B)&&(re(!0),f()({url:"".concat(Y._,"/api/book/liked"),method:"GET",params:{bookAddress:me.book_address,ownerAddress:B}}).then((function(e){200===e.status&&Ve(e.data.liked)})).catch((function(e){s((0,U.e1)("ERROR"))})).finally((function(){return re(!1)})))}),[me,B,s]),(0,v.useEffect)((function(){(0,S.fb)(me)&&(re(!0),f()({url:"".concat(Y._,"/api/reader/total-reader-count"),method:"GET",params:{bookAddress:me.book_address}}).then((function(e){200===e.status&&Zt(e.data.total_readers)})).catch((function(e){s((0,U.e1)("ERROR"))})).finally((function(){return re(!1)})))}),[me,s]),(0,v.useEffect)((function(){(0,S.fb)(me)&&(re(!0),f()({url:"".concat(Y._,"/api/reader/count"),method:"GET",params:{bookAddress:me.book_address}}).then((function(e){200===e.status&&Ct(e.data.reader_count)})).catch((function(e){s((0,U.e1)("ERROR"))})).finally((function(){return re(!1)})))}),[me,s]),(0,v.useEffect)((function(){(0,S.fb)(me)&&(re(!0),f()({url:"".concat(Y._,"/api/reader/total-read-time"),method:"GET",params:{bookAddress:me.book_address}}).then((function(e){200===e.status&&Lt(e.data.total_read_time)})).catch((function(e){s((0,U.e1)("ERROR"))})).finally((function(){return re(!1)})))}),[me,s]),(0,v.useEffect)((function(){re(!0),(0,S.fb)(b.smartAccount)&&P(b.smartAccount.address),re(!1)}),[b]),(0,v.useEffect)((function(){(0,S.fb)(et)&&ht({title:et.title,body:et.body,rating:et.rating})}),[et]),(0,v.useEffect)((function(){var e=a.bookID;f()({url:"".concat(Y._,"/api/book/listedbook"),method:"GET",params:{bookID:e}}).then((function(e){fe(e.data.book),Ie(e.data.secondary_book)}))}),[a]),(0,v.useEffect)((function(){if((0,S.fb)(B)){re(!0);var e=me;e.new_owner===B?ye(!0):ye(!1),e.publisher_address===B?Te(!0):Te(!1),f()({url:Y._+"/api/book/owner",method:"GET",params:{ownerAddress:B,bookAddress:e.book_address}}).then((function(e){200===e.status&&ye(!0)})).catch((function(e){})).finally((function(){return re(!1)}))}}),[me,a,s,B]),(0,v.useEffect)((function(){(0,S.fb)(me)&&(0,S.fb)(Ae)&&(0,S.fb)(ke)&&re(!1)}),[me,Ae,ke]),(0,v.useEffect)((function(){s(I?(0,W.yh)():(0,W.v3)())}),[I,s]),(0,v.useEffect)((function(){var e=document.getElementById("BOOK_PAGE_"+de);(0,S.fb)(e)&&(0,S.fb)(Mt.current)&&Mt.current.style.setProperty("--marker-x",e.offsetLeft)}),[de]),(0,v.useEffect)((function(){ke&&f()({url:"".concat(Y._,"/api/user/book"),method:"GET",headers:{"user-id":m.user.uid,address:b.smartAccount.address,authorization:"Bearer ".concat(m.tokens.acsTkn.tkn)},params:{walletAddress:b.smartAccount.address,bookAddress:me.book_address}}).then((function(e){200===e.status?(Oe(e.data),ge(e.data.listed)):s((0,U.e1)("NOT200"))})).catch((function(e){s((0,U.e1)("ERROR"))}))}),[ke,m,b,s,me]);var Yt=function(){var e=(0,d.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ut=function(){if((0,S.fb)(b.smartAccount))return P(b.smartAccount.address),!0;r||Yt(),(0,D.Z)(u,s)},Wt=function(){var e=(0,d.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,T.Z)("event_book_read"),re(!0);try{f()({url:"".concat(Y._,"/api/verify"),method:"GET",params:{bookAddress:me.book_address,ownerAddress:B}}).then((function(e){if(200===e.status){var t=e.data;D.Z.signMessage(b.smartAccount.signer,JSON.stringify(t)).then((function(e){!0===e.isValid?f()({url:Y._+"/api/verify",method:"POST",headers:{address:b.smartAccount.address,"user-id":m.user.uid,authorization:"Bearer ".concat(m.tokens.acsTkn.tkn)},data:{accountAddress:B,bookAddress:me.book_address,signedData:e.signedData,cid:me.book.slice(me.book.lastIndexOf("/")+1)}}).then((function(e){200===e.status?((0,T.Z)("navigate_book_reader"),o("/library/reader",{state:{book:(0,c.Z)((0,c.Z)({},me),{},{url:e.data.url}),preview:!1}})):s((0,U.e1)({show:!0,message:"Error",type:4}))})).catch((function(e){s((0,U.e1)("ERROR"))})).finally((function(){return re(!1)})):s((0,U.e1)({show:!0,message:"Could not verify the authenticity of the signature.",type:3}))}))}else s((0,U.e1)("NOT200"))}))}catch(t){re(!1)}case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(j.q,{children:(0,F.jsx)("meta",{name:"Listed Books",content:""})}),(0,F.jsxs)(x.Z,{children:[(0,F.jsx)("div",{className:"book__bg",children:(0,F.jsx)("img",{src:V.Z,alt:"background",loading:"lazy"})}),(0,S.fb)(me)?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{className:"book__data",children:[(0,F.jsx)("div",{className:"book__data__background"}),(0,F.jsxs)("div",{className:"book__data__container",children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{className:"book__data__container__cover",children:(0,F.jsx)("img",{className:"book__data__container__cover__image",src:me.cover_display_url?me.cover_display_url:me.cover_public_url?me.cover_public_url:me.cover,alt:me.name})}),(0,F.jsxs)("div",{className:"book__data__container__meta",children:[(0,F.jsx)("h3",{className:"typo__color--n700 typo__head typo__head--3 typo__transform--capital",children:me.title}),(0,F.jsx)("h5",{className:"typo__color--n500 typo__head typo__head--6 typo__transform--upper",children:me.author}),ke||Ae?null:(0,F.jsx)("div",{className:"book__data__container__meta__price typo-head--6 typo__act typo__color--success",children:0===Me.price?"FREE":(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("img",{src:"https://imagedelivery.net/yOWneHxM1h9mu46Te3Yjwg/59c27d12-e4eb-4f74-7a6e-b33ba6537600/icon48",style:{width:20,height:20,objectFit:"contain"},alt:"USDC"}),"\xa0",Me.price]})}),(0,F.jsxs)("div",{className:"book__data__container__meta__rating",children:[(0,F.jsx)("div",{className:"book__data__container__meta__rating__stars",children:(0,F.jsx)(w.Z,{size:"small",rating:Qe})}),(0,F.jsxs)("div",{className:"book__data__container__meta__rating__count typo__body",children:[it," reviews"]})]}),(0,F.jsx)("div",{className:"book__data__container__meta__cta",children:xe?(0,F.jsx)(N.Z,{type:"primary",size:"lg",onClick:function(){return(0,T.Z)("event_book_unlist"),void((0,S.fb)(B)&&(re(!0),f()({url:Y._+"/api/user/book/listed",method:"GET",headers:{"user-id":m.user.uid,authorization:"Bearer ".concat(m.tokens.acsTkn.tkn)},params:{ownerAddress:B,tokenId:Ee.token_id,bookAddress:me.book_address}}).then((function(e){if(200===e.status){re(!0);var t=e.data.order_id;g.Z.unlistBookFromMarketplace(t,b.smartAccount.signer).then((function(e){re(!0),f()({url:Y._+"/api/book/unlist",method:"POST",data:{ownerAddress:B,bookAddress:me.book_address}}).then((function(e){200===e.status?(ge(!1),s((0,C.VG)()),s((0,U.e1)({show:!0,message:"Book unlisted from marketplace.",type:1})),o("/")):s((0,U.e1)("NOT200"))})).catch((function(e){s((0,U.e1)("ERROR"))})).finally((function(){re(!1)}))})).catch((function(e){re(!1),(0,S.fb)(e.reason)?e.reason.includes("NFT not yet listed / already sold")&&s((0,U.e1)({show:!0,message:"eBook already sold or not listed.",type:3})):s((0,U.e1)("ERROR"))}))}else s((0,U.e1)("NOT200"))})).catch((function(e){re(!1),s((0,U.e1)("ERROR"))}))))},children:"Unlist"}):Ae?(0,F.jsx)(F.Fragment,{children:(0,F.jsx)(N.Z,{type:"primary",size:"lg",onClick:function(){return Wt()},children:"Read"})}):ke?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(N.Z,{type:"primary",size:"lg",onClick:function(){return Wt()},children:"Read"}),(0,F.jsx)(N.Z,{onClick:function(){return s((0,C.K4)(C.gG)),void(p()(me.secondary_sales_from).isSame(p()())||p()(me.secondary_sales_from).isBefore(p()())?s((0,C.K4)(C.gG)):p()(me.secondary_sales_from).isAfter(p()())&&s((0,U.e1)({show:!0,message:"Secondary Sales will open only after ".concat(p()(me.secondary_sales_from).format("D MMM, YYYY"),"."),type:2})))},children:"List"})]}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(N.Z,{type:"primary",size:"lg",onClick:function(){return s(_?(0,C.K4)(C.m0):(0,U.e1)("NOT_LOGGED_IN"))},children:"Buy Now"}),(0,F.jsx)(N.Z,{onClick:function(){return(0,T.Z)("navigate_book_preview"),void o("/book/preview",{state:{book:me,preview:!0}})},children:"Preview"})]})})]})]}),(0,F.jsxs)("div",{className:"book__data__container__desc",children:[(0,F.jsx)("div",{className:"book__data__container__desc__left",children:(0,F.jsxs)("div",{className:"book__data__container__desc__summary",children:[(0,F.jsxs)("div",{className:"book__data__container__desc__summary__contract",children:[(0,F.jsxs)("div",{className:"book__data__container__desc__summary__contract__data",children:[(0,F.jsx)("div",{className:"book__data__container__desc__summary__contract__label typo__color--n700",children:"Contract Address"}),(0,F.jsxs)("div",{className:"book__data__container__desc__summary__contract__value typo__color--n500",onClick:function(){return window.open("https://mumbai.polygonscan.com/address/".concat(me.book_address),"_blank")},children:[(me.book_address||"").slice(0,12),"\u2026",(me.book_address||"").slice((me.contract||"").length-10)]})]}),(0,F.jsx)("div",{className:"book__data__container__desc__summary__contract__icon",children:(0,F.jsx)(te.r,{width:24,height:24})})]}),(0,F.jsx)("div",{className:"book__data__container__desc__summary__head typo__color--n700",children:"DA Score"}),(0,F.jsx)("div",{className:"book__data__container__desc__summary__data",children:Me.da_score}),(0,F.jsx)("div",{className:"book__data__container__desc__summary__head typo__color--n700",children:"Token ID"}),(0,F.jsx)("div",{className:"book__data__container__desc__summary__data",children:Me.token_id}),(0,F.jsx)("div",{className:"book__data__container__desc__summary__head typo__color--n700",children:"Genres"}),(0,F.jsx)("div",{className:"book__data__container__desc__summary__chips typo__transform--capital",children:JSON.parse(me.genres).map((function(e){return(0,F.jsx)("div",{className:"book__data__container__desc__summary__chips__item",children:e})}))}),(0,F.jsx)("div",{className:"book__data__container__desc__summary__head typo__color--n700",children:"Prefered Age Group"}),(0,F.jsx)("div",{className:"book__data__container__desc__summary__chips typo__transform--capital",children:JSON.parse(me.age_group).map((function(e){return(0,F.jsx)("div",{className:"book__data__container__desc__summary__chips__item",children:e})}))}),(0,F.jsxs)("div",{className:"book__data__container__desc__summary__grid typo__color--n700",children:[(0,F.jsxs)("div",{className:"book__data__container__desc__summary__grid__item",children:[(0,F.jsx)(ae.r,{}),(0,F.jsx)("div",{className:"book__data__container__desc__summary__grid__item__data",children:me.language})]}),(0,F.jsxs)("div",{className:"book__data__container__desc__summary__grid__item",children:[(0,F.jsx)(_e.r,{}),(0,F.jsxs)("div",{className:"book__data__container__desc__summary__grid__item__data",children:[Rt," readers"]})]}),(0,F.jsxs)("div",{className:"book__data__container__desc__summary__grid__item",children:[(0,F.jsx)(se.r,{}),(0,F.jsxs)("div",{className:"book__data__container__desc__summary__grid__item__data",children:[St," people reading"]})]}),(0,F.jsxs)("div",{className:"book__data__container__desc__summary__grid__item",children:[(0,F.jsx)(oe.r,{}),(0,F.jsxs)("div",{className:"book__data__container__desc__summary__grid__item__data",children:[Math.ceil(Pt/60)," minutes"]})]})]})]})}),(0,F.jsxs)("div",{className:"book__data__container__desc__right",children:[(0,F.jsxs)("div",{className:"book__data__container__desc__interacts",children:[(0,F.jsxs)("div",{className:"book__data__container__desc__interacts__item",children:[(0,F.jsx)("div",{className:"typo__subtitle typo__color--n500",children:"Likes"}),(0,F.jsx)(H.r,{width:24,height:24,className:"book__data__container__desc__interacts__item__icon",stroke:ze?"#ff5722":"currentColor",fill:ze?"#ff5722":"transparent",onClick:function(){Ut()?ke?(ze?(Ye((function(e){return e-1})),(0,T.Z)("event_book_unlike")):(Ye((function(e){return e+1})),(0,T.Z)("event_book_like")),f()({url:"".concat(Y._,"/api/book/likes"),method:"POST",data:{bookAddress:me.book_address,ownerAddress:B,likedState:!ze}}).then((function(e){200===e.status?Ve((function(e){return!e})):s((0,U.e1)("NOT200"))})).catch((function(e){s((0,U.e1)("ERROR"))})).finally((function(){return re(!1)}))):s((0,U.e1)({show:!0,message:"Only owners can like a book.",type:3})):s((0,U.e1)({show:!0,message:"Please login first.",type:3}))}}),(0,F.jsx)("div",{className:"typo__head--5 typo__color--n600",children:De||"0"})]}),(0,F.jsxs)("div",{className:"book__data__container__desc__interacts__item",children:[(0,F.jsx)("div",{className:"typo__subtitle typo__color--n500",children:"Reviews"}),(0,F.jsx)($.r,{width:24,height:24,stroke:"currentColor"}),(0,F.jsx)("div",{className:"typo__head--5 typo__color--n600",children:it||"0"})]}),(0,F.jsxs)("div",{className:"book__data__container__desc__interacts__item",children:[(0,F.jsx)("div",{className:"typo__subtitle typo__color--n500",children:"Pages"}),(0,F.jsx)(K.r,{width:24,height:24,stroke:"currentColor"}),(0,F.jsx)("div",{className:"typo__head--5 typo__color--n600",children:me.print||"00"})]}),(0,F.jsxs)("div",{className:"book__data__container__desc__interacts__item",children:[(0,F.jsx)("div",{className:"typo__subtitle typo__color--n500",children:"Sold"}),(0,F.jsx)(J.r,{width:24,height:24,stroke:"currentColor"}),(0,F.jsx)("div",{className:"typo__head--5 typo__color--n600",children:me.copies||"00"})]})]}),(0,F.jsxs)("div",{className:"book__data__container__desc__tabs",children:[(0,F.jsx)("div",{ref:Mt,className:"book__data__container__desc__tabs__container",children:function(){var e=[];return t.forEach((function(t){e.push((0,F.jsxs)("div",{onClick:function(){return le(t.id)},id:"BOOK_PAGE_"+t.id,className:t.id===de?"book__data__container__desc__tabs__container__item book__data__container__desc__tabs__container__item--active":"book__data__container__desc__tabs__container__item utils__cursor--pointer",children:[(0,S.fb)(t.icon)&&t.icon,(0,F.jsx)("h5",{className:"typo__head typo__head--6 typo__transform--capital",children:t.label})]},t.id))})),e}()}),(0,F.jsx)("div",{className:"book__data__container__desc__tabs__data",children:function(){switch(de){case"TAB01":return(0,F.jsx)("p",{className:"typo--break-spaces typo__body typo__color--n600",children:me.synopsis});case"TAB02":return(0,F.jsxs)(v.Fragment,{children:[!(0,S.fb)(et)&&ke?(0,F.jsxs)("div",{className:"book__data__container__desc__tabs__data__action",children:[(0,F.jsx)("div",{className:"book__data__container__desc__tabs__data__action__icon",children:(0,F.jsx)($.r,{width:32,height:32,stroke:"currentColor"})}),(0,F.jsx)("div",{className:"book__data__container__desc__tabs__data__action__label typo__head--6",children:"Write a Review"}),(0,F.jsx)(N.Z,{type:"primary",onClick:function(){return s(_?(0,C.K4)(C.wW):(0,U.e1)("NOT_LOGGED_IN"))},children:"Review"})]}):null,(0,F.jsxs)("div",{className:"book__data__container__desc__tabs__data__reviews",children:[function(e){var t=[];return(0,S.vd)(e)&&e.forEach((function(e){return t.push((0,F.jsxs)("div",{className:"book__data__container__desc__tabs__data__reviews__item",children:[(0,F.jsx)("div",{className:"book__data__container__desc__tabs__data__reviews__item__header__head typo__head typo__head--6",children:e.title}),(0,F.jsxs)("div",{className:"book__data__container__desc__tabs__data__reviews__item__header",children:[(0,F.jsx)(w.Z,{rating:e.rating,size:"small"}),(0,F.jsx)("div",{className:"book__data__container__desc__tabs__data__reviews__item__header__time typo__color--n500",children:p()(e.reviewed_at).format("D MMM, YYYY")})]}),(0,F.jsx)("div",{className:"book__data__container__desc__tabs__data__reviews__item__body typo__body typo__body--2",children:e.body})]}))})),t}(ot),0===(null===ot||void 0===ot?void 0:ot.length)?(0,F.jsx)("div",{className:"book__data__container__desc__tabs__data__empty",children:"No Reviews"}):""]})]});case"TAB03":return(0,F.jsxs)(v.Fragment,{children:[(0,S.fb)(bt)||!Ae&&!ke?null:(0,F.jsxs)("div",{className:"book__data__container__desc__tabs__data__action",children:[(0,F.jsx)("div",{className:"book__data__container__desc__tabs__data__action__icon",children:(0,F.jsx)(ee.r,{width:32,height:32,stroke:"currentColor"})}),(0,F.jsx)("div",{className:"book__data__container__desc__tabs__data__action__label typo__head--6",children:"Write a Quote"}),(0,F.jsx)(N.Z,{type:"primary",onClick:function(){return s(_?(0,C.K4)(C.D4):(0,U.e1)("NOT_LOGGED_IN"))},children:"Quote"})]}),(0,F.jsxs)("div",{className:"book__data__container__desc__tabs__data__quotes",children:[function(e){var t=[];return e.forEach((function(e,a){t.push((0,F.jsxs)("div",{className:"book__data__container__desc__tabs__data__quotes__item",children:[(0,F.jsx)("div",{className:"book__data__container__desc__tabs__data__quotes__item__icon",children:(0,F.jsx)(Q.r,{width:32,height:32,fill:"currentColor"})}),(0,F.jsx)("div",{className:"book__data__container__desc__tabs__data__quotes__item__body typo__body",children:e.body}),(0,F.jsx)("div",{className:"book__data__container__desc__tabs__data__quotes__item__time typo__cap typo__cap--2",children:p()(e.created_at).format("D MMM, YYYY")||"-"})]},a))})),t}(vt),0===(null===vt||void 0===vt?void 0:vt.length)?(0,F.jsx)("div",{className:"book__data__container__desc__tabs__data__empty",children:"No Quotes"}):""]})]})}}()})]})]})]})]})]}),(0,F.jsx)(q,{data:Me,onOldBookPurchase:function(e){return function(e){(0,T.Z)("event_book_purchase_old"),Ut()&&(re(!0),g.Z.buyListedCover(e.order_id,e.price,b.smartAccount.signer).then((function(t){f()({url:Y._+"/api/book/purchase/secondary",method:"POST",data:{newOwnerAddress:B,previousOwnerAddress:e.previous_owner,bookAddress:e.book_address,tokenId:e.token_id,purchasePrice:e.price,orderId:e.order_id,daScore:e.da_score}}).then((function(e){200===e.status?(s((0,C.VG)()),ye(!0)):s((0,U.e1)("NOT200"))})).catch((function(e){s((0,U.e1)("ERROR"))})).finally((function(){return re(!1)}))})).catch((function(e){re(!1)})))}(e)}}),(0,F.jsx)(E.Z,{book:me,userCopy:Ee,onListHandler:function(e){return function(e){(0,T.Z)("event_book_list"),(0,S.fb)(B)&&(re(!0),g.Z.listBookToMarketplace(me.book_address,Ee.token_id,e,b.smartAccount.signer).then((function(t){re(!0);var a=parseInt(t.events.filter((function(e){return"CoverListed"===e.event}))[0].args[0]._hex);f()({url:Y._+"/api/book/list",method:"POST",data:{ownerAddress:B,bookAddress:me.book_address,bookPrice:e,bookOrderId:a,bookTokenId:Ee.token_id}}).then((function(e){200===e.status?(ge(!0),s((0,C.VG)()),s((0,U.e1)({show:!0,message:"Book listed on marketplace.",type:1})),e.data&&(Be(e.data),s((0,C.K4)(C.Sh)))):s((0,U.e1)("NOT200"))})).catch((function(e){s((0,U.e1)("ERROR"))})).finally((function(){re(!1)}))})).catch((function(e){(0,S.fb)(e.reason)?e.reason.includes("Can't list the cover at this time")?s((0,U.e1)({show:!0,message:"Please wait for some more time before listing the book.",type:3})):e.reason.includes("Listing for this book is disabled")?s((0,U.e1)({show:!0,message:"Listing this book is not allowed right now. Please try again later.",type:3})):e.reason.includes("Seller should own the NFT to list")&&s((0,U.e1)({show:!0,message:"Book is already listed. Please contact us on support@nalnda.com",type:3})):s((0,U.e1)("ERROR"))})).finally((function(){return re(!1)})))}(e)}}),(0,F.jsx)(R.Z,{ReviewForm:ut,setReviewForm:ht,reviewHandler:function(){(0,T.Z)("event_book_review"),(0,S.fb)(B)?(0,S.UE)(ut.body)&&(0,S.UE)(ut.rating)&&(0,S.UE)(ut.title)?(re(!0),f()({url:"".concat(Y._,"/api/book/reviews"),method:"POST",data:{review:(0,c.Z)({},ut),bookAddress:me.book_address,ownerAddress:B}}).then((function(e){200===e.status?(s((0,C.VG)()),Ft(),It()):s((0,U.e1)("NOT200"))})).catch((function(e){re(!1),s((0,U.e1)("ERROR"))}))):s((0,U.e1)({show:!0,message:"Please fill the review.",type:3})):s((0,U.e1)({show:!0,message:"Please login first",type:3}))}}),(0,F.jsx)(O.Z,{QuotesForm:wt,setQuotesForm:Nt,quoteHandler:function(){(0,T.Z)("event_book_quote"),(0,S.fb)(B)?(0,S.UE)(wt.quote)?(re(!0),f()({url:"".concat(Y._,"/api/book/quotes"),method:"POST",data:{quote:{body:wt.quote},bookAddress:me.book_address,ownerAddress:B}}).then((function(e){200===e.status?(s((0,C.VG)()),Dt(),qt()):s((0,U.e1)("NOT200"))})).catch((function(e){re(!1),s((0,U.e1)("ERROR"))}))):s((0,U.e1)({show:!0,message:"Please enter the quote.",type:3})):s((0,U.e1)({show:!0,message:"Please login first",type:3}))}}),(0,F.jsx)(Z.Z,{bookID:Ge})]}):null]})]})}}}]);
//# sourceMappingURL=300.64e08657.chunk.js.map