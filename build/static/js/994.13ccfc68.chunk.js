"use strict";(self.webpackChunkmarketplace=self.webpackChunkmarketplace||[]).push([[994],{3994:function(e,a,t){t.r(a),t.d(a,{default:function(){return W}});var _=t(1413),s=t(5861),o=t(885),n=t(7757),r=t.n(n),i=t(4569),c=t.n(i),d=t(2426),l=t.n(d),u=t(6030),h=t(6871),m=t(2791),f=t(1634),b=t(733),p=t(4254),k=t(5454),y=t(709),v=t(5807),x=t(6472),j=t(7107),w=t(9018),N=t(5899),g=t(9316),E=t(4127),R=t(7928),Z=t(9135),O=t(5843),T=t(184),S=function(e){var a=e.onOldBookPurchase,t=e.data,_=(0,u.I0)(),s=(0,u.v9)((function(e){return e.ModalState})),n=(0,m.useState)(!1),r=(0,o.Z)(n,2),i=r[0],c=r[1],d=(0,m.useState)([]),l=(0,o.Z)(d,2),h=l[0],f=l[1],b=(0,m.useState)(!1),p=(0,o.Z)(b,2),k=p[0];p[1];return(0,m.useEffect)((function(){window.document.documentElement.style.overflowY=i?"hidden":"auto"}),[i]),(0,m.useEffect)((function(){_(k?(0,E.yh)():(0,E.v3)())}),[k,_]),(0,m.useEffect)((function(){!0===s.show&&s.type===R.m0?((0,N.Z)("modal_view_purchase"),c(!0)):c(!1)}),[s]),(0,m.useEffect)((function(){if(!0===i&&(0,g.fb)(t)){var e=[];e.push(t),f(e)}}),[i,t]),(0,T.jsx)(w.Z,{show:i,children:(0,T.jsxs)("div",{className:function(){var e=["purchase purchase__wrapper"];return i?e.push("purchase__wrapper--open"):e.push("purchase__wrapper--close"),e.join(" ")}(),children:[(0,T.jsx)("div",{className:"purchase__wrapper__header",children:(0,T.jsx)("div",{className:"purchase__wrapper__header__close-button",children:(0,T.jsx)("div",{onClick:function(){return c(!1)},children:(0,T.jsx)(Z.r,{width:20,height:20})})})}),(0,T.jsx)("div",{className:"purchase__wrapper__content",children:(0,T.jsx)("div",{className:"purchase__wrapper__content__options",children:(0,g.vd)(h)?(0,T.jsxs)("div",{className:"purchase__wrapper__content__options__item",onClick:function(){a(t)},children:[(0,T.jsx)("p",{className:"typo__body utils__d__flex typo__align--center",children:"Buy Copy at"}),(0,T.jsx)("h5",{className:"typo__head typo__head--4 typo__transform--upper utils__d__flex utils__align__center",children:0===t.price?"FREE":(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("img",{src:"https://imagedelivery.net/yOWneHxM1h9mu46Te3Yjwg/59c27d12-e4eb-4f74-7a6e-b33ba6537600/icon48",style:{width:32,height:32,objectFit:"contain"},alt:"USDC"}),"\xa0",t.price]})})]}):(0,T.jsxs)("div",{className:"purchase__wrapper__content__options__item",children:[(0,T.jsx)("p",{className:"typo__body utils__d__flex typo__align--center",children:"No old copies available yet."}),(0,T.jsxs)("h5",{className:"typo__head typo__head--4 typo__transform--upper utils__d__flex utils__align__center",children:["\xa0",(0,T.jsx)(O.r,{height:32,width:32})]})]})})})]})})},A=t(2043),C=t(5248),G=t(6026),P=t(4643),B=t(7793),F=t(5897),M=t(3358),Y=t(8465),D=t(3653),q=t(116),I=t(6744),L=t(7445),U=t(4998),z=t(8079),W=function(e){var a=[{id:"TAB01",label:"Synopsis",icon:(0,T.jsx)(I.r,{})},{id:"TAB02",label:"reviews",icon:(0,T.jsx)(L.r,{})},{id:"TAB03",label:"quotes",icon:(0,T.jsx)(U.r,{})}],t=(0,h.UO)(),n=(0,u.I0)(),i=(0,h.s0)(),d=(0,B.Z)(),w=(0,u.v9)((function(e){return e.UserState})),Z=(0,u.v9)((function(e){return e.WalletState})),O=(0,m.useState)(null),W=(0,o.Z)(O,2),K=W[0],H=W[1],V=(0,m.useState)(!1),Q=(0,o.Z)(V,2),J=Q[0],X=Q[1],$=(0,m.useState)("TAB01"),ee=(0,o.Z)($,2),ae=ee[0],te=ee[1],_e=(0,m.useState)(null),se=(0,o.Z)(_e,2),oe=se[0],ne=se[1],re=(0,m.useState)(null),ie=(0,o.Z)(re,2),ce=ie[0],de=ie[1],le=(0,m.useState)(null),ue=(0,o.Z)(le,2),he=ue[0],me=ue[1],fe=(0,m.useState)(null),be=(0,o.Z)(fe,2),pe=be[0],ke=be[1],ye=(0,m.useState)(null),ve=(0,o.Z)(ye,2),xe=ve[0],je=ve[1],we=(0,m.useState)(null),Ne=(0,o.Z)(we,2),ge=Ne[0],Ee=Ne[1],Re=(0,m.useState)(null),Ze=(0,o.Z)(Re,2),Oe=Ze[0],Te=Ze[1],Se=(0,m.useState)(0),Ae=(0,o.Z)(Se,2),Ce=Ae[0],Ge=Ae[1],Pe=(0,m.useState)(!1),Be=(0,o.Z)(Pe,2),Fe=Be[0],Me=Be[1],Ye=(0,m.useState)(0),De=(0,o.Z)(Ye,2),qe=De[0],Ie=De[1],Le=(0,m.useState)(null),Ue=(0,o.Z)(Le,2),ze=Ue[0],We=Ue[1],Ke=(0,m.useState)([]),He=(0,o.Z)(Ke,2),Ve=He[0],Qe=He[1],Je=(0,m.useState)(0),Xe=(0,o.Z)(Je,2),$e=Xe[0],ea=Xe[1],aa=(0,m.useState)({title:"",body:"",rating:0}),ta=(0,o.Z)(aa,2),_a=ta[0],sa=ta[1],oa=(0,m.useState)(null),na=(0,o.Z)(oa,2),ra=na[0],ia=na[1],ca=(0,m.useState)([]),da=(0,o.Z)(ca,2),la=da[0],ua=da[1],ha=(0,m.useState)({quote:""}),ma=(0,o.Z)(ha,2),fa=ma[0],ba=ma[1],pa=(0,m.useState)(0),ka=(0,o.Z)(pa,2),ya=ka[0],va=ka[1],xa=(0,m.useState)(0),ja=(0,o.Z)(xa,2),wa=ja[0],Na=ja[1],ga=(0,m.useRef)();(0,m.useEffect)((function(){(0,N.Z)("page_view_book")}),[]),(0,m.useEffect)((function(){"TAB01"===ae?(0,N.Z)("tab_view_book_synopsis"):"TAB02"===ae?(0,N.Z)("tab_view_book_reviews"):(0,N.Z)("tab_view_book_quotes")}),[ae]),(0,m.useEffect)((function(){(0,g.fb)(oe)&&me(1===oe.listed)}),[oe]);var Ea=(0,m.useCallback)((function(){(0,g.fb)(oe)&&(X(!0),c()({url:"".concat(C._,"/api/book/reviews"),method:"GET",params:{bookAddress:oe.book_address}}).then((function(e){200===e.status?(Qe(e.data.reviews),Ie(e.data.rating),ea(e.data.total)):n((0,P.e1)("NOT200"))})).catch((function(e){n((0,P.e1)("ERROR"))})).finally((function(){return X(!1)})))}),[oe,n]),Ra=(0,m.useCallback)((function(){(0,g.fb)(oe)&&(0,g.fb)(K)&&(X(!0),c()({url:"".concat(C._,"/api/book/reviewed"),method:"GET",params:{bookAddress:oe.book_address,ownerAddress:K}}).then((function(e){200===e.status&&(0,g.UE)(e.data)&&We(e.data)})).catch((function(e){n((0,P.e1)("ERROR"))})).finally((function(){return X(!1)})))}),[oe,K,n]),Za=(0,m.useCallback)((function(){(0,g.fb)(oe)&&(X(!0),c()({url:"".concat(C._,"/api/book/quotes"),method:"GET",params:{bookAddress:oe.book_address}}).then((function(e){200===e.status?ua(e.data):n((0,P.e1)("NOT200"))})).catch((function(e){n((0,P.e1)("ERROR"))})).finally((function(){return X(!1)})))}),[oe,n]),Oa=(0,m.useCallback)((function(){(0,g.fb)(oe)&&(0,g.fb)(K)&&(X(!0),c()({url:"".concat(C._,"/api/book/quoted"),method:"GET",params:{bookAddress:oe.book_address,ownerAddress:K}}).then((function(e){200===e.status&&(0,g.UE)(e.data)&&ia(e.data)})).catch((function(e){n((0,P.e1)("ERROR"))})).finally((function(){return X(!1)})))}),[oe,K,n]);(0,m.useEffect)((function(){Ea()}),[Ea]),(0,m.useEffect)((function(){Ra()}),[Ra]),(0,m.useEffect)((function(){Za()}),[Za]),(0,m.useEffect)((function(){Oa()}),[Oa]),(0,m.useEffect)((function(){(0,g.fb)(oe)&&(X(!0),c()({url:"".concat(C._,"/api/book/likes"),method:"GET",params:{bookAddress:oe.book_address}}).then((function(e){200===e.status?Ge(e.data.likes):n((0,P.e1)("NOT200"))})).catch((function(e){n((0,P.e1)("ERROR"))})).finally((function(){return X(!1)})))}),[oe,n]),(0,m.useEffect)((function(){(0,g.fb)(oe)&&(0,g.fb)(K)&&(X(!0),c()({url:"".concat(C._,"/api/book/liked"),method:"GET",params:{bookAddress:oe.book_address,ownerAddress:K}}).then((function(e){200===e.status&&Me(e.data.liked)})).catch((function(e){n((0,P.e1)("ERROR"))})).finally((function(){return X(!1)})))}),[oe,K,n]),(0,m.useEffect)((function(){(0,g.fb)(oe)&&(X(!0),c()({url:"".concat(C._,"/api/reader/count"),method:"GET",params:{bookAddress:oe.book_address}}).then((function(e){200===e.status&&va(e.data.reader_count)})).catch((function(e){n((0,P.e1)("ERROR"))})).finally((function(){return X(!1)})))}),[oe,n]),(0,m.useEffect)((function(){(0,g.fb)(oe)&&(X(!0),c()({url:"".concat(C._,"/api/reader/total-read-time"),method:"GET",params:{bookAddress:oe.book_address}}).then((function(e){200===e.status&&Na(e.data.total_read_time)})).catch((function(e){n((0,P.e1)("ERROR"))})).finally((function(){return X(!1)})))}),[oe,n]),(0,m.useEffect)((function(){X(!0),(0,g.fb)(Z.wallet.provider)&&H(Z.wallet.address),X(!1)}),[Z]),(0,m.useEffect)((function(){(0,g.fb)(ze)&&sa({title:ze.title,body:ze.body,rating:ze.rating})}),[ze]),(0,m.useEffect)((function(){var e=t.bookID;c()({url:"".concat(C._,"/api/book/listedbook"),method:"GET",params:{bookID:e}}).then((function(e){ne(e.data.book),Te(e.data.secondary_book)}))}),[t]),(0,m.useEffect)((function(){if((0,g.fb)(K)){X(!0);var e=oe;e.new_owner===K?de(!0):de(!1),e.publisher_address===K?je(!0):je(!1),c()({url:C._+"/api/book/owner",method:"GET",params:{ownerAddress:K,bookAddress:e.book_address}}).then((function(e){200===e.status&&de(!0)})).catch((function(e){})).finally((function(){return X(!1)}))}}),[oe,t,n,K]),(0,m.useEffect)((function(){(0,g.fb)(oe)&&(0,g.fb)(xe)&&(0,g.fb)(ce)&&X(!1)}),[oe,xe,ce]),(0,m.useEffect)((function(){n(J?(0,E.yh)():(0,E.v3)())}),[J,n]),(0,m.useEffect)((function(){var e=document.getElementById("BOOK_PAGE_"+ae);(0,g.fb)(e)&&(0,g.fb)(ga.current)&&ga.current.style.setProperty("--marker-x",e.offsetLeft)}),[ae]),(0,m.useEffect)((function(){ce&&c()({url:"".concat(C._,"/api/user/book"),method:"GET",headers:{"user-id":w.user.uid,address:Z.wallet.address,authorization:"Bearer ".concat(w.tokens.acsTkn.tkn)},params:{walletAddress:Z.wallet.address,bookAddress:oe.book_address}}).then((function(e){200===e.status?(ke(e.data),me(e.data.listed)):n((0,P.e1)("NOT200"))})).catch((function(e){n((0,P.e1)("ERROR"))}))}),[ce,w,Z,n,oe]);var Ta=function(){if((0,g.fb)(Z.support)&&!0===Z.support&&(0,g.fb)(Z.wallet.provider))return H(Z.wallet.address),!0;X(!0),A.Z.connectWallet().then((function(e){return n((0,G.kH)({wallet:e.wallet,provider:e.provider,signer:e.signer,address:e.address})),H(e.address),n((0,P.e1)({show:!0,message:"Wallet connected.",type:1})),!0})).catch((function(e){return n((0,P.e1)({show:!0,message:"Error while connecting to wallet",type:4})),!1})).finally((function(){return X(!1)}))},Sa=function(){var e=(0,s.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,N.Z)("event_book_read"),X(!0);try{c()({url:"".concat(C._,"/api/verify"),method:"GET",params:{bookAddress:oe.book_address,ownerAddress:K}}).then((function(e){if(200===e.status){var a=e.data;A.Z.signMessage(Z.wallet.signer,JSON.stringify(a)).then((function(e){!0===e.isValid?c()({url:C._+"/api/verify",method:"POST",headers:{address:Z.wallet.address,"user-id":w.user.uid,authorization:"Bearer ".concat(w.tokens.acsTkn.tkn)},data:{accountAddress:K,bookAddress:oe.book_address,signedData:e.signedData,cid:oe.book.slice(oe.book.lastIndexOf("/")+1)}}).then((function(e){200===e.status?((0,N.Z)("navigate_book_reader"),i("/library/reader",{state:{book:(0,_.Z)((0,_.Z)({},oe),{},{url:e.data.url}),preview:!1}})):n((0,P.e1)({show:!0,message:"Error",type:4}))})).catch((function(e){n((0,P.e1)("ERROR"))})).finally((function(){return X(!1)})):n((0,P.e1)({show:!0,message:"Could not verify the authenticity of the signature.",type:3}))}))}else n((0,P.e1)("NOT200"))}))}catch(a){X(!1)}case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,T.jsxs)(f.Z,{children:[(0,T.jsx)("div",{className:"book__bg",children:(0,T.jsx)("img",{src:F.Z,alt:"background",loading:"lazy"})}),(0,g.fb)(oe)?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("div",{className:"book__data",children:[(0,T.jsx)("div",{className:"book__data__background"}),(0,T.jsxs)("div",{className:"book__data__container",children:[(0,T.jsxs)("div",{children:[(0,T.jsx)("div",{className:"book__data__container__cover",children:(0,T.jsx)("img",{className:"book__data__container__cover__image",src:oe.cover_display_url?oe.cover_display_url:oe.cover_public_url?oe.cover_public_url:oe.cover,alt:oe.name})}),(0,T.jsxs)("div",{className:"book__data__container__meta",children:[(0,T.jsx)("h3",{className:"typo__color--n700 typo__head typo__head--3 typo__transform--capital",children:oe.title}),(0,T.jsx)("h5",{className:"typo__color--n500 typo__head typo__head--6 typo__transform--upper",children:oe.author}),ce||xe?null:(0,T.jsx)("div",{className:"book__data__container__meta__price typo-head--6 typo__act typo__color--success",children:0===Oe.price?"FREE":(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("img",{src:"https://imagedelivery.net/yOWneHxM1h9mu46Te3Yjwg/59c27d12-e4eb-4f74-7a6e-b33ba6537600/icon48",style:{width:20,height:20,objectFit:"contain"},alt:"USDC"}),"\xa0",Oe.price]})}),(0,T.jsxs)("div",{className:"book__data__container__meta__rating",children:[(0,T.jsx)("div",{className:"book__data__container__meta__rating__stars",children:(0,T.jsx)(p.Z,{size:"small",rating:qe})}),(0,T.jsxs)("div",{className:"book__data__container__meta__rating__count typo__body",children:[$e," reviews"]})]}),(0,T.jsx)("div",{className:"book__data__container__meta__cta",children:he?(0,T.jsx)(k.Z,{type:"primary",size:"lg",onClick:function(){return(0,N.Z)("event_book_unlist"),void((0,g.fb)(K)&&(X(!0),c()({url:C._+"/api/user/book/listed",method:"GET",headers:{"user-id":w.user.uid,authorization:"Bearer ".concat(w.tokens.acsTkn.tkn)},params:{ownerAddress:K,tokenId:pe.token_id,bookAddress:oe.book_address}}).then((function(e){if(200===e.status){X(!0);var a=e.data.order_id;b.Z.unlistBookFromMarketplace(a,Z.wallet.signer).then((function(e){X(!0),c()({url:C._+"/api/book/unlist",method:"POST",data:{ownerAddress:K,bookAddress:oe.book_address}}).then((function(e){200===e.status?(me(!1),n((0,R.VG)()),n((0,P.e1)({show:!0,message:"Book unlisted from marketplace.",type:1})),i("/")):n((0,P.e1)("NOT200"))})).catch((function(e){n((0,P.e1)("ERROR"))})).finally((function(){X(!1)}))})).catch((function(e){X(!1),(0,g.fb)(e.reason)?e.reason.includes("NFT not yet listed / already sold")&&n((0,P.e1)({show:!0,message:"eBook already sold or not listed.",type:3})):n((0,P.e1)("ERROR"))}))}else n((0,P.e1)("NOT200"))})).catch((function(e){X(!1),n((0,P.e1)("ERROR"))}))))},children:"Unlist"}):xe?(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(k.Z,{type:"primary",size:"lg",onClick:function(){return Sa()},children:"Read"})}):ce?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(k.Z,{type:"primary",size:"lg",onClick:function(){return Sa()},children:"Read"}),(0,T.jsx)(k.Z,{onClick:function(){return n((0,R.K4)(R.gG)),void(l()(oe.secondary_sales_from).isSame(l()())||l()(oe.secondary_sales_from).isBefore(l()())?n((0,R.K4)(R.gG)):l()(oe.secondary_sales_from).isAfter(l()())&&n((0,P.e1)({show:!0,message:"Secondary Sales will open only after ".concat(l()(oe.secondary_sales_from).format("D MMM, YYYY"),"."),type:2})))},children:"List"})]}):(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(k.Z,{type:"primary",size:"lg",onClick:function(){return n(d?(0,R.K4)(R.m0):(0,P.e1)("NOT_LOGGED_IN"))},children:"Buy Now"}),(0,T.jsx)(k.Z,{onClick:function(){return(0,N.Z)("navigate_book_preview"),void i("/book/preview",{state:{book:oe,preview:!0}})},children:"Preview"})]})})]})]}),(0,T.jsxs)("div",{className:"book__data__container__desc",children:[(0,T.jsx)("div",{className:"book__data__container__desc__left",children:(0,T.jsxs)("div",{className:"book__data__container__desc__summary",children:[(0,T.jsxs)("div",{className:"book__data__container__desc__summary__contract",children:[(0,T.jsxs)("div",{className:"book__data__container__desc__summary__contract__data",children:[(0,T.jsx)("div",{className:"book__data__container__desc__summary__contract__label typo__color--n700",children:"Contract Address"}),(0,T.jsxs)("div",{className:"book__data__container__desc__summary__contract__value typo__color--n500",onClick:function(){return window.open("https://mumbai.polygonscan.com/address/".concat(oe.book_address),"_blank")},children:[(oe.book_address||"").slice(0,12),"\u2026",(oe.book_address||"").slice((oe.contract||"").length-10)]})]}),(0,T.jsx)("div",{className:"book__data__container__desc__summary__contract__icon",children:(0,T.jsx)(z.r,{width:24,height:24})})]}),(0,T.jsx)("div",{className:"book__data__container__desc__summary__head typo__color--n700",children:"DA Score"}),(0,T.jsx)("div",{className:"book__data__container__desc__summary__data",children:Oe.da_score}),(0,T.jsx)("div",{className:"book__data__container__desc__summary__head typo__color--n700",children:"Token ID"}),(0,T.jsx)("div",{className:"book__data__container__desc__summary__data",children:Oe.token_id}),(0,T.jsx)("div",{className:"book__data__container__desc__summary__head typo__color--n700",children:"Genres"}),(0,T.jsx)("div",{className:"book__data__container__desc__summary__chips typo__transform--capital",children:JSON.parse(oe.genres).map((function(e){return(0,T.jsx)("div",{className:"book__data__container__desc__summary__chips__item",children:e})}))}),(0,T.jsx)("div",{className:"book__data__container__desc__summary__head typo__color--n700",children:"Prefered Age Group"}),(0,T.jsx)("div",{className:"book__data__container__desc__summary__chips typo__transform--capital",children:JSON.parse(oe.age_group).map((function(e){return(0,T.jsx)("div",{className:"book__data__container__desc__summary__chips__item",children:e})}))}),(0,T.jsx)("div",{className:"book__data__container__desc__summary__head typo__color--n700",children:"Language"}),(0,T.jsx)("div",{className:"book__data__container__desc__summary__data",children:oe.language}),(0,T.jsx)("div",{className:"book__data__container__desc__summary__head typo__color--n700",children:"Price"}),(0,T.jsx)("div",{className:"book__data__container__desc__summary__data utils__d__flex utils__align__center",children:0===Oe.price?"FREE":(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("img",{src:"https://imagedelivery.net/yOWneHxM1h9mu46Te3Yjwg/59c27d12-e4eb-4f74-7a6e-b33ba6537600/icon48",style:{width:20,height:20,objectFit:"contain"},alt:"USDC"}),"\xa0",Oe.price]})}),(0,T.jsx)("div",{className:"book__data__container__desc__summary__head typo__color--n700",children:"Published On"}),(0,T.jsx)("div",{className:"book__data__container__desc__summary__data",children:l()(oe.publication_date).add(6,"h").format("D MMM, YYYY")}),(0,T.jsx)("div",{className:"book__data__container__desc__summary__head typo__color--n700",children:"Live Readers"}),(0,T.jsxs)("div",{className:"book__data__container__desc__summary__data",children:[ya," people reading"]}),(0,T.jsx)("div",{className:"book__data__container__desc__summary__head typo__color--n700",children:"Total Read Time"}),(0,T.jsxs)("div",{className:"book__data__container__desc__summary__data",children:[Math.ceil(wa/60)," minutes"]})]})}),(0,T.jsxs)("div",{className:"book__data__container__desc__right",children:[(0,T.jsxs)("div",{className:"book__data__container__desc__interacts",children:[(0,T.jsxs)("div",{className:"book__data__container__desc__interacts__item",children:[(0,T.jsx)("div",{className:"typo__subtitle typo__color--n500",children:"Likes"}),(0,T.jsx)(M.r,{width:24,height:24,className:"book__data__container__desc__interacts__item__icon",stroke:Fe?"#ff5722":"currentColor",fill:Fe?"#ff5722":"transparent",onClick:function(){Ta()?ce?(Fe?(Ge((function(e){return e-1})),(0,N.Z)("event_book_unlike")):(Ge((function(e){return e+1})),(0,N.Z)("event_book_like")),c()({url:"".concat(C._,"/api/book/likes"),method:"POST",data:{bookAddress:oe.book_address,ownerAddress:K,likedState:!Fe}}).then((function(e){200===e.status?Me((function(e){return!e})):n((0,P.e1)("NOT200"))})).catch((function(e){n((0,P.e1)("ERROR"))})).finally((function(){return X(!1)}))):n((0,P.e1)({show:!0,message:"Only owners can like a book.",type:3})):n((0,P.e1)({show:!0,message:"Please login first.",type:3}))}}),(0,T.jsx)("div",{className:"typo__head--5 typo__color--n600",children:Ce||"0"})]}),(0,T.jsxs)("div",{className:"book__data__container__desc__interacts__item",children:[(0,T.jsx)("div",{className:"typo__subtitle typo__color--n500",children:"Reviews"}),(0,T.jsx)(L.r,{width:24,height:24,stroke:"currentColor"}),(0,T.jsx)("div",{className:"typo__head--5 typo__color--n600",children:$e||"0"})]}),(0,T.jsxs)("div",{className:"book__data__container__desc__interacts__item",children:[(0,T.jsx)("div",{className:"typo__subtitle typo__color--n500",children:"Pages"}),(0,T.jsx)(Y.r,{width:24,height:24,stroke:"currentColor"}),(0,T.jsx)("div",{className:"typo__head--5 typo__color--n600",children:oe.print||"00"})]}),(0,T.jsxs)("div",{className:"book__data__container__desc__interacts__item",children:[(0,T.jsx)("div",{className:"typo__subtitle typo__color--n500",children:"Sold"}),(0,T.jsx)(q.r,{width:24,height:24,stroke:"currentColor"}),(0,T.jsx)("div",{className:"typo__head--5 typo__color--n600",children:oe.copies||"00"})]})]}),(0,T.jsxs)("div",{className:"book__data__container__desc__tabs",children:[(0,T.jsx)("div",{ref:ga,className:"book__data__container__desc__tabs__container",children:function(){var e=[];return a.forEach((function(a){e.push((0,T.jsxs)("div",{onClick:function(){return te(a.id)},id:"BOOK_PAGE_"+a.id,className:a.id===ae?"book__data__container__desc__tabs__container__item book__data__container__desc__tabs__container__item--active":"book__data__container__desc__tabs__container__item utils__cursor--pointer",children:[(0,g.fb)(a.icon)&&a.icon,(0,T.jsx)("h5",{className:"typo__head typo__head--6 typo__transform--capital",children:a.label})]},a.id))})),e}()}),(0,T.jsx)("div",{className:"book__data__container__desc__tabs__data",children:function(){switch(ae){case"TAB01":return(0,T.jsx)("p",{className:"typo--break-spaces typo__body typo__color--n600",children:oe.synopsis});case"TAB02":return(0,T.jsxs)(m.Fragment,{children:[!(0,g.fb)(ze)&&ce?(0,T.jsxs)("div",{className:"book__data__container__desc__tabs__data__action",children:[(0,T.jsx)("div",{className:"book__data__container__desc__tabs__data__action__icon",children:(0,T.jsx)(L.r,{width:32,height:32,stroke:"currentColor"})}),(0,T.jsx)("div",{className:"book__data__container__desc__tabs__data__action__label typo__head--6",children:"Write a Review"}),(0,T.jsx)(k.Z,{type:"primary",onClick:function(){return n(d?(0,R.K4)(R.wW):(0,P.e1)("NOT_LOGGED_IN"))},children:"Review"})]}):null,(0,T.jsxs)("div",{className:"book__data__container__desc__tabs__data__reviews",children:[function(e){var a=[];return(0,g.vd)(e)&&e.forEach((function(e){return a.push((0,T.jsxs)("div",{className:"book__data__container__desc__tabs__data__reviews__item",children:[(0,T.jsx)("div",{className:"book__data__container__desc__tabs__data__reviews__item__header__head typo__head typo__head--6",children:e.title}),(0,T.jsxs)("div",{className:"book__data__container__desc__tabs__data__reviews__item__header",children:[(0,T.jsx)(p.Z,{rating:e.rating,size:"small"}),(0,T.jsx)("div",{className:"book__data__container__desc__tabs__data__reviews__item__header__time typo__color--n500",children:l()(e.reviewed_at).format("D MMM, YYYY")})]}),(0,T.jsx)("div",{className:"book__data__container__desc__tabs__data__reviews__item__body typo__body typo__body--2",children:e.body})]}))})),a}(Ve),0===(null===Ve||void 0===Ve?void 0:Ve.length)?(0,T.jsx)("div",{className:"book__data__container__desc__tabs__data__empty",children:"No Reviews"}):""]})]});case"TAB03":return(0,T.jsxs)(m.Fragment,{children:[(0,g.fb)(ra)||!xe&&!ce?null:(0,T.jsxs)("div",{className:"book__data__container__desc__tabs__data__action",children:[(0,T.jsx)("div",{className:"book__data__container__desc__tabs__data__action__icon",children:(0,T.jsx)(U.r,{width:32,height:32,stroke:"currentColor"})}),(0,T.jsx)("div",{className:"book__data__container__desc__tabs__data__action__label typo__head--6",children:"Write a Quote"}),(0,T.jsx)(k.Z,{type:"primary",onClick:function(){return n(d?(0,R.K4)(R.D4):(0,P.e1)("NOT_LOGGED_IN"))},children:"Quote"})]}),(0,T.jsxs)("div",{className:"book__data__container__desc__tabs__data__quotes",children:[function(e){var a=[];return e.forEach((function(e,t){a.push((0,T.jsxs)("div",{className:"book__data__container__desc__tabs__data__quotes__item",children:[(0,T.jsx)("div",{className:"book__data__container__desc__tabs__data__quotes__item__icon",children:(0,T.jsx)(D.r,{width:32,height:32,fill:"currentColor"})}),(0,T.jsx)("div",{className:"book__data__container__desc__tabs__data__quotes__item__body typo__body",children:e.body}),(0,T.jsx)("div",{className:"book__data__container__desc__tabs__data__quotes__item__time typo__cap typo__cap--2",children:l()(e.created_at).format("D MMM, YYYY")||"-"})]},t))})),a}(la),0===(null===la||void 0===la?void 0:la.length)?(0,T.jsx)("div",{className:"book__data__container__desc__tabs__data__empty",children:"No Quotes"}):""]})]})}}()})]})]})]})]})]}),(0,T.jsx)(S,{data:Oe,onOldBookPurchase:function(e){return function(e){(0,N.Z)("event_book_purchase_old"),Ta()&&(X(!0),b.Z.buyListedCover(e.order_id,e.price,Z.wallet.signer).then((function(a){c()({url:C._+"/api/book/purchase/secondary",method:"POST",data:{newOwnerAddress:K,previousOwnerAddress:e.previous_owner,bookAddress:e.book_address,tokenId:e.token_id,purchasePrice:e.price,orderId:e.order_id,daScore:e.da_score}}).then((function(e){200===e.status?(n((0,R.VG)()),de(!0)):n((0,P.e1)("NOT200"))})).catch((function(e){n((0,P.e1)("ERROR"))})).finally((function(){return X(!1)}))})).catch((function(e){X(!1)})))}(e)}}),(0,T.jsx)(y.Z,{book:oe,userCopy:pe,onListHandler:function(e){return function(e){(0,N.Z)("event_book_list"),(0,g.fb)(K)&&(X(!0),b.Z.listBookToMarketplace(oe.book_address,pe.token_id,e,Z.wallet.signer).then((function(a){X(!0);var t=parseInt(a.events.filter((function(e){return"CoverListed"===e.event}))[0].args[0]._hex);c()({url:C._+"/api/book/list",method:"POST",data:{ownerAddress:K,bookAddress:oe.book_address,bookPrice:e,bookOrderId:t,bookTokenId:pe.token_id}}).then((function(e){200===e.status?(me(!0),n((0,R.VG)()),n((0,P.e1)({show:!0,message:"Book listed on marketplace.",type:1})),e.data&&(Ee(e.data),n((0,R.K4)(R.Sh)))):n((0,P.e1)("NOT200"))})).catch((function(e){n((0,P.e1)("ERROR"))})).finally((function(){X(!1)}))})).catch((function(e){(0,g.fb)(e.reason)?e.reason.includes("Can't list the cover at this time")?n((0,P.e1)({show:!0,message:"Please wait for some more time before listing the book.",type:3})):e.reason.includes("Listing for this book is disabled")?n((0,P.e1)({show:!0,message:"Listing this book is not allowed right now. Please try again later.",type:3})):e.reason.includes("Seller should own the NFT to list")&&n((0,P.e1)({show:!0,message:"Book is already listed. Please contact us on support@nalnda.com",type:3})):n((0,P.e1)("ERROR"))})).finally((function(){return X(!1)})))}(e)}}),(0,T.jsx)(x.Z,{ReviewForm:_a,setReviewForm:sa,reviewHandler:function(){(0,N.Z)("event_book_review"),(0,g.fb)(K)?(0,g.UE)(_a.body)&&(0,g.UE)(_a.rating)&&(0,g.UE)(_a.title)?(X(!0),c()({url:"".concat(C._,"/api/book/reviews"),method:"POST",data:{review:(0,_.Z)({},_a),bookAddress:oe.book_address,ownerAddress:K}}).then((function(e){200===e.status?(n((0,R.VG)()),Ra(),Ea()):n((0,P.e1)("NOT200"))})).catch((function(e){X(!1),n((0,P.e1)("ERROR"))}))):n((0,P.e1)({show:!0,message:"Please fill the review.",type:3})):n((0,P.e1)({show:!0,message:"Please login first",type:3}))}}),(0,T.jsx)(v.Z,{QuotesForm:fa,setQuotesForm:ba,quoteHandler:function(){(0,N.Z)("event_book_quote"),(0,g.fb)(K)?(0,g.UE)(fa.quote)?(X(!0),c()({url:"".concat(C._,"/api/book/quotes"),method:"POST",data:{quote:{body:fa.quote},bookAddress:oe.book_address,ownerAddress:K}}).then((function(e){200===e.status?(n((0,R.VG)()),Oa(),Za()):n((0,P.e1)("NOT200"))})).catch((function(e){X(!1),n((0,P.e1)("ERROR"))}))):n((0,P.e1)({show:!0,message:"Please enter the quote.",type:3})):n((0,P.e1)({show:!0,message:"Please login first",type:3}))}}),(0,T.jsx)(j.Z,{bookID:ge})]}):null]})}}}]);
//# sourceMappingURL=994.13ccfc68.chunk.js.map