{"version":3,"file":"static/js/821.e60c21c2.chunk.js","mappings":"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","sources":["components/modal/Purchase/Purchase.jsx","pages/Book.jsx"],"sourcesContent":["import axios from 'axios'\nimport React, { useEffect, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\n\nimport Button from '../../ui/Buttons/Button'\nimport Backdrop from '../../hoc/Backdrop/Backdrop'\n\nimport GaTracker from '../../../trackers/ga-tracker'\n\nimport { setSnackbar } from '../../../store/actions/snackbar'\nimport { isFilled, isUsable } from '../../../helpers/functions'\nimport { hideSpinner, showSpinner } from '../../../store/actions/spinner'\nimport { SHOW_PURCHASE_MODAL } from '../../../store/actions/modal'\n\nimport { ReactComponent as CloseIcon } from \"../../../assets/icons/close-icon.svg\"\nimport { ReactComponent as Error404Icon } from \"../../../assets/icons/error-404.svg\"\n\nimport { BASE_URL } from '../../../config/env'\n\nconst PurchaseModal = ({onOldBookPurchase,onNewBookPurchase,data}) => {\n\n\tconst dispatch = useDispatch()\n\n\tconst UserState = useSelector(state => state.UserState)\n\tconst ModalState = useSelector(state => state.ModalState)\n\n\tconst [Show, setShow] = useState(false)\n\tconst [Offers, setOffers] = useState([])\n\tconst [Loading, setLoading] = useState(false)\n\tconst [ShowOffers, setShowOffers] = useState(0)\n\tconst [ActiveOffer, setActiveOffer] = useState(null)\n\n\tconst renderOffers = () => {\n\t\tlet offersDOM = []\n\t\tif(isFilled(Offers)){\n\t\t\tOffers.forEach(offer => {\n\t\t\t\toffer.previous_owner === ActiveOffer?.previous_owner?\n\t\t\t\t\toffersDOM.push(\n\t\t\t\t\t\t<div className=\"purchase__wrapper__content__offers__item purchase__wrapper__content__offers__item--active\" key={offer.book_address+'-'+offer.order_id}>\n\t\t\t\t\t\t\t<p className='utils__margin__bottom--n utils__d__flex utils__align__center'>Price:&nbsp;{offer.price===0?\"FREE\":<><img src='https://imagedelivery.net/yOWneHxM1h9mu46Te3Yjwg/59c27d12-e4eb-4f74-7a6e-b33ba6537600/icon48' style={{width: 20, height: 20, objectFit: 'contain'}} alt=\"USDC\"/>&nbsp;{isUsable(offer.price)?parseFloat(offer.price).toFixed(2):null}</>}</p>\n\t\t\t\t\t\t\t<p className='utils__margin__bottom--n'>DA Score: {isUsable(offer.da_score)?parseFloat(offer.da_score).toFixed(2):null}</p>\n\t\t\t\t\t\t\t<p className='utils__margin__bottom--n'>Seller: {offer.previous_owner}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t:\n\t\t\t\t\toffersDOM.push(\n\t\t\t\t\t\t<div onClick={()=>setActiveOffer(offer)} className=\"purchase__wrapper__content__offers__item\" key={offer.book_address+'-'+offer.order_id}>\n\t\t\t\t\t\t\t<p className='utils__margin__bottom--n utils__d__flex utils__align__center'>Price:&nbsp;{offer.price===0?\"FREE\":<><img src='https://imagedelivery.net/yOWneHxM1h9mu46Te3Yjwg/59c27d12-e4eb-4f74-7a6e-b33ba6537600/icon48' style={{width: 20, height: 20, objectFit: 'contain'}} alt=\"USDC\"/>&nbsp;{isUsable(offer.price)?parseFloat(offer.price).toFixed(2):null}</>}</p>\n\t\t\t\t\t\t\t<p className='utils__margin__bottom--n'>DA Score: {isUsable(offer.da_score)?parseFloat(offer.da_score).toFixed(2):null}</p>\n\t\t\t\t\t\t\t<p className='utils__margin__bottom--n'>Seller: {offer.previous_owner}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t})\n\t\t}\n\t\tif(offersDOM.length===0) offersDOM.push(<div className=\"typo__color--n600 utils__d__flex utils__justify__center\">No Offers</div>)\n\t\treturn offersDOM\n\t}\n\n\tconst getClasses = () => {\n\t\tlet classes = [\"purchase purchase__wrapper\"]\n\t\tif (Show) classes.push(\"purchase__wrapper--open\")\n\t\telse classes.push(\"purchase__wrapper--close\")\n\t\treturn classes.join(\" \")\n\t}\n\n\tconst getLowestPrice = () => {\n\t\tif(isFilled(Offers)){\n\t\t\tconst offers = Offers.sort((offera, offerb) => {\n\t\t\t\treturn offera.price > offerb.price\n\t\t\t})\n\t\t\treturn parseFloat(offers[0].price).toFixed(2)\n\t\t}\n\t}\n\n\tconst onOldPurchaseHandler = () => {\n\t\tif(isUsable(ActiveOffer))onOldBookPurchase(ActiveOffer)\n\t\telse dispatch(setSnackbar({show: true, message: \"Please select an old copy.\", type: 3}))\n\t}\n\n\tuseEffect(() => {\n\t\twindow.document.documentElement.style.overflowY = Show ? \"hidden\" : \"auto\"\n\t}, [Show])\n\n\tuseEffect(() => {\n\t\tif(Loading) dispatch(showSpinner())\n\t\telse dispatch(hideSpinner())\n\t}, [Loading, dispatch])\n\n\tuseEffect(() => {\n\t\tif(ModalState.show === true && ModalState.type === SHOW_PURCHASE_MODAL){\n\t\t\tGaTracker('modal_view_purchase')\n\t\t\tsetShow(true)\n\t\t}\n\t\telse setShow(false)\n\t}, [ModalState])\n\n\tuseEffect(() => {\n\t\tif(Show === true && isUsable(data)){\n\t\t\taxios({\n\t\t\t\turl: BASE_URL+'/api/book/list',\n\t\t\t\tmethod: 'GET',\n\t\t\t\theaders: {\n\t\t\t\t\t'user-id': UserState.user.uid,\n\t\t\t\t\t'authorization': `Bearer ${UserState.tokens.acsTkn.tkn}`\n\t\t\t\t},\n\t\t\t\tparams: {\n\t\t\t\t\tbookAddress: data.book_address\n\t\t\t\t}\n\t\t\t}).then(res => {\n\t\t\t\tif(res.status === 200) setOffers(res.data)\n\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t}).catch(err => {\n\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t}).finally(() => setLoading(false))\n\t\t}\n\t}, [Show, dispatch, data, UserState])\n\n\treturn (\n\t\t<Backdrop show={Show}>\n\t\t\t<div className={getClasses()}>\n\t\t\t\t<div className=\"purchase__wrapper__header\">\n\t\t\t\t\t<div className=\"purchase__wrapper__header__title typo__head--6 typo__transform--capital\">{data.title.toLowerCase()}</div>\n\t\t\t\t\t<div className=\"purchase__wrapper__header__close-button\">\n\t\t\t\t\t\t<div onClick={()=>setShow(false)}><CloseIcon width={20} height={20}/></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"purchase__wrapper__content\">\n\t\t\t\t\t{ShowOffers?\n\t\t\t\t\t\t<div className=\"purchase__wrapper__content__offers\">\n\t\t\t\t\t\t\t<div className='typo__body typo__body--2 utils__d__flex purchase__wrapper__content__offers__count'>{Offers.length} offer(s) starting from&nbsp;{data.price===0?\"FREE\":<><img src='https://imagedelivery.net/yOWneHxM1h9mu46Te3Yjwg/59c27d12-e4eb-4f74-7a6e-b33ba6537600/icon48' style={{width: 20, height: 20, objectFit: 'contain'}} alt=\"USDC\"/>&nbsp;{getLowestPrice()}</>}</div>\n\t\t\t\t\t\t\t<div className=\"purchase__wrapper__content__offers__list\">\n\t\t\t\t\t\t\t\t{renderOffers()}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"purchase__wrapper__content__offers__cta\">\n\t\t\t\t\t\t\t\t<Button type='secondary' onClick={()=>setShowOffers(false)} className=\"purchase__wrapper__content__offers__cta__button\">Back</Button>\n\t\t\t\t\t\t\t\t<Button type='primary' onClick={()=>onOldPurchaseHandler()} className=\"purchase__wrapper__content__offers__cta__button\">Purchase</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t:\n\t\t\t\t\t\t<div className=\"purchase__wrapper__content__options\">\n\t\t\t\t\t\t\t<div className=\"purchase__wrapper__content__options__item\" onClick={()=>onNewBookPurchase()}>\n\t\t\t\t\t\t\t\t<p className='typo__body utils__d__flex typo__align--center'>Purchase new copy for</p>\n\t\t\t\t\t\t\t\t<h5 className='typo__head typo__head--4 typo__transform--upper utils__d__flex utils__align__center'>{data.price===0?\"FREE\":<><img src='https://imagedelivery.net/yOWneHxM1h9mu46Te3Yjwg/59c27d12-e4eb-4f74-7a6e-b33ba6537600/icon48' style={{width: 32, height: 32, objectFit: 'contain'}} alt=\"USDC\"/>&nbsp;{parseFloat(data.price).toFixed(2)}</>}</h5>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{isFilled(Offers)\n\t\t\t\t\t\t\t\t?\n\t\t\t\t\t\t\t\t<div className=\"purchase__wrapper__content__options__item\" onClick={()=>setShowOffers(true)}>\n\t\t\t\t\t\t\t\t\t<p className='typo__body utils__d__flex typo__align--center'>Old copies start from</p>\n\t\t\t\t\t\t\t\t\t<h5 className='typo__head typo__head--4 typo__transform--upper utils__d__flex utils__align__center'>{data.price===0?\"FREE\":<><img src='https://imagedelivery.net/yOWneHxM1h9mu46Te3Yjwg/59c27d12-e4eb-4f74-7a6e-b33ba6537600/icon48' style={{width: 32, height: 32, objectFit: 'contain'}} alt=\"USDC\"/>&nbsp;{getLowestPrice()}</>}</h5>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<div className=\"purchase__wrapper__content__options__item\">\n\t\t\t\t\t\t\t\t\t<p className='typo__body utils__d__flex typo__align--center'>No old copies available yet.</p>\n\t\t\t\t\t\t\t\t\t<h5 className='typo__head typo__head--4 typo__transform--upper utils__d__flex utils__align__center'>&nbsp;<Error404Icon height={32} width={32}/></h5>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Backdrop>\n\t)\n}\n\nexport default PurchaseModal","import axios from 'axios'\nimport moment from 'moment'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { useParams, useNavigate } from 'react-router'\nimport React, { useCallback, useEffect, useRef, useState } from 'react'\n\nimport Page from '../components/hoc/Page/Page'\n\nimport Contracts from '../connections/contracts'\n\nimport Stars from '../components/ui/Stars/Stars'\nimport Button from '../components/ui/Buttons/Button'\nimport ListModal from '../components/modal/List/List'\nimport QuoteModal from '../components/modal/Quote/QuoteModal'\nimport ReviewModal from '../components/modal/Review/ReviewModal'\nimport PurchaseModal from '../components/modal/Purchase/Purchase'\nimport ShareListModal from '../components/modal/ShareList/ShareList'\n\nimport Wallet from '../connections/wallet'\n\nimport GaTracker from '../trackers/ga-tracker'\nimport { BASE_URL } from '../config/env'\nimport { isFilled, isNotEmpty, isUsable } from '../helpers/functions'\n\nimport { setWallet } from '../store/actions/wallet'\nimport { setSnackbar } from '../store/actions/snackbar'\nimport { hideSpinner, showSpinner } from '../store/actions/spinner'\nimport { hideModal, showModal, SHOW_LIST_MODAL, SHOW_PURCHASE_MODAL, SHOW_QUOTE_MODAL, SHOW_REVIEW_MODAL, SHOW_SHARE_MODAL } from '../store/actions/modal'\n\nimport useIsLoggedIn from '../hook/useIsLoggedIn'\n\nimport BackgroundBook from '../assets/images/background-book.svg'\nimport {ReactComponent as LikeIcon} from '../assets/icons/like.svg'\nimport {ReactComponent as PrintIcon} from \"../assets/icons/print.svg\"\nimport {ReactComponent as QuoteIcon} from \"../assets/icons/quote.svg\"\nimport {ReactComponent as CartIcon} from \"../assets/icons/cart-add.svg\"\nimport {ReactComponent as SynopsisIcon} from \"../assets/icons/text.svg\"\nimport {ReactComponent as ReviewIcon} from \"../assets/icons/message.svg\"\nimport {ReactComponent as BlockQuoteIcon} from \"../assets/icons/block-quote.svg\"\nimport {ReactComponent as ExternalLinkIcon} from \"../assets/icons/external-link.svg\"\nimport {ReactComponent as LanguageIcon} from \"../assets/icons/language.svg\"\nimport {ReactComponent as LiveReadersIcon} from \"../assets/icons/live_readers.svg\"\nimport {ReactComponent as TotalReadTimeIcon} from \"../assets/icons/total_read_time.svg\"\nimport {ReactComponent as UsersIcon} from \"../assets/icons/users.svg\"\n\n\nconst BookPage = props => {\n\n\tconst TABS = [{id: 'TAB01', label: 'Synopsis', icon : <SynopsisIcon />}, {id: 'TAB02', label: 'reviews',icon : <ReviewIcon />}, {id: 'TAB03', label: 'quotes',icon:<BlockQuoteIcon/>}]\n\n\tconst params = useParams()\n\tconst dispatch = useDispatch()\n\tconst navigate = useNavigate()\n\tconst isLoggedIn = useIsLoggedIn()\n\n\tconst UserState = useSelector(state => state.UserState)\n\tconst WalletState = useSelector(state => state.WalletState)\n\n\tconst [WalletAddress, setWalletAddress] = useState(null)\n\tconst [Loading, setLoading] = useState(false)\n\tconst [ActiveTab, setActiveTab] = useState('TAB01')\n\t// NFT\n\tconst [NFT, setNFT] = useState(null)\n\tconst [Owner, setOwner] = useState(null)\n\tconst [Listed, setListed] = useState(null)\n\tconst [UserCopy, setUserCopy] = useState(null)\n\tconst [Published, setPublished] = useState(null)\n\t// ListedNFT\n\tconst [bookID, setBookID] = useState(null)\n\t// Likes\n\tconst [Likes, setLikes] = useState(0)\n\tconst [Liked, setLiked] = useState(false)\n\t// Reviews\n\tconst [Rating, setRating] = useState(0)\n\tconst [Review, setReview] = useState(null)\n\tconst [Reviews, setReviews] = useState([])\n\tconst [TotalReveiws, setTotalReveiws] = useState(0)\n\tconst [ReviewForm, setReviewForm] = useState({title: '', body: '', rating: 0})\n\t// Quotes\n\tconst [Quote, setQuote] = useState(null)\n\tconst [Quotes, setQuotes] = useState([])\n\tconst [QuotesForm, setQuotesForm] = useState({quote: ''})\n\t// live reader count\n\tconst [totalReaders, setTotalReaders] = useState(0)\n\tconst [liveReaderCount, setLiveReaderCount] = useState(0)\n\tconst [totalReadTime, setTotalReadTime] = useState(0)\n\t// tabs\n\tconst TabContainerRef = useRef();\n\n\tuseEffect(() => { GaTracker('page_view_book') }, [])\n\n\tuseEffect(() => {\n\t\tif(ActiveTab === 'TAB01') GaTracker('tab_view_book_synopsis')\n\t\telse if(ActiveTab === 'TAB02') GaTracker('tab_view_book_reviews')\n\t\telse GaTracker('tab_view_book_quotes')\n\t}, [ActiveTab])\n\n\tuseEffect(() => { if(isUsable(NFT)) setListed(NFT.listed === 1?true:false) }, [NFT])\n\n\tconst getReviews = useCallback(\n\t\t() => {\n\t\t\tif(isUsable(NFT)){\n\t\t\t\tsetLoading(true)\n\t\t\t\taxios({\n\t\t\t\t\turl: `${BASE_URL}/api/book/reviews`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tbookAddress: NFT.book_address\n\t\t\t\t\t}\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif(res.status === 200){\n\t\t\t\t\t\tsetReviews(res.data.reviews)\n\t\t\t\t\t\tsetRating(res.data.rating)\n\t\t\t\t\t\tsetTotalReveiws(res.data.total)\n\t\t\t\t\t}\n\t\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t}).finally(() => setLoading(false))\n\t\t\t}\n\t\t},\n\t\t[NFT, dispatch],\n\t)\n\t\n\tconst getUserReview = useCallback(\n\t\t() => {\n\t\t\tif(isUsable(NFT) && isUsable(WalletAddress)){\n\t\t\t\tsetLoading(true)\n\t\t\t\taxios({\n\t\t\t\t\turl: `${BASE_URL}/api/book/reviewed`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tbookAddress: NFT.book_address,\n\t\t\t\t\t\townerAddress: WalletAddress\n\t\t\t\t\t}\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif(res.status === 200){\n\t\t\t\t\t\tif(isNotEmpty(res.data))\n\t\t\t\t\t\t\tsetReview(res.data)}\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t}).finally(() => setLoading(false))\n\t\t\t}\n\t\t},\n\t\t[NFT, WalletAddress, dispatch],\n\t)\n\n\tconst getQuotes = useCallback(\n\t\t() => {\n\t\t\tif(isUsable(NFT)){\n\t\t\t\tsetLoading(true)\n\t\t\t\taxios({\n\t\t\t\t\turl: `${BASE_URL}/api/book/quotes`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tbookAddress: NFT.book_address\n\t\t\t\t\t}\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif(res.status === 200) setQuotes(res.data)\n\t\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t}).finally(() => setLoading(false))\n\t\t\t}\n\t\t},\n\t\t[NFT, dispatch],\n\t)\n\n\tconst getUserQuote = useCallback(\n\t\t() => {\n\t\t\tif(isUsable(NFT) && isUsable(WalletAddress)){\n\t\t\t\tsetLoading(true)\n\t\t\t\taxios({\n\t\t\t\t\turl: `${BASE_URL}/api/book/quoted`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tbookAddress: NFT.book_address,\n\t\t\t\t\t\townerAddress: WalletAddress\n\t\t\t\t\t}\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif(res.status === 200){\n\t\t\t\t\t\tif(isNotEmpty(res.data))\n\t\t\t\t\t\t\tsetQuote(res.data)\n\t\t\t\t\t}\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t}).finally(() => setLoading(false))\n\t\t\t}\n\t\t},\n\t\t[NFT, WalletAddress, dispatch],\n\t)\n\n\tuseEffect(() => { getReviews() }, [getReviews])\n\n\tuseEffect(() => { getUserReview() }, [getUserReview])\n\n\tuseEffect(() => { getQuotes() }, [getQuotes])\n\n\tuseEffect(() => { getUserQuote() }, [getUserQuote])\n\n\tuseEffect(() => {\n\t\tif(isUsable(NFT)){\n\t\t\tsetLoading(true)\n\t\t\taxios({\n\t\t\t\turl: `${BASE_URL}/api/book/likes`,\n\t\t\t\tmethod: 'GET',\n\t\t\t\tparams: {\n\t\t\t\t\tbookAddress: NFT.book_address\n\t\t\t\t}\n\t\t\t}).then(res => {\n\t\t\t\tif(res.status === 200) setLikes(res.data.likes)\n\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t}).catch(err => {\n\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t}).finally( () => setLoading(false))\n\t\t}\n\t}, [NFT, dispatch])\n\n\tuseEffect(() => {\n\t\tif(isUsable(NFT) && isUsable(WalletAddress)){\n\t\t\tsetLoading(true)\n\t\t\taxios({\n\t\t\t\turl: `${BASE_URL}/api/book/liked`,\n\t\t\t\tmethod: 'GET',\n\t\t\t\tparams: {\n\t\t\t\t\tbookAddress: NFT.book_address,\n\t\t\t\t\townerAddress: WalletAddress\n\t\t\t\t}\n\t\t\t}).then(res => {\n\t\t\t\tif(res.status === 200) setLiked(res.data.liked)\n\t\t\t}).catch(err => {\n\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t}).finally(() => setLoading(false))\n\t\t}\n\t}, [NFT, WalletAddress, dispatch])\n\n\tuseEffect(() => {\n\t\tif(isUsable(NFT)){\n\t\t\tsetLoading(true)\n\t\t\taxios({\n\t\t\t\turl: `${BASE_URL}/api/reader/total-reader-count`,\n\t\t\t\tmethod: 'GET',\n\t\t\t\tparams: { bookAddress: NFT.book_address }\n\t\t\t}).then(res => {\n\t\t\t\tif(res.status === 200) setTotalReaders(res.data.total_readers)\n\t\t\t}).catch(err => {\n\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t}).finally(() => setLoading(false))\n\t\t}\n\t}, [NFT, dispatch])\n\n\tuseEffect(() => {\n\t\tif(isUsable(NFT)){\n\t\t\tsetLoading(true)\n\t\t\taxios({\n\t\t\t\turl: `${BASE_URL}/api/reader/count`,\n\t\t\t\tmethod: 'GET',\n\t\t\t\tparams: { bookAddress: NFT.book_address }\n\t\t\t}).then(res => {\n\t\t\t\tif(res.status === 200) setLiveReaderCount(res.data.reader_count)\n\t\t\t}).catch(err => {\n\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t}).finally(() => setLoading(false))\n\t\t}\n\t}, [NFT, dispatch])\n\n\tuseEffect(() => {\n\t\tif(isUsable(NFT)){\n\t\t\tsetLoading(true)\n\t\t\taxios({\n\t\t\t\turl: `${BASE_URL}/api/reader/total-read-time`,\n\t\t\t\tmethod: 'GET',\n\t\t\t\tparams: { bookAddress: NFT.book_address }\n\t\t\t}).then(res => {\n\t\t\t\tif(res.status === 200) setTotalReadTime(res.data.total_read_time)\n\t\t\t}).catch(err => {\n\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t}).finally(() => setLoading(false))\n\t\t}\n\t}, [NFT, dispatch])\n\n\tuseEffect(() => {\n\t\tsetLoading(true)\n\t\tif(isUsable(WalletState.wallet.provider)) setWalletAddress(WalletState.wallet.address)\n\t\tsetLoading(false)\n\t}, [WalletState])\n\n\tuseEffect(() => { if(isUsable(Review)) setReviewForm({title: Review.title, body: Review.body, rating: Review.rating}) }, [Review])\n\tuseEffect(() => {\n        const bookID = params.bookID\n        axios({\n            url: `${BASE_URL}/api/book`,\n            method: 'GET',\n            params: {\n                id: bookID\n            }\n        }).then(res=>{\n            setNFT(res.data[0])\n        })\n\t}, [params])\n\t\n\tuseEffect(() =>{\n\t\tif(isUsable(WalletAddress) && isUsable(NFT)){\n\t\t\tsetLoading(true)\n\t\t\tconst book = NFT\n\t\t\tif(book.new_owner === WalletAddress) setOwner(true)\n\t\t\telse setOwner(false)\n\t\t\tif(book.publisher_address === WalletAddress) setPublished(true)\n\t\t\telse setPublished(false)\n\t\t\taxios({\n\t\t\t\turl: BASE_URL+'/api/book/owner',\n\t\t\t\tmethod: 'GET',\n\t\t\t\tparams: {\n\t\t\t\t\townerAddress: WalletAddress,\n\t\t\t\t\tbookAddress: book.book_address\n\t\t\t\t}\n\t\t\t}).then(res => { if(res.status === 200) setOwner(true)\n\t\t\t}).catch(err => {\n\t\t\t}).finally(() => setLoading(false))\n\t\t} }, [NFT, params, dispatch, WalletAddress]\n\t)\n\n\tuseEffect(() => { if(isUsable(NFT) && isUsable(Published) && isUsable(Owner)) setLoading(false) }, [NFT, Published, Owner])\n\n\tuseEffect(() => {\n\t\tif(Loading) dispatch(showSpinner())\n\t\telse dispatch(hideSpinner())\n\t}, [Loading, dispatch])\n\n\tuseEffect(()=>{\n\t\tlet activeTabElement = document.getElementById(\"BOOK_PAGE_\" + ActiveTab);\n\t\tif(!isUsable(activeTabElement)) return ;\n\t\tif(!isUsable(TabContainerRef.current)) return;\n\t\tTabContainerRef.current.style.setProperty(\"--marker-x\",activeTabElement.offsetLeft);\n\t},[ActiveTab])\n\n\tuseEffect(() => {\n\t\tif(Owner){\n\t\t\taxios({\n\t\t\t\turl: `${BASE_URL}/api/user/book`,\n\t\t\t\tmethod: 'GET',\n\t\t\t\theaders: {\n\t\t\t\t\t'user-id': UserState.user.uid,\n\t\t\t\t\t'address': WalletState.wallet.address,\n\t\t\t\t\t'authorization': `Bearer ${UserState.tokens.acsTkn.tkn}`\n\t\t\t\t},\n\t\t\t\tparams: {walletAddress: WalletState.wallet.address, bookAddress: NFT.book_address}\n\t\t\t}).then(res => {\n\t\t\t\tif(res.status === 200) {\n\t\t\t\t\tsetUserCopy(res.data)\n\t\t\t\t\tsetListed(res.data.listed)\n\t\t\t\t}\n\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t}).catch(err => {\n\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t})\n\t\t}\n\t}, [Owner, UserState, WalletState, dispatch, NFT])\n\n\tconst walletStatus = () => {\n\t\tif(isUsable(WalletState.support) && WalletState.support === true && isUsable(WalletState.wallet.provider)){\n\t\t\tsetWalletAddress(WalletState.wallet.address)\n\t\t\treturn true\n\t\t}\n\t\telse {\n\t\t\tsetLoading(true)\n\t\t\tWallet.connectWallet().then(res => {\n\t\t\t\tdispatch(setWallet({ wallet: res.wallet, provider: res.provider, signer: res.signer, address: res.address }))\n\t\t\t\tsetWalletAddress(res.address)\n\t\t\t\tdispatch(setSnackbar({show: true, message: \"Wallet connected.\", type: 1}))\n\t\t\t\treturn true\n\t\t\t}).catch(err => {\n\t\t\t\tdispatch(setSnackbar({show: true, message: \"Error while connecting to wallet\", type: 4}))\n\t\t\t\treturn false\n\t\t\t}).finally(() => setLoading(false))\n\t\t}\n\t}\n\n\tconst unlistHandler = () => {\n\t\tGaTracker('event_book_unlist')\n\t\tif(isUsable(WalletAddress)){\n\t\t\tsetLoading(true)\n\t\t\taxios({\n\t\t\t\turl: BASE_URL + '/api/user/book/listed',\n\t\t\t\tmethod: 'GET',\n\t\t\t\theaders: {\n\t\t\t\t\t'user-id': UserState.user.uid,\n\t\t\t\t\t'authorization': `Bearer ${UserState.tokens.acsTkn.tkn}`\n\t\t\t\t},\n\t\t\t\tparams: {\n\t\t\t\t\townerAddress: WalletAddress,\n\t\t\t\t\ttokenId: UserCopy.token_id,\n\t\t\t\t\tbookAddress: NFT.book_address\n\t\t\t\t}\n\t\t\t}).then(res => {\n\t\t\t\tif(res.status === 200){\n\t\t\t\t\tsetLoading(true)\n\t\t\t\t\tconst orderId = res.data.order_id\n\t\t\t\t\tContracts.unlistBookFromMarketplace(orderId, WalletState.wallet.signer).then(res => {\n\t\t\t\t\t\tsetLoading(true)\n\t\t\t\t\t\taxios({\n\t\t\t\t\t\t\turl: BASE_URL + '/api/book/unlist',\n\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\townerAddress: WalletAddress,\n\t\t\t\t\t\t\t\tbookAddress: NFT.book_address,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).then(res => {\n\t\t\t\t\t\t\tif(res.status === 200){\n\t\t\t\t\t\t\t\tsetListed(false)\n\t\t\t\t\t\t\t\tdispatch(hideModal())\n\t\t\t\t\t\t\t\tdispatch(setSnackbar({show: true, message: \"Book unlisted from marketplace.\", type: 1}))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t\t\t}).finally( ()=> { setLoading(false) })\n\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\tsetLoading(false)\n\t\t\t\t\t\tif(isUsable(err.reason)){\n\t\t\t\t\t\t\tif(err.reason.includes('NFT not yet listed / already sold')) dispatch(setSnackbar({show: true, message: \"eBook already sold or not listed.\", type: 3}))\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse dispatch(setSnackbar('ERROR'))\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t}).catch(err => {\n\t\t\t\tsetLoading(false)\n\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t})\n\t\t}\n\t}\n\n\tconst listHandler = () => {\n\t\tdispatch(showModal(SHOW_LIST_MODAL))\n\t\tif(moment(NFT.secondary_sales_from).isSame(moment()) || moment(NFT.secondary_sales_from).isBefore(moment())) dispatch(showModal(SHOW_LIST_MODAL))\n\t\telse if(moment(NFT.secondary_sales_from).isAfter(moment())) dispatch(setSnackbar({show: true, message: `Secondary Sales will open only after ${moment(NFT.secondary_sales_from).format('D MMM, YYYY')}.`, type: 2}))\n\t}\n\n\tconst onListHandler = listPrice => {\n\t\tGaTracker('event_book_list')\n\t\tif(isUsable(WalletAddress)){\n\t\t\tsetLoading(true)\n\t\t\tContracts.listBookToMarketplace(NFT.book_address, UserCopy.token_id, listPrice, WalletState.wallet.signer).then(res => {\n\t\t\t\tsetLoading(true)\n\t\t\t\tconst orderId = parseInt(res.events.filter(event => event.event === 'CoverListed')[0].args[0]._hex)\n\t\t\t\taxios({\n\t\t\t\t\turl: BASE_URL + '/api/book/list',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\townerAddress: WalletAddress,\n\t\t\t\t\t\tbookAddress: NFT.book_address,\n\t\t\t\t\t\tbookPrice: listPrice,\n\t\t\t\t\t\tbookOrderId: orderId,\n\t\t\t\t\t\tbookTokenId: UserCopy.token_id\n\t\t\t\t\t}\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif(res.status === 200){\n\t\t\t\t\t\tsetListed(true)\n\t\t\t\t\t\tdispatch(hideModal())\n\t\t\t\t\t\tdispatch(setSnackbar({show: true, message: \"Book listed on marketplace.\", type: 1}))\n\t\t\t\t\t\tif(res.data){\n\t\t\t\t\t\t\tsetBookID(res.data)\n\t\t\t\t\t\t\tdispatch(showModal(SHOW_SHARE_MODAL))\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t}).finally( ()=> { setLoading(false) })\n\t\t\t}).catch(err => {\n\t\t\t\tif(isUsable(err.reason)){\n\t\t\t\t\tif(err.reason.includes(\"Can't list the cover at this time\")) dispatch(setSnackbar({show: true, message: \"Please wait for some more time before listing the book.\", type: 3}))\n\t\t\t\t\telse if(err.reason.includes(\"Listing for this book is disabled\")) dispatch(setSnackbar({show: true, message: \"Listing this book is not allowed right now. Please try again later.\", type: 3}))\n\t\t\t\t\telse if(err.reason.includes(\"Seller should own the NFT to list\")) dispatch(setSnackbar({show: true, message: \"Book is already listed. Please contact us on support@nalnda.com\", type: 3}))\n\t\t\t\t}\n\t\t\t\telse dispatch(setSnackbar('ERROR'))\n\t\t\t}).finally(() => setLoading(false))\n\t\t}\n\t}\n\n\tconst readHandler = async () => {\n\t\tGaTracker('event_book_read')\n\t\tsetLoading(true)\n\t\ttry {\n\t\t\taxios({\n\t\t\t\turl: `${BASE_URL}/api/verify`,\n\t\t\t\tmethod: 'GET',\n\t\t\t\tparams: {\n\t\t\t\t\tbookAddress: NFT.book_address,\n\t\t\t\t\townerAddress: WalletAddress\n\t\t\t\t}\n\t\t\t}).then(res => {\n\t\t\t\tif(res.status === 200){\n\t\t\t\t\tconst messageToSign = res.data\n\t\t\t\t\tWallet.signMessage(WalletState.wallet.signer, JSON.stringify(messageToSign)).then(res => {\n\t\t\t\t\t\tif(res.isValid === true){\n\t\t\t\t\t\t\taxios({\n\t\t\t\t\t\t\t\turl : BASE_URL + '/api/verify',\n\t\t\t\t\t\t\t\tmethod : \"POST\",\n\t\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t\t'address': WalletState.wallet.address,\n\t\t\t\t\t\t\t\t\t'user-id': UserState.user.uid,\n\t\t\t\t\t\t\t\t\t'authorization': `Bearer ${UserState.tokens.acsTkn.tkn}`\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tdata : {\n\t\t\t\t\t\t\t\t\taccountAddress: WalletAddress,\n\t\t\t\t\t\t\t\t\tbookAddress: NFT.book_address,\n\t\t\t\t\t\t\t\t\tsignedData: res.signedData,\n\t\t\t\t\t\t\t\t\tcid : NFT.book.slice(NFT.book.lastIndexOf(\"/\")+1),\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}).then(res=>{\n\t\t\t\t\t\t\t\tif(res.status === 200) {\n\t\t\t\t\t\t\t\t\tGaTracker('navigate_book_reader')\n\t\t\t\t\t\t\t\t\tnavigate('/library/reader', {state: {book: {...NFT, url: res.data.url}, preview: false}}) \n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse dispatch(setSnackbar({show:true,message : \"Error\", type : 4}))\n\t\t\t\t\t\t\t}).catch(err => { dispatch(setSnackbar('ERROR'))\n\t\t\t\t\t\t\t}).finally( () => setLoading(false))\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse dispatch(setSnackbar({show: true, message: \"Could not verify the authenticity of the signature.\", type: 3}))\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t})\n\t\t} catch (err) {\n\t\t\tsetLoading(false)\n\t\t}\n\t}\n\n\tconst previewHandler = () => {\n\t\tGaTracker('navigate_book_preview')\n\t\tnavigate('/book/preview', {state: {book: NFT, preview: true}})\n\t}\n\n\tconst purchaseHandler = () => isLoggedIn?dispatch(showModal(SHOW_PURCHASE_MODAL)):dispatch(setSnackbar('NOT_LOGGED_IN'))\n\n\tconst reviewModalHandler = () => isLoggedIn?dispatch(showModal(SHOW_REVIEW_MODAL)):dispatch(setSnackbar('NOT_LOGGED_IN'))\n\n\tconst quoteModalHandler = () => isLoggedIn?dispatch(showModal(SHOW_QUOTE_MODAL)):dispatch(setSnackbar('NOT_LOGGED_IN'))\n\n\tconst purchaseNewCopyHandler = () => {\n\t\tconst purchase = () => {\n\t\t\tContracts.purchaseNft(WalletAddress, NFT.book_address, NFT.price.toString(), WalletState.wallet.signer).then(res => {\n\t\t\t\tdispatch(setSnackbar({show: true, message: \"Book purchased.\", type: 1}))\n\t\t\t\tdispatch(hideModal())\n\t\t\t\tconst tokenId = Number(res.events.filter(event => event.eventSignature === \"Transfer(address,address,uint256)\")[0].args[2]._hex)\n\t\t\t\taxios({\n\t\t\t\t\turl: BASE_URL+'/api/book/purchase',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {ownerAddress: WalletAddress, bookAddress: NFT.book_address, tokenId, purchasePrice: NFT.price}\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif(res.status === 200) setOwner(true)\n\t\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t}).finally(() => setLoading(false))\n\t\t\t\taxios({\n\t\t\t\t\turl: BASE_URL+'/api/book/copies',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {bookAddress: NFT.book_address, copies: tokenId}\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif(res.status !== 200) dispatch(setSnackbar('NOT200'))\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t})\n\t\t\t}).catch(err => {\n\t\t\t\tsetLoading(false)\n\t\t\t\tif(err.message){\n\t\t\t\t\tif(err?.message?.indexOf(\"execution reverted: ERC20: transfer amount exceeds balance\")>-1)\n\t\t\t\t\t\tdispatch(setSnackbar({show: true, message: \"You do not have enough USDC to purchase this book. Please visit the faucet to get some.\", type: 3}))\n\t\t\t\t\telse if(err?.message?.indexOf(\"execution reverted: NalndaBook: Book unapproved from marketplace!\")>-1)\n\t\t\t\t\t\tdispatch(setSnackbar({show: true, message: \"The book has not been approved for sales yet. Please try again later.\", type: 3}))\n\t\t\t\t\telse if(err.code === 4001)\n\t\t\t\t\t\tdispatch(setSnackbar({show: true, message: \"Transaction denied by user.\", type: 3}))\n\t\t\t\t} else dispatch(setSnackbar('ERROR'))\n\t\t\t})\n\t\t}\n\t\tGaTracker('event_book_purchase_new')\n\t\tsetLoading(true)\n\t\tif(isUsable(WalletAddress)) purchase()\n\t\telse{\n\t\t\t// setLoading(true)\n\t\t\t// Wallet.connectWallet().then(res => {\n\t\t\t// \tsetLoading(false)\n\t\t\t// \tdispatch(setWallet({ wallet: res.wallet, provider: res.provider, signer: res.signer, address: res.address }))\n\t\t\t// \tsetWalletAddress(res.address)\n\t\t\t// \tpurchase()\n\t\t\t// }).catch(err => {\n\t\t\t// \tdispatch(setSnackbar({show: true, message: \"Error while connecting wallet.\" ,type: 4}))\n\t\t\t// \tsetLoading(false)\n\t\t\t// })\n\t\t\tdispatch(setSnackbar({show: true, message: \"Please connect your WEB3 wallet.\", type: 3}))\n\t\t}\n\t}\n\n\tconst purchaseOldCopyHandler = offer => {\n\t\tGaTracker('event_book_purchase_old')\n\t\tif(walletStatus()){\n\t\t\tsetLoading(true)\n\t\t\tContracts.buyListedCover(offer.order_id, offer.price, WalletState.wallet.signer).then(res => {\n\t\t\t\taxios({\n\t\t\t\t\turl: BASE_URL+'/api/book/purchase/secondary',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tnewOwnerAddress: WalletAddress,\n\t\t\t\t\t\tpreviousOwnerAddress: offer.previous_owner,\n\t\t\t\t\t\tbookAddress: offer.book_address,\n\t\t\t\t\t\ttokenId: offer.token_id,\n\t\t\t\t\t\tpurchasePrice: offer.price,\n\t\t\t\t\t\torderId: offer.order_id,\n\t\t\t\t\t\tdaScore: offer.da_score\n\t\t\t\t\t}\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif(res.status === 200){\n\t\t\t\t\t\tdispatch(hideModal())\n\t\t\t\t\t\tsetOwner(true)\n\t\t\t\t\t}\n\t\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t}).finally(() => setLoading(false))\n\t\t\t}).catch(err => {\n\t\t\t\tsetLoading(false)\n\t\t\t})\n\t\t}\n\t}\n\n\tconst likeHandler = () => {\n\t\tif(walletStatus()){\n\t\t\tif(Owner){\n\t\t\t\tif(!Liked){\n\t\t\t\t\tsetLikes(old => old+1)\n\t\t\t\t\tGaTracker('event_book_like')\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tsetLikes(old => old-1)\n\t\t\t\t\tGaTracker('event_book_unlike')\n\t\t\t\t}\n\t\t\t\taxios({\n\t\t\t\t\turl: `${BASE_URL}/api/book/likes`,\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tbookAddress: NFT.book_address,\n\t\t\t\t\t\townerAddress: WalletAddress,\n\t\t\t\t\t\tlikedState: !Liked\n\t\t\t\t\t}\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif(res.status === 200) setLiked(old => !old)\n\t\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t}).finally( () => setLoading(false) )\n\t\t\t}\n\t\t\telse dispatch(setSnackbar({show: true, message: \"Only owners can like a book.\", type: 3}))\n\t\t}\n\t\telse dispatch(setSnackbar({show: true, message: \"Please login first.\", type: 3}))\n\t}\n\n\tconst renderGrid = () => {\n\t\treturn (\n\t\t\t<div className='book__data__container__desc__summary__grid typo__color--n700'>\n\t\t\t\t<div className='book__data__container__desc__summary__grid__item'>\n\t\t\t\t\t<LanguageIcon />\n\t\t\t\t\t<div className='book__data__container__desc__summary__grid__item__data'>{NFT.language}</div>\n\t\t\t\t</div>\n\t\t\t\t<div className='book__data__container__desc__summary__grid__item'>\n\t\t\t\t\t<UsersIcon />\n\t\t\t\t\t<div className='book__data__container__desc__summary__grid__item__data'>{totalReaders} readers</div>\n\t\t\t\t</div>\n\t\t\t\t<div className='book__data__container__desc__summary__grid__item'>\n\t\t\t\t\t<LiveReadersIcon />\n\t\t\t\t\t<div className='book__data__container__desc__summary__grid__item__data'>{liveReaderCount} people reading</div>\n\t\t\t\t</div>\n\t\t\t\t<div className='book__data__container__desc__summary__grid__item'>\n\t\t\t\t\t<TotalReadTimeIcon />\n\t\t\t\t\t<div className='book__data__container__desc__summary__grid__item__data'>{Math.ceil(totalReadTime / 60)} minutes</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n\n\tconst renderTabs = () => {\n\t\tlet tabsDOM = []\n\t\tTABS.forEach(tab => {\n\t\t\ttabsDOM.push(\n\t\t\t\t<div onClick={()=>setActiveTab(tab.id)} id={\"BOOK_PAGE_\"+tab.id} className={tab.id === ActiveTab?\"book__data__container__desc__tabs__container__item book__data__container__desc__tabs__container__item--active\":\"book__data__container__desc__tabs__container__item utils__cursor--pointer\"} key={tab.id}>\n\t\t\t\t\t{isUsable(tab.icon) && tab.icon}\n\t\t\t\t\t<h5 className=\"typo__head typo__head--6 typo__transform--capital\">{tab.label}</h5>\n\t\t\t\t</div>\n\t\t\t)\n\t\t})\n\t\treturn tabsDOM\n\t}\n\n\tconst renderTabData = () => {\n\t\tswitch (ActiveTab) {\n\t\t\tcase 'TAB01':\n\t\t\t\treturn <p className=\"typo--break-spaces typo__body typo__color--n600\">{NFT.synopsis}</p>\n\t\t\tcase 'TAB02':\n\t\t\t\tconst renderReviews = reviews => {\n\t\t\t\t\tlet reviewsDOM = []\n\t\t\t\t\tif(isFilled(reviews)) reviews.forEach(review => reviewsDOM.push(\n\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__reviews__item\">\n\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__reviews__item__header__head typo__head typo__head--6\">{review.title}</div>\n\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__reviews__item__header\">\n\t\t\t\t\t\t\t\t<Stars rating={review.rating} size={'small'}/>\n\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__reviews__item__header__time typo__color--n500\">{moment(review.reviewed_at).format(\"D MMM, YYYY\")}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__reviews__item__body typo__body typo__body--2\">{review.body}</div>\n\t\t\t\t\t\t</div>))\n\t\t\t\t\treturn reviewsDOM\n\t\t\t\t}\n\t\t\t\treturn <React.Fragment>\n\t\t\t\t\t{ !isUsable(Review) && Owner ?\n\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__action\">\n\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__action__icon\">\n\t\t\t\t\t\t\t\t<ReviewIcon width={32} height={32} stroke=\"currentColor\"/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__action__label typo__head--6\">Write a Review</div>\n\t\t\t\t\t\t\t<Button type=\"primary\" onClick={()=>reviewModalHandler()}>Review</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t:null}\n\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__reviews\">\n\t\t\t\t\t\t{renderReviews(Reviews)}\n\t\t\t\t\t\t{Reviews?.length === 0 ? <div className='book__data__container__desc__tabs__data__empty'>No Reviews</div> : \"\"}\n\t\t\t\t\t</div>\n\t\t\t\t</React.Fragment>\n\t\t\tcase 'TAB03':\n\t\t\t\tconst renderQuotes = quotes => {\n\t\t\t\t\tlet quotesDOM = []\n\t\t\t\t\tquotes.forEach((quote,i) => {\n\t\t\t\t\t\tquotesDOM.push(\n\t\t\t\t\t\t\t<div key={i} className='book__data__container__desc__tabs__data__quotes__item'>\n\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__quotes__item__icon\">\n\t\t\t\t\t\t\t\t\t<QuoteIcon width={32} height={32} fill=\"currentColor\"/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__quotes__item__body typo__body\">\n\t\t\t\t\t\t\t\t\t{quote.body}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__quotes__item__time typo__cap typo__cap--2\">\n\t\t\t\t\t\t\t\t\t{moment(quote.created_at).format(\"D MMM, YYYY\") || \"-\"}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)\n\t\t\t\t\t})\n\t\t\t\t\treturn quotesDOM\n\t\t\t\t}\n\t\t\t\treturn <React.Fragment>\n\t\t\t\t\t{ !isUsable(Quote) && ( Published || Owner ) ?\n\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__action\">\n\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__action__icon\">\n\t\t\t\t\t\t\t\t<BlockQuoteIcon width={32} height={32} stroke=\"currentColor\"/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__action__label typo__head--6\">Write a Quote</div>\n\t\t\t\t\t\t\t<Button type=\"primary\" onClick={()=>quoteModalHandler()}>Quote</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t:null}\n\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__quotes\">\n\t\t\t\t\t\t{renderQuotes(Quotes)}\n\t\t\t\t\t\t{Quotes?.length === 0 ? <div className='book__data__container__desc__tabs__data__empty'>No Quotes</div> : \"\"}\n\t\t\t\t\t</div>\n\t\t\t\t</React.Fragment>\n\t\t\tdefault:\n\t\t\t\tbreak\n\t\t}\n\t}\n\n\tconst reviewHandler = () => {\n\t\tGaTracker('event_book_review')\n\t\tif(isUsable(WalletAddress)){\n\t\t\tif(isNotEmpty(ReviewForm.body) && isNotEmpty(ReviewForm.rating) && isNotEmpty(ReviewForm.title)){\n\t\t\t\tsetLoading(true)\n\t\t\t\taxios({\n\t\t\t\t\turl: `${BASE_URL}/api/book/reviews`,\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\treview: {...ReviewForm},\n\t\t\t\t\t\tbookAddress: NFT.book_address,\n\t\t\t\t\t\townerAddress: WalletAddress\n\t\t\t\t\t}\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif(res.status === 200) {\n\t\t\t\t\t\tdispatch(hideModal())\n\t\t\t\t\t\tgetUserReview()\n\t\t\t\t\t\tgetReviews()\n\t\t\t\t\t}\n\t\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tsetLoading(false)\n\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t})\n\t\t\t}\n\t\t\telse dispatch(setSnackbar({show: true, message: \"Please fill the review.\", type: 3}))\n\t\t}\n\t\telse dispatch(setSnackbar({show: true, message: \"Please login first\", type: 3}))\n\t}\n\n\tconst quoteHandler = () => {\n\t\tGaTracker('event_book_quote')\n\t\tif(isUsable(WalletAddress)){\n\t\t\tif(isNotEmpty(QuotesForm.quote)){\n\t\t\t\tsetLoading(true)\n\t\t\t\taxios({\n\t\t\t\t\turl: `${BASE_URL}/api/book/quotes`,\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tquote: {body:QuotesForm.quote},\n\t\t\t\t\t\tbookAddress: NFT.book_address,\n\t\t\t\t\t\townerAddress: WalletAddress\n\t\t\t\t\t}\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif(res.status === 200){\n\t\t\t\t\t\tdispatch(hideModal())\n\t\t\t\t\t\tgetUserQuote()\n\t\t\t\t\t\tgetQuotes()\n\t\t\t\t\t}\n\t\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tsetLoading(false)\n\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t})\n\t\t\t}\n\t\t\telse dispatch(setSnackbar({show: true, message: \"Please enter the quote.\", type: 3}))\n\t\t}\n\t\telse dispatch(setSnackbar({show: true, message: \"Please login first\", type: 3}))\n\t}\n\n\treturn (\n\t\t<Page>\n\t\t\t<div className=\"book__bg\">\n\t\t\t\t<img src={BackgroundBook} alt=\"background\" loading=\"lazy\"/>\n\t\t\t</div>\n\t\t\t{isUsable(NFT)?\n\t\t\t\t<>\n\t\t\t\t\t<div className=\"book__data\">\n\t\t\t\t\t\t<div className=\"book__data__background\"/>\n\t\t\t\t\t\t<div className=\"book__data__container\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div className='book__data__container__cover'>\n\t\t\t\t\t\t\t\t\t<img className='book__data__container__cover__image' src={NFT.cover_display_url?NFT.cover_display_url:NFT.cover_public_url?NFT.cover_public_url:NFT.cover} alt={NFT.name}/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className='book__data__container__meta'>\n\t\t\t\t\t\t\t\t\t<h3 className=\"typo__color--n700 typo__head typo__head--3 typo__transform--capital\">{NFT.title}</h3>\n\t\t\t\t\t\t\t\t\t<h5 className=\"typo__color--n500 typo__head typo__head--6 typo__transform--upper\">{NFT.author}</h5>\n\t\t\t\t\t\t\t\t\t{Owner||Published?null:<div className='book__data__container__meta__price typo-head--6 typo__act typo__color--success'>{NFT.price===0?\"FREE\":<><img src='https://imagedelivery.net/yOWneHxM1h9mu46Te3Yjwg/59c27d12-e4eb-4f74-7a6e-b33ba6537600/icon48' style={{width: 20, height: 20, objectFit: 'contain'}} alt=\"USDC\"/>&nbsp;{NFT.price}</>}</div>}\n\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__meta__rating\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__meta__rating__stars\">\n\t\t\t\t\t\t\t\t\t\t\t<Stars size={'small'} rating={Rating}/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className='book__data__container__meta__rating__count typo__body'>\n\t\t\t\t\t\t\t\t\t\t\t{TotalReveiws} reviews\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__meta__cta\">\n\t\t\t\t\t\t\t\t\t\t{Listed\n\t\t\t\t\t\t\t\t\t\t\t?\n\t\t\t\t\t\t\t\t\t\t\t\t<Button type=\"primary\" size=\"lg\" onClick={()=>unlistHandler()}>Unlist</Button>\n\t\t\t\t\t\t\t\t\t\t\t:Published\n\t\t\t\t\t\t\t\t\t\t\t\t?<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button type=\"primary\" size=\"lg\" onClick={()=>readHandler()}>Read</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t:Owner\n\t\t\t\t\t\t\t\t\t\t\t\t\t?<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button type=\"primary\" size=\"lg\" onClick={()=>readHandler()}>Read</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button onClick={()=>listHandler()}>List</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t\t:<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button type=\"primary\" size=\"lg\" onClick={()=>purchaseHandler()}>Buy Now</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button onClick={()=>previewHandler()}>Preview</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className='book__data__container__desc'>\n\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__left\">\n\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__summary\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__summary__contract\">\n\t\t\t\t\t\t\t\t\t\t\t<div className='book__data__container__desc__summary__contract__data'>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className='book__data__container__desc__summary__contract__label typo__color--n700'>Contract Address</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className='book__data__container__desc__summary__contract__value typo__color--n500' onClick={()=>window.open(`https://mumbai.polygonscan.com/address/${NFT.book_address}`, \"_blank\")}>{(NFT.book_address||\"\").slice(0,12)}{(NFT.book_address||\"\").slice((NFT.contract||\"\").length-10)}</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className='book__data__container__desc__summary__contract__icon'>\n\t\t\t\t\t\t\t\t\t\t\t\t<ExternalLinkIcon width={24} height={24}/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className='book__data__container__desc__summary__head typo__color--n700'>Genres</div>\n\t\t\t\t\t\t\t\t\t\t<div className='book__data__container__desc__summary__chips typo__transform--capital'>{JSON.parse(NFT.genres).map(g=><div className=\"book__data__container__desc__summary__chips__item\">{g}</div>)}</div>\n\t\t\t\t\t\t\t\t\t\t<div className='book__data__container__desc__summary__head typo__color--n700'>Prefered Age Group</div>\n\t\t\t\t\t\t\t\t\t\t<div className='book__data__container__desc__summary__chips typo__transform--capital'>{JSON.parse(NFT.age_group).map(g=><div className=\"book__data__container__desc__summary__chips__item\">{g}</div>)}</div>\n\t\t\t\t\t\t\t\t\t\t{renderGrid()}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__right\">\n\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__interacts\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__interacts__item\">\n\t\t\t\t\t\t\t\t\t\t\t<div className='typo__subtitle typo__color--n500'>Likes</div>\n\t\t\t\t\t\t\t\t\t\t\t<LikeIcon width={24} height={24} className=\"book__data__container__desc__interacts__item__icon\" stroke={Liked?\"#ff5722\":\"currentColor\"} fill={Liked?\"#ff5722\":\"transparent\"} onClick={ ()=>likeHandler() }/>\n\t\t\t\t\t\t\t\t\t\t\t<div className='typo__head--5 typo__color--n600'>{Likes||\"0\"}</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__interacts__item\">\n\t\t\t\t\t\t\t\t\t\t\t<div className='typo__subtitle typo__color--n500'>Reviews</div>\n\t\t\t\t\t\t\t\t\t\t\t<ReviewIcon width={24} height={24} stroke=\"currentColor\"/>\n\t\t\t\t\t\t\t\t\t\t\t<div className='typo__head--5 typo__color--n600'>{TotalReveiws||\"0\"}</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__interacts__item\">\n\t\t\t\t\t\t\t\t\t\t\t<div className='typo__subtitle typo__color--n500'>Pages</div>\n\t\t\t\t\t\t\t\t\t\t\t<PrintIcon width={24} height={24} stroke=\"currentColor\"/>\n\t\t\t\t\t\t\t\t\t\t\t<div className='typo__head--5 typo__color--n600'>{NFT.print||\"00\"}</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__interacts__item\">\n\t\t\t\t\t\t\t\t\t\t\t<div className='typo__subtitle typo__color--n500'>Sold</div>\n\t\t\t\t\t\t\t\t\t\t\t<CartIcon width={24} height={24} stroke=\"currentColor\"/>\n\t\t\t\t\t\t\t\t\t\t\t<div className='typo__head--5 typo__color--n600'>{NFT.copies||\"00\"}</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs\">\n\t\t\t\t\t\t\t\t\t\t<div ref={TabContainerRef} className=\"book__data__container__desc__tabs__container\">\n\t\t\t\t\t\t\t\t\t\t\t{renderTabs()}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data\">\n\t\t\t\t\t\t\t\t\t\t\t{renderTabData()}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<PurchaseModal data={NFT} onNewBookPurchase={()=>purchaseNewCopyHandler()} onOldBookPurchase={offer=>purchaseOldCopyHandler(offer)}/>\n\t\t\t\t\t<ListModal book={NFT} userCopy={UserCopy} onListHandler={listPrice=>onListHandler(listPrice)} />\n\t\t\t\t\t<ReviewModal ReviewForm={ReviewForm} setReviewForm={setReviewForm} reviewHandler={reviewHandler}/>\n\t\t\t\t\t<QuoteModal QuotesForm={QuotesForm} setQuotesForm={setQuotesForm} quoteHandler={quoteHandler}/>\n\t\t\t\t\t<ShareListModal bookID={bookID} />\n\t\t\t\t</>\n\t\t\t\t:null\n\t\t\t}\n\t\t</Page>\n\t)\n}\n\nexport default BookPage\n"],"names":["onOldBookPurchase","onNewBookPurchase","data","dispatch","useDispatch","UserState","useSelector","state","ModalState","useState","Show","setShow","Offers","setOffers","Loading","setLoading","ShowOffers","setShowOffers","ActiveOffer","setActiveOffer","getLowestPrice","isFilled","offers","sort","offera","offerb","price","parseFloat","toFixed","useEffect","window","document","documentElement","style","overflowY","showSpinner","hideSpinner","show","type","SHOW_PURCHASE_MODAL","GaTracker","isUsable","axios","url","BASE_URL","method","headers","user","uid","tokens","acsTkn","tkn","params","bookAddress","book_address","then","res","status","setSnackbar","catch","err","finally","Backdrop","className","classes","push","join","getClasses","title","toLowerCase","onClick","width","height","length","src","objectFit","alt","offersDOM","forEach","offer","previous_owner","da_score","order_id","renderOffers","Button","message","props","TABS","id","label","icon","useParams","navigate","useNavigate","isLoggedIn","useIsLoggedIn","WalletState","WalletAddress","setWalletAddress","ActiveTab","setActiveTab","NFT","setNFT","Owner","setOwner","Listed","setListed","UserCopy","setUserCopy","Published","setPublished","bookID","setBookID","Likes","setLikes","Liked","setLiked","Rating","setRating","Review","setReview","Reviews","setReviews","TotalReveiws","setTotalReveiws","body","rating","ReviewForm","setReviewForm","Quote","setQuote","Quotes","setQuotes","quote","QuotesForm","setQuotesForm","totalReaders","setTotalReaders","liveReaderCount","setLiveReaderCount","totalReadTime","setTotalReadTime","TabContainerRef","useRef","listed","getReviews","useCallback","reviews","total","getUserReview","ownerAddress","isNotEmpty","getQuotes","getUserQuote","likes","liked","total_readers","reader_count","total_read_time","wallet","provider","address","book","new_owner","publisher_address","activeTabElement","getElementById","current","setProperty","offsetLeft","walletAddress","walletStatus","support","Wallet","setWallet","signer","readHandler","messageToSign","JSON","stringify","isValid","accountAddress","signedData","cid","slice","lastIndexOf","preview","Page","BackgroundBook","loading","cover_display_url","cover_public_url","cover","name","author","Stars","size","tokenId","token_id","orderId","Contracts","hideModal","reason","includes","showModal","SHOW_LIST_MODAL","moment","secondary_sales_from","isSame","isBefore","isAfter","format","open","contract","parse","genres","map","g","age_group","language","Math","ceil","stroke","fill","old","likedState","print","copies","ref","tabsDOM","tab","renderTabs","synopsis","SHOW_REVIEW_MODAL","reviewsDOM","review","reviewed_at","renderReviews","SHOW_QUOTE_MODAL","quotes","quotesDOM","i","created_at","renderQuotes","renderTabData","Purchase","toString","Number","events","filter","event","eventSignature","args","_hex","purchasePrice","indexOf","code","newOwnerAddress","previousOwnerAddress","daScore","purchaseOldCopyHandler","List","userCopy","onListHandler","listPrice","parseInt","bookPrice","bookOrderId","bookTokenId","SHOW_SHARE_MODAL","ReviewModal","reviewHandler","QuoteModal","quoteHandler","ShareList"],"sourceRoot":""}