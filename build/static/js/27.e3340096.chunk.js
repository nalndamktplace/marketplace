"use strict";(self.webpackChunkmarketplace=self.webpackChunkmarketplace||[]).push([[27],{45972:function(e,t,a){a.d(t,{r:function(){return u}});var n,o,r,i,s=a(72791),l=["title","titleId"];function p(){return p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},p.apply(this,arguments)}function c(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}function _(e,t){var a=e.title,_=e.titleId,u=c(e,l);return s.createElement("svg",p({xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 48 48",ref:t,"aria-labelledby":_},u),a?s.createElement("title",{id:_},a):null,n||(n=s.createElement("line",{x2:.02,transform:"translate(30 16)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),o||(o=s.createElement("rect",{width:32,height:32,rx:3,transform:"translate(8 8)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),r||(r=s.createElement("path",{d:"M4,19.67l8-8a4.029,4.029,0,0,1,6,0l10,10",transform:"translate(4 10.33)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),i||(i=s.createElement("path",{d:"M14,15.67l2-2a4.029,4.029,0,0,1,6,0l4,4",transform:"translate(14 12.33)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})))}var u=s.forwardRef(_);a.p},7018:function(e,t,a){var n=a(72791),o=a(80184);t.Z=function(e){var t=e.progress,a=(0,n.useRef)();return(0,n.useEffect)((function(){var e;null===a||void 0===a||null===(e=a.current)||void 0===e||e.style.setProperty("--progress",t)}),[t]),(0,o.jsx)("div",{className:"progressbar",children:(0,o.jsx)("div",{ref:a,className:"progressbar__value"})})}},46332:function(e,t,a){a.d(t,{d:function(){return n}});var n=["Children (0-14 years)","Youth (15-24 years)","Adults (25-64 years)","Seniors 65+"]},83483:function(e,t,a){a.d(t,{x:function(){return n}});var n=["Adventure","Art","Autobiography","Biography","Business","Children's","Children's History","Classics","Comics","Contemporary Fiction","Cookbooks","Crime Fiction","Drama","Dystopian","Essays","Family","Fantasy","Fiction","Food & Drink","Graphic Novels","Guide / How-To","Health","Historical Fiction","History","Horror","Humanities & Social Sciences","Humor","LGBTQ+","Literary Fiction","Magical Realism","Management","Memoir","Music","Mystery","New Adult","Parenting & Families","Personal Development","Philosophy","Photography","Poetry","Politics","Psychological Thrillers","Psychology","Relationships","Religion & Spirituality","Romance","Science","Science & Technology","Science Fiction","Self Help","Short Story","Society & Culture","Sports","Thriller","Travel","Women's Fiction","Young Adult"]},35771:function(e,t,a){a.d(t,{a:function(){return n}});var n=["EN - English","ZH - Chinese","DE - German","ES - Spanish","JA - Japanese","RU - Russian","FR - French","KO - Korean","IT - Italian","NL - Dutch","PT - Portugese","HI - Hindi","PL - Polish","DA - Danish","BN - Bangla"]},28027:function(e,t,a){a.r(t);var n=a(15861),o=a(1413),r=a(29439),i=a(64687),s=a.n(i),l=a(74569),p=a.n(l),c=a(72426),_=a.n(c),u=a(16871),d=a(72791),h=a(16030),b=a(54270),f=a(88952),m=a(61199),g=a(95899),v=a(43935),y=a(44643),k=a(29316),x=a(4127),j=a(75454),w=a(7018),Z=a(45972),S=a(83483),N=a(65248),E=a(35771),F=a(46332),O=a(98669),C=a(80184);t.default=function(e){var t=(0,h.I0)(),a=(0,u.s0)(),i=(0,h.v9)((function(e){return e.UserState})),l=(0,h.v9)((function(e){return e.BWalletState})),c=(0,d.useState)(!1),I=(0,r.Z)(c,2),T=I[0],P=I[1],L=(0,d.useState)(null),D=(0,r.Z)(L,2),A=D[0],G=D[1],R=(0,d.useState)(null),B=(0,r.Z)(R,2),H=B[0],M=B[1],U=(0,d.useState)({name:"",author:"",cover:null,preview:null,book:null,genres:[],ageGroup:[],price:"",pages:"",publication:"",isbn:"",synopsis:"",language:"",published:"",secondarySalesDate:"",primarySales:"",idos:"",secondaryFrom:_()().add(1,"days")}),W=(0,r.Z)(U,2),J=W[0],Y=W[1],z=(0,d.useState)(0),V=(0,r.Z)(z,2),q=V[0],K=V[1],Q=(0,d.useState)(!0),X=(0,r.Z)(Q,2),$=X[0],ee=X[1];function te(){return(te=(0,n.Z)(s().mark((function e(){var n,o,r,c,u,d,h,b,f,m,x,j,w,Z;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=J.name,o=J.author,r=J.cover,c=J.book,u=J.genres,d=J.ageGroup,h=J.price,b=J.pages,f=J.publication,m=J.synopsis,x=J.language,j=J.published,J.idos,w=J.secondaryFrom,(0,k.fb)(n)&&(0,k.vd)(o)&&(0,k.fb)(r)&&(0,k.fb)(c)&&(0,k.fb)(u)&&(0,k.fb)(d)&&(0,k.fb)(h)&&(0,k.fb)(b)&&(0,k.fb)(m)&&(0,k.fb)(x)&&(0,k.fb)(j)&&(0,k.fb)(w)?((0,g.Z)("event_ito_publish_list"),P(!0),(Z=new FormData).append("book",J.book),Z.append("cover",J.cover),Z.append("bookTitle",J.title),Z.append("synopsis",J.synopsis),p()({url:N._+"/api/book/submarine",method:"POST",headers:{"user-id":i.user.uid,address:i.user.wallet,authorization:"Bearer ".concat(i.tokens.acsTkn.tkn)},data:Z}).then((function(e){var i=e.data.book.url,s=e.data.cover.url,g=[];u.forEach((function(e){return g.push(S.x.indexOf(e).toString())}));var Z=E.a.indexOf(x).toString(),F=Math.round(_().duration(J.secondaryFrom-_()()).asDays());(0,k.fb)(Z)&&(0,k.fb)(g)&&!isNaN(F)&&(0,k.vd)(n)&&(0,k.vd)(o)&&(0,k.fb)(r)&&(0,k.fb)(c)&&(0,k.vd)(b)?v.Z.listNftForSales(H,s,h,F,Z,g,l.smartAccount.signer).then((function(e){var r=e.events.filter((function(e){return"OwnershipTransferred"===e.event}))[0].address,l=e.status,c=e.transactionHash;if((0,k.fb)(r)&&(0,k.fb)(l)&&1===l&&(0,k.fb)(c)){var _=new FormData;_.append("epub",J.preview),_.append("name",n),_.append("author",o),_.append("cover",s),_.append("coverFile",J.cover),_.append("book",i),_.append("genres",JSON.stringify(u.sort((function(e,t){return e>t})))),_.append("ageGroup",JSON.stringify(d.sort((function(e,t){return e>t})))),_.append("price",h),_.append("pages",b),_.append("publication",f),_.append("synopsis",m.replace(/<[^>]+>/g,"")),_.append("language",x),_.append("published",j),_.append("secondarySalesFrom",w),_.append("publisherAddress",H),_.append("bookAddress",r),_.append("txHash",c),p()({url:N._+"/api/book/publish",method:"POST",data:_}).then((function(e){200===e.status?((0,O.SR)("ito-publish-book-form-data"),P(!1),a("/library",{state:{tab:"published"}})):t((0,y.e1)("ERROR"))})).catch((function(e){(0,k.fb)(e.response)?413===e.response.status?t((0,y.e1)("LIMIT_FILE_SIZE")):415===e.response.status&&t((0,y.e1)("INVALID_FILE_TYPE")):t((0,y.e1)("NOT200")),P(!1)}))}else P(!1),(0,k.fb)(c)?t((0,y.e1)({show:!0,message:"The transaction to mint eBook failed.\ntxhash: ".concat(c),type:3})):t((0,y.e1)({show:!0,message:"The transaction to mint eBook failed.",type:3}))})).catch((function(e){t((0,y.e1)("NOT200")),P(!1)})):(t((0,y.e1)({show:!0,message:"Incomplete details",type:3})),P(!1))})).catch((function(e){(0,k.fb)(e.response)?413===e.response.status?t((0,y.e1)("LIMIT_FILE_SIZE")):415===e.response.status&&t((0,y.e1)("INVALID_FILE_TYPE")):t((0,y.e1)("NOT200")),P(!1)}))):t((0,y.e1)({show:!0,message:"Incomplete details",type:3}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,d.useEffect)((function(){(0,g.Z)("page_view_ito_publish")}),[]),(0,d.useEffect)((function(){(0,k.fb)(J.cover)&&G(URL.createObjectURL(J.cover))}),[J]),(0,d.useEffect)((function(){t(T?(0,x.yh)():(0,x.v3)())}),[T,t]),(0,d.useEffect)((function(){P(!0),(0,k.fb)(l.smartAccount)&&M(l.smartAccount.address),P(!1)}),[l]),(0,d.useEffect)((function(){var e=["publication","isbn","primarySales","secondarySalesDate"],t=0,a=Object.keys(J).length;Object.keys(J).forEach((function(n){var o;if(e.includes(n))return a--;""!==J[n]&&0!==(null===(o=J[n])||void 0===o?void 0:o.length)&&null!==J[n]&&t++})),K(t/a)}),[J]),(0,d.useEffect)((function(){if(window.localStorage)try{(0,g.Z)("event_ito_publish_load_data");var e=JSON.parse(window.localStorage.getItem("ito-publish-book-form-data"));if(!(0,k.fb)(e))return void ee(!1);Y((0,o.Z)((0,o.Z)({},J),{},{name:e.name,author:e.author,genres:e.genres,ageGroup:e.ageGroup,price:e.price,pages:e.pages,publication:e.publication,synopsis:e.synopsis,language:e.language})),ee(!1)}catch(t){ee(!1)}}),[]),(0,d.useEffect)((function(){(0,g.Z)("event_ito_publish_save_data"),$||window.localStorage&&window.localStorage.setItem("ito-publish-book-form-data",JSON.stringify(J))}),[J,$]),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(b.q,{children:(0,C.jsx)("meta",{name:"ITO",content:""})}),(0,C.jsx)(f.Z,{noFooter:!0,containerClass:"publish publish__bg",children:(0,C.jsxs)("div",{className:"publish__data",children:[(0,C.jsxs)("div",{className:"publish__data__form utils__padding__bottom--s",children:[(0,C.jsx)("h3",{className:"typo__head typo__head--5 utils__margin__top--b utils__margin__bottom--m",children:"Publish ITO eBook"}),(0,C.jsx)(m.Z,{type:"string",label:"book name",value:J.name,onChange:function(e){return Y((0,o.Z)((0,o.Z)({},J),{},{name:e.target.value}))},description:"Enter name of the book"}),(0,C.jsx)(m.Z,{type:"string",label:"book author",value:J.author,onChange:function(e){return Y((0,o.Z)((0,o.Z)({},J),{},{author:e.target.value}))},description:"Enter name of the author"}),(0,C.jsx)("h3",{className:"typo__head typo__head--5 utils__margin__top--b utils__margin__bottom--m",children:"Upload Files"}),(0,C.jsx)(m.Z,{type:"file",label:"cover",accept:"image/*",onChange:function(e){return Y((0,o.Z)((0,o.Z)({},J),{},{cover:e.target.files[0]}))},description:"Upload a picture of book cover. File types supported: JPG, PNG, GIF, SVG, WEBP"}),(0,C.jsx)(m.Z,{type:"file",label:"preview",accept:"application/epub+zip",onChange:function(e){return Y((0,o.Z)((0,o.Z)({},J),{},{preview:e.target.files[0]}))},description:"Upload a sample of book for preview. File types supported: EPUB"}),(0,C.jsx)(m.Z,{type:"file",label:"book",accept:"application/epub+zip",onChange:function(e){return Y((0,o.Z)((0,o.Z)({},J),{},{book:e.target.files[0]}))},description:"Upload a book. File types supported: EPUB"}),(0,C.jsx)("h3",{className:"typo__head typo__head--5 utils__margin__top--b utils__margin__bottom--m",children:"Meta Data"}),(0,C.jsx)(m.Z,{type:"number",label:"price in USDC",value:J.price,onChange:function(e){return Y((0,o.Z)((0,o.Z)({},J),{},{price:e.target.value}))},description:"Price of book in USDC"}),(0,C.jsx)(m.Z,{type:"list",label:"genres",listType:"multiple",minLimit:1,maxLimit:5,values:S.x,value:J.genres,onSave:function(e){return Y((0,o.Z)((0,o.Z)({},J),{},{genres:e}))},placeholder:"e.g., Action, Adventure",description:"Select genres for the book. Max 5 genres can be selected"}),(0,C.jsx)(m.Z,{type:"list",label:"age group",listType:"multiple",minLimit:1,maxLimit:F.d.length,values:F.d,value:J.ageGroup,onSave:function(e){return Y((0,o.Z)((0,o.Z)({},J),{},{ageGroup:e}))},placeholder:"e.g., Youth (15-24 years)",description:"Select the most appropriate age group for the book."}),(0,C.jsx)(m.Z,{type:"number",label:"number of print pages",value:J.pages,onChange:function(e){return Y((0,o.Z)((0,o.Z)({},J),{},{pages:e.target.value}))},description:"Enter number of pages in the book"}),(0,C.jsx)(m.Z,{type:"string",label:"publication",value:J.publication,onChange:function(e){return Y((0,o.Z)((0,o.Z)({},J),{},{publication:e.target.value}))},description:"Enter name of the publisher",required:!1}),(0,C.jsx)(m.Z,{type:"text",label:"synopsis",lines:8,value:J.synopsis,onChange:function(e){return Y((0,o.Z)((0,o.Z)({},J),{},{synopsis:e.target.value}))},description:"Write a brief description about the book"}),(0,C.jsx)(m.Z,{type:"list",label:"language",listType:"single",values:E.a,value:J.language,onSave:function(e){return Y((0,o.Z)((0,o.Z)({},J),{},{language:e}))},description:"Select the language of the book"}),(0,C.jsx)(m.Z,{type:"date",label:"published",onChange:function(e){return Y((0,o.Z)((0,o.Z)({},J),{},{published:e.target.value}))},description:"Enter when book was published"}),(0,C.jsx)("h3",{className:"typo__head typo__head--5 utils__margin__top--b utils__margin__bottom--m",children:"ITO Details"}),(0,C.jsx)(m.Z,{type:"number",label:"initial distributed owners",min:500,max:1e3,onChange:function(e){return Y((0,o.Z)((0,o.Z)({},J),{},{idos:e.target.value}))},description:"Number of people who can participate in Inital Title Offering"}),(0,C.jsx)(m.Z,{type:"date",label:"Secondary Market opens on",min:_()().add(90,"days"),max:_()().add(150,"days"),onChange:function(e){return Y((0,o.Z)((0,o.Z)({},J),{},{secondaryFrom:e.target.value}))},description:"From when to start secondary sales"})]}),(0,C.jsx)("div",{className:"publish__data__preview",children:(0,C.jsxs)("div",{className:"publish__data__preview__container",children:[(0,C.jsx)("h3",{className:"typo__head typo__head--5 utils__margin__top--n",children:"Preview"}),(0,C.jsxs)("div",{className:"publish__data__preview__book",onClick:function(){},children:[(0,C.jsx)("div",{className:"publish__data__preview__book__cover",children:(0,k.fb)(A)?(0,C.jsx)("img",{className:"publish__data__preview__book__cover__img",src:A,alt:J.name+" cover"}):(0,C.jsxs)("div",{className:"publish__data__preview__book__cover__placeholder",children:[(0,C.jsx)(Z.r,{stroke:"currentColor"}),(0,C.jsx)("span",{className:"utils__margin__top--m",children:"Book Cover"})]})}),(0,C.jsxs)("div",{className:"publish__data__preview__book__data",children:[(0,C.jsx)("div",{className:"publish__data__preview__book__data__title  typo__head--5",children:J.name}),(0,C.jsx)("div",{className:"publish__data__preview__book__data__author typo__subtitle typo__color--n500",children:J.author}),J.price&&(0,C.jsx)("div",{className:"publish__data__preview__book__data__price typo__color--success",children:0===parseFloat(J.price)?"FREE":(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("img",{src:"https://imagedelivery.net/yOWneHxM1h9mu46Te3Yjwg/59c27d12-e4eb-4f74-7a6e-b33ba6537600/icon48",style:{width:20,height:20,objectFit:"contain"},alt:"USDC"}),"\xa0",J.price]})}),J.language&&(0,C.jsxs)("div",{className:"publish__data__preview__book__data__field",children:[(0,C.jsx)("div",{className:"publish__data__preview__book__data__field__label typo__body typo__color--n700",children:"Language"}),(0,C.jsx)("div",{className:"publish__data__preview__book__data__field__value typo__body typo__color--n500",children:J.language})]}),(0,k.vd)(J.genres)&&(0,C.jsxs)("div",{className:"publish__data__preview__book__data__field",children:[(0,C.jsx)("div",{className:"publish__data__preview__book__data__field__label typo__body typo__color--n700",children:"Genres"}),(0,C.jsx)("div",{className:"publish__data__preview__book__data__field__chips",children:J.genres.map((function(e){return(0,C.jsx)("div",{className:"publish__data__preview__book__data__field__chips__item typo__body",children:e},e)}))})]}),J.publication&&(0,C.jsxs)("div",{className:"publish__data__preview__book__data__field",children:[(0,C.jsx)("div",{className:"publish__data__preview__book__data__field__label typo__body typo__color--n700",children:"Publication"}),(0,C.jsx)("div",{className:"publish__data__preview__book__data__field__value typo__body typo__color--n500",children:J.publication})]})]})]}),(0,C.jsxs)("div",{className:"publish__data__preview__progress",children:[(0,C.jsxs)("div",{className:"publish__data__preview__progress__container",children:[(0,C.jsxs)("div",{className:"publish__data__preview__progress__container__value typo__color--n700",children:[Math.round(100*q),"%"]}),(0,C.jsx)(w.Z,{progress:q})]}),(0,C.jsx)(j.Z,{type:"primary",disabled:!1,size:"lg",onClick:function(){return function(){return te.apply(this,arguments)}()},children:"Create ITO"})]})]})})]})})]})}}}]);
//# sourceMappingURL=27.e3340096.chunk.js.map