"use strict";(self.webpackChunkmarketplace=self.webpackChunkmarketplace||[]).push([[739],{64739:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});var r,s,n,l=a(74569),i=a.n(l),o=a(72791),c=a(16030),d=a(54270),u=a(88952),p=a(75454),f=a(61199);function h(){return h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},h.apply(this,arguments)}function _(e,t){let{title:a,titleId:l,...i}=e;return o.createElement("svg",h({xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 48 48",ref:t,"aria-labelledby":l},i),a?o.createElement("title",{id:l},a):null,r||(r=o.createElement("path",{d:"M8,4H28l8,8V32a4,4,0,0,1-4,4H8a4,4,0,0,1-4-4V8A4,4,0,0,1,8,4",transform:"translate(4 4)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),s||(s=o.createElement("circle",{cx:4,cy:4,r:4,transform:"translate(20 24)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),n||(n=o.createElement("path",{d:"M20,4v8H8V4",transform:"translate(8 4)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})))}const m=o.forwardRef(_);a.p;var v,k;function y(){return y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},y.apply(this,arguments)}function j(e,t){let{title:a,titleId:r,...s}=e;return o.createElement("svg",y({xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 48 48",ref:t,"aria-labelledby":r},s),a?o.createElement("title",{id:r},a):null,v||(v=o.createElement("path",{d:"M7,10H9a4,4,0,0,0,4-4,2,2,0,0,1,2-2H27a2,2,0,0,1,2,2,4,4,0,0,0,4,4h2a4,4,0,0,1,4,4V32a4,4,0,0,1-4,4H7a4,4,0,0,1-4-4V14a4,4,0,0,1,4-4",transform:"translate(3 4)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),k||(k=o.createElement("circle",{cx:6,cy:6,r:6,transform:"translate(18 20)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})))}const g=o.forwardRef(j);a.p;var x,b;function w(){return w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},w.apply(this,arguments)}function N(e,t){let{title:a,titleId:r,...s}=e;return o.createElement("svg",w({xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 48 48",ref:t,"aria-labelledby":r},s),a?o.createElement("title",{id:r},a):null,x||(x=o.createElement("path",{d:"M30,12V6a2,2,0,0,0-2-2H8a4,4,0,0,0,0,8H32a2,2,0,0,1,2,2v6m0,8v6a2,2,0,0,1-2,2H8a4,4,0,0,1-4-4V8",transform:"translate(4 4)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),b||(b=o.createElement("path",{d:"M26,12v8H18a4,4,0,0,1,0-8h8",transform:"translate(14 12)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})))}const E=o.forwardRef(N);a.p;var P=a(91938),L=a(95899),C=a(29316),O=a(65248),T=a(61745),R=a(44643),Z=a(4127),I=a(40696),H=a(298),W=(a(59319),a(80184));const A=()=>{const{address:e,connect:t,provider:a}=(0,H.dD)(),r=(0,c.I0)(),s=(0,o.useRef)(),n=(0,c.v9)((e=>e.UserState)),l=(0,c.v9)((e=>e.BWalletState)),[h,_]=(0,o.useState)(!1),[v,k]=(0,o.useState)({fullName:"",bio:"",displayPic:null}),[y,j]=(0,o.useState)(null),x=()=>{(0,L.Z)("event_profile_wallet"),l.smartAccount||(e||(async()=>{t()})(),(0,I.Z)(a,r))};return(0,o.useEffect)((()=>{(0,L.Z)("page_view_profile")}),[]),(0,o.useEffect)((()=>{(0,C.fb)(v.displayPic)&&j(URL.createObjectURL(v.displayPic))}),[v.displayPic]),(0,o.useEffect)((()=>{(0,C.Pc)(n)&&(_(!0),i()({url:O._+"/api/user/profile",method:"GET",headers:{"user-id":n.user.uid,authorization:`Bearer ${n.tokens.acsTkn.tkn}`}}).then((e=>{200===e.status?(k((t=>({...t,fullName:(0,C.vd)(e.data.first_name)?`${e.data.first_name} ${e.data.last_name}`:"",bio:e.data.bio}))),(0,C.vd)(e.data.display_pic)?j(`${O._}/files/${e.data.display_pic}`):j(e.data.social_pic)):r((0,R.e1)("NOT200"))})).catch((e=>{r((0,R.e1)("ERROR"))})).finally((()=>_(!1))))}),[n,r,l]),(0,o.useEffect)((()=>{r(h?(0,Z.yh)():(0,Z.v3)())}),[h,r]),(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(d.q,{children:(0,W.jsx)("meta",{name:"Profile",content:"User Profile"})}),(0,W.jsx)(u.Z,{containerClass:"profile",children:(0,W.jsxs)("div",{className:"profile__container",children:[(0,W.jsxs)("div",{className:"profile__left",children:[(0,W.jsx)("img",{src:y,alt:"Display Pic",className:"profile__left__avatar"}),(0,W.jsxs)(p.Z,{onClick:()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.click()},children:[(0,W.jsx)(g,{}),"Change"]}),(0,W.jsx)("input",{className:"file-input__hidden-input",type:"file",accept:"image/*",onChange:e=>{if((0,C.vd)(e.target.files)){k((t=>({...t,displayPic:e.target.files[0]})));const t=new FormData;t.append("displayPic",e.target.files[0]),i()({url:O._+"/api/user/profile/pic",method:"PUT",headers:{address:l.smartAccount.address,"user-id":n.user.uid,authorization:`Bearer ${n.tokens.acsTkn.tkn}`},data:t}).then((e=>{200===e.status?(r((0,T.rX)(e.data)),r((0,R.e1)({show:!0,message:"Profile Pic Updated.",type:1}))):r((0,R.e1)("NOT200"))})).catch((e=>{(0,C.fb)(e.response)?413===e.response.status?r((0,R.e1)("LIMIT_FILE_SIZE")):415===e.response.status&&r((0,R.e1)("INVALID_FILE_TYPE")):r((0,R.e1)("ERROR"))})).finally((()=>_(!1)))}else k((e=>({...e,displayPic:null})))},ref:s})]}),(0,W.jsxs)("div",{className:"profile__details",children:[(0,W.jsxs)("div",{className:"profile__details__header",children:[(0,W.jsx)("div",{className:"typo__head--4",children:"Personal Details"}),(0,W.jsxs)(p.Z,{onClick:()=>((0,L.Z)("event_profile_save"),void((0,C.vd)(v.fullName)&&(0,C.vd)(v.bio)?(_(!0),i()({url:O._+"/api/user/profile",method:"PUT",headers:{address:l.smartAccount.address,"user-id":n.user.uid,authorization:`Bearer ${n.tokens.acsTkn.tkn}`},data:{firstName:v.fullName.split(" ")[0],lastName:v.fullName.split(" ")[1],bio:v.bio}}).then((e=>{if(200===e.status){const t={...e.data,tokens:{acsTkn:n.tokens.acsTkn.tkn,rfsTkn:n.tokens.rfsTkn.tkn}};r((0,T.av)(t)),r((0,R.e1)({show:!0,message:"Profile Updated.",type:1}))}else r((0,R.e1)("NOT200"))})).catch((e=>{r((0,R.e1)("ERROR"))})).finally((()=>_(!1)))):r((0,R.e1)({show:!0,message:"Please fill all the details.",type:2})))),children:[(0,W.jsx)(m,{}),"Save"]})]}),(0,W.jsx)(f.Z,{type:"string",label:"fullname",value:(0,C.fb)(v.fullName)?v.fullName:"",onChange:e=>k({...v,fullName:e.target.value}),description:"Enter your full name"}),(0,W.jsx)(f.Z,{type:"text",label:"bio",value:v.bio,onChange:e=>{e.target.value.length<1001?k({...v,bio:e.target.value}):r((0,R.e1)({show:!0,message:"Bio cannot be longer than 1,000 characters.",type:3}))},description:`Enter your bio (${(0,C.fb)(v.bio)?v.bio.length:0}/1000)`}),(0,W.jsx)("div",{className:"profile__details__header",children:(0,W.jsx)("div",{className:"typo__head--4",children:"Connections"})}),(0,W.jsxs)("div",{className:"profile__details__connect",onClick:()=>{},children:[(0,W.jsx)("div",{className:"profile__details__connect__icon",children:(0,W.jsx)(E,{width:32,height:32,stroke:"currentColor"})}),(0,W.jsxs)("div",{className:"profile__details__connect__label typo__head--6",children:["Wallet: ",l.smartAccount.address]}),(0,W.jsx)(p.Z,{type:"primary",onClick:()=>x(),children:l.smartAccount?"open":"Connect"})]}),(0,W.jsxs)("div",{className:"profile__details__connect",children:[(0,W.jsx)("div",{className:"profile__details__connect__icon",children:(0,W.jsx)(P.r,{width:32,height:32,stroke:"currentColor"})}),(0,W.jsx)("div",{className:"profile__details__connect__label typo__head--6",children:"Connect your Twitter Account"}),(0,W.jsx)(p.Z,{type:"primary",children:"CONNECT"})]})]}),(0,W.jsx)("div",{className:"profile__spacer"})]})})]})}}}]);
//# sourceMappingURL=739.7a752891.chunk.js.map