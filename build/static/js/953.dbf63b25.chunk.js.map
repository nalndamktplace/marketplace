{"version":3,"file":"static/js/953.dbf63b25.chunk.js","mappings":"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","sources":["components/ui/Tags/Price.jsx","components/modal/Purchase/Purchase.jsx","pages/Book.jsx"],"sourcesContent":["import React from 'react'\nimport { isUsable } from '../../../helpers/functions'\n\nconst PriceTag = ({label, price}) => {\n    return (\n        <div className=\"tag__price\">{label}:&nbsp;{isUsable(price)?price===0?\"FREE\":<><img src='https://imagedelivery.net/yOWneHxM1h9mu46Te3Yjwg/59c27d12-e4eb-4f74-7a6e-b33ba6537600/icon48' style={{width: 24, height: 24, objectFit: 'contain'}} alt=\"USDC\"/>{parseFloat(price)}</>:\"loading...\"}</div>\n    )\n}\n\nexport default PriceTag","import React, { useCallback, useEffect, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\n\nimport Button from '../../ui/Buttons/Button'\nimport Backdrop from '../../hoc/Backdrop/Backdrop'\n\nimport GaTracker from '../../../trackers/ga-tracker'\n\nimport { hideSpinner, showSpinner } from '../../../store/actions/spinner'\nimport { SHOW_PURCHASE_MODAL } from '../../../store/actions/modal'\n\nimport { ReactComponent as CloseIcon } from \"../../../assets/icons/close-icon.svg\"\n\nimport { ChainId } from '@biconomy/core-types'\nimport { ethers } from 'ethers'\nimport PriceTag from '../../ui/Tags/Price'\nimport { USDC_ADDRESS } from '../../../config/constants'\n\nconst PurchaseModal = ({onOldBookPurchase,onNewBookPurchase,data}) => {\n\n\tconst dispatch = useDispatch()\n\n\tconst UserState = useSelector(state => state.UserState)\n\tconst ModalState = useSelector(state => state.ModalState)\n\tconst BWalletState = useSelector(state => state.BWalletState)\n\n\tconst [Show, setShow] = useState(false)\n\tconst [Loading, setLoading] = useState(false)\n\tconst [WalletData, setWalletData] = useState(null)\n\n\tconst getBalance = useCallback(\n\t\tasync () => {\n\t\t\tconst balanceParams = {\n\t\t\t\tchainId: ChainId.POLYGON_MUMBAI,\n\t\t\t\teoaAddress: BWalletState.smartAccount.address,\n\t\t\t\ttokenAddresses: [USDC_ADDRESS],\n\t\t\t}\n\t\t\tconst balances = await BWalletState.smartAccount.getAlltokenBalances(balanceParams)\n\t\t\tconst usdc = balances.data.filter(token => token.contract_address === USDC_ADDRESS)[0]\n\t\t\tusdc.balance = ethers.utils.formatUnits(usdc?.balance, \"mwei\")\n\t\t\tsetWalletData(usdc)\n\t\t},\n\t\t[BWalletState.smartAccount],\n\t)\n\n\tconst getClasses = () => {\n\t\tlet classes = [\"purchase purchase__wrapper\"]\n\t\tif (Show) classes.push(\"purchase__wrapper--open\")\n\t\telse classes.push(\"purchase__wrapper--close\")\n\t\treturn classes.join(\" \")\n\t}\n\n\tuseEffect(() => {\n\t\twindow.document.documentElement.style.overflowY = Show ? \"hidden\" : \"auto\"\n\t}, [Show])\n\n\tuseEffect(() => {\n\t\tif(Loading) dispatch(showSpinner())\n\t\telse dispatch(hideSpinner())\n\t}, [Loading, dispatch])\n\n\tuseEffect(() => {\n\t\tif(ModalState.show === true && ModalState.type === SHOW_PURCHASE_MODAL){\n\t\t\tGaTracker('modal_view_purchase')\n\t\t\tsetShow(true)\n\t\t\tgetBalance()\n\t\t}\n\t\telse setShow(false)\n\t}, [ModalState, BWalletState, getBalance])\n\n\treturn (\n\t\t<Backdrop show={Show}>\n\t\t\t<div className={getClasses()}>\n\t\t\t\t<div className=\"purchase__wrapper__header\">\n\t\t\t\t\t<div className=\"purchase__wrapper__header__title typo__head--6 typo__transform--capital\">Checkout</div>\n\t\t\t\t\t<div className=\"purchase__wrapper__header__close-button\">\n\t\t\t\t\t\t<div onClick={()=>setShow(false)}><CloseIcon width={20} height={20}/></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"purchase__wrapper__content\">\n\t\t\t\t\t<div className=\"\">Title: {data.title}</div>\n\t\t\t\t\t<PriceTag label={\"price\"} price={data.price}/>\n\t\t\t\t\t<PriceTag label={\"your balance\"} price={WalletData?.balance}/>\n\t\t\t\t\t<PriceTag label={\"balance after purchase\"} price={parseFloat(WalletData?.balance - data.price).toFixed(6)}/>\n\t\t\t\t\t<br/>\n\t\t\t\t\t<Button type=\"primary\" onClick={()=>onNewBookPurchase()}>Purchase</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Backdrop>\n\t)\n}\n\nexport default PurchaseModal","import axios from 'axios'\nimport moment from 'moment'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { useParams, useNavigate } from 'react-router'\nimport React, { useCallback, useEffect, useRef, useState } from 'react'\nimport { Helmet } from 'react-helmet'\n\nimport { ethers } from 'ethers'\nimport { keccak256 } from \"@ethersproject/keccak256\";\nimport { toUtf8Bytes } from \"@ethersproject/strings\";\n\nimport Page from '../components/hoc/Page/Page'\n\nimport Contracts from '../connections/contracts'\n\nimport Stars from '../components/ui/Stars/Stars'\nimport Button from '../components/ui/Buttons/Button'\nimport ListModal from '../components/modal/List/List'\nimport QuoteModal from '../components/modal/Quote/QuoteModal'\nimport ReviewModal from '../components/modal/Review/ReviewModal'\nimport PurchaseModal from '../components/modal/Purchase/Purchase'\nimport ShareListModal from '../components/modal/ShareList/ShareList'\n\nimport Wallet from '../connections/wallet'\n\nimport GaTracker from '../trackers/ga-tracker'\nimport { BASE_URL } from '../config/env'\nimport { isFilled, isNotEmpty, isUsable } from '../helpers/functions'\n\nimport { setSnackbar } from '../store/actions/snackbar'\nimport { hideSpinner, showSpinner } from '../store/actions/spinner'\nimport { hideModal, showModal, SHOW_LIST_MODAL, SHOW_PURCHASE_MODAL, SHOW_QUOTE_MODAL, SHOW_REVIEW_MODAL, SHOW_SHARE_MODAL } from '../store/actions/modal'\n\nimport useIsLoggedIn from '../hook/useIsLoggedIn'\n\nimport BackgroundBook from '../assets/images/background-book.svg'\nimport {ReactComponent as LikeIcon} from '../assets/icons/like.svg'\nimport {ReactComponent as CartIcon} from \"../assets/icons/cart-add.svg\"\nimport {ReactComponent as PrintIcon} from \"../assets/icons/print.svg\"\nimport {ReactComponent as QuoteIcon} from \"../assets/icons/quote.svg\"\nimport {ReactComponent as UsersIcon} from \"../assets/icons/users.svg\"\nimport {ReactComponent as ReviewIcon} from \"../assets/icons/message.svg\"\nimport {ReactComponent as SynopsisIcon} from \"../assets/icons/text.svg\"\nimport {ReactComponent as LanguageIcon} from \"../assets/icons/language.svg\"\nimport {ReactComponent as BlockQuoteIcon} from \"../assets/icons/block-quote.svg\"\nimport {ReactComponent as LiveReadersIcon} from \"../assets/icons/live_readers.svg\"\nimport {ReactComponent as ExternalLinkIcon} from \"../assets/icons/external-link.svg\"\nimport {ReactComponent as TotalReadTimeIcon} from \"../assets/icons/total_read_time.svg\"\n\nimport {useWeb3AuthContext} from '../contexts/SocialLoginContext'\nimport { GAS_LIMIT, USDC_ADDRESS } from '../config/constants'\nimport { useSmartAccountContext } from '../contexts/SmartAccountContext'\n\nconst BookPage = props => {\n\n\tconst TABS = [{id: 'TAB01', label: 'Synopsis', icon : <SynopsisIcon />}, {id: 'TAB02', label: 'reviews',icon : <ReviewIcon />}, {id: 'TAB03', label: 'quotes',icon:<BlockQuoteIcon/>}]\n\n\tconst params = useParams()\n\tconst dispatch = useDispatch()\n\tconst navigate = useNavigate()\n\tconst isLoggedIn = useIsLoggedIn()\n\tconst { getWalletBalance } = useSmartAccountContext()\n\n\tconst {\n\t\taddress,\n\t\tconnect,\n\t\tprovider,\n\t} = useWeb3AuthContext();\n\n\tconst UserState = useSelector(state => state.UserState)\n\tconst BWalletState = useSelector(state=> state.BWalletState)\n\n\tconst [WalletAddress, setWalletAddress] = useState(null)\n\tconst [Loading, setLoading] = useState(false)\n\tconst [ActiveTab, setActiveTab] = useState('TAB01')\n\t// NFT\n\tconst [NFT, setNFT] = useState(null)\n\tconst [Owner, setOwner] = useState(null)\n\tconst [Listed, setListed] = useState(null)\n\tconst [UserCopy, setUserCopy] = useState(null)\n\tconst [Published, setPublished] = useState(null)\n\t// ListedNFT\n\tconst [bookID, setBookID] = useState(null)\n\t// Likes\n\tconst [Likes, setLikes] = useState(0)\n\tconst [Liked, setLiked] = useState(false)\n\t// Reviews\n\tconst [Rating, setRating] = useState(0)\n\tconst [Review, setReview] = useState(null)\n\tconst [Reviews, setReviews] = useState([])\n\tconst [TotalReveiws, setTotalReveiws] = useState(0)\n\tconst [ReviewForm, setReviewForm] = useState({title: '', body: '', rating: 0})\n\t// Quotes\n\tconst [Quote, setQuote] = useState(null)\n\tconst [Quotes, setQuotes] = useState([])\n\tconst [QuotesForm, setQuotesForm] = useState({quote: ''})\n\t// live reader count\n\tconst [totalReaders, setTotalReaders] = useState(0)\n\tconst [liveReaderCount, setLiveReaderCount] = useState(0)\n\tconst [totalReadTime, setTotalReadTime] = useState(0)\n\t// tabs\n\tconst TabContainerRef = useRef();\n\n\tuseEffect(() => { GaTracker('page_view_book') }, [])\n\n\tuseEffect(() => {\n\t\tif(ActiveTab === 'TAB01') GaTracker('tab_view_book_synopsis')\n\t\telse if(ActiveTab === 'TAB02') GaTracker('tab_view_book_reviews')\n\t\telse GaTracker('tab_view_book_quotes')\n\t}, [ActiveTab])\n\n\tuseEffect(() => { if(isUsable(NFT)) setListed(NFT.listed === 1?true:false) }, [NFT])\n\n\tconst getReviews = useCallback(\n\t\t() => {\n\t\t\tif(isUsable(NFT)){\n\t\t\t\tsetLoading(true)\n\t\t\t\taxios({\n\t\t\t\t\turl: `${BASE_URL}/api/book/reviews`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tbookAddress: NFT.book_address\n\t\t\t\t\t}\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif(res.status === 200){\n\t\t\t\t\t\tsetReviews(res.data.reviews)\n\t\t\t\t\t\tsetRating(res.data.rating)\n\t\t\t\t\t\tsetTotalReveiws(res.data.total)\n\t\t\t\t\t}\n\t\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t}).finally(() => setLoading(false))\n\t\t\t}\n\t\t},\n\t\t[NFT, dispatch],\n\t)\n\t\n\tconst getUserReview = useCallback(\n\t\t() => {\n\t\t\tif(isUsable(NFT) && isUsable(WalletAddress)){\n\t\t\t\tsetLoading(true)\n\t\t\t\taxios({\n\t\t\t\t\turl: `${BASE_URL}/api/book/reviewed`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tbookAddress: NFT.book_address,\n\t\t\t\t\t\townerAddress: WalletAddress\n\t\t\t\t\t}\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif(res.status === 200){\n\t\t\t\t\t\tif(isNotEmpty(res.data))\n\t\t\t\t\t\t\tsetReview(res.data)}\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t}).finally(() => setLoading(false))\n\t\t\t}\n\t\t},\n\t\t[NFT, WalletAddress, dispatch],\n\t)\n\n\tconst getQuotes = useCallback(\n\t\t() => {\n\t\t\tif(isUsable(NFT)){\n\t\t\t\tsetLoading(true)\n\t\t\t\taxios({\n\t\t\t\t\turl: `${BASE_URL}/api/book/quotes`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tbookAddress: NFT.book_address\n\t\t\t\t\t}\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif(res.status === 200) setQuotes(res.data)\n\t\t\t\t\telse if(res.status === 204) {}\n\t\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t}).finally(() => setLoading(false))\n\t\t\t}\n\t\t},\n\t\t[NFT, dispatch],\n\t)\n\n\tconst getUserQuote = useCallback(\n\t\t() => {\n\t\t\tif(isUsable(NFT) && isUsable(WalletAddress)){\n\t\t\t\tsetLoading(true)\n\t\t\t\taxios({\n\t\t\t\t\turl: `${BASE_URL}/api/book/quoted`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tbookAddress: NFT.book_address,\n\t\t\t\t\t\townerAddress: WalletAddress\n\t\t\t\t\t}\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif(res.status === 200){\n\t\t\t\t\t\tif(isNotEmpty(res.data))\n\t\t\t\t\t\t\tsetQuote(res.data)\n\t\t\t\t\t}\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t}).finally(() => setLoading(false))\n\t\t\t}\n\t\t},\n\t\t[NFT, WalletAddress, dispatch],\n\t)\n\n\tuseEffect(() => { getReviews() }, [getReviews])\n\n\tuseEffect(() => { getUserReview() }, [getUserReview])\n\n\tuseEffect(() => { getQuotes() }, [getQuotes])\n\n\tuseEffect(() => { getUserQuote() }, [getUserQuote])\n\n\tuseEffect(() => {\n\t\tif(isUsable(NFT)){\n\t\t\tsetLoading(true)\n\t\t\taxios({\n\t\t\t\turl: `${BASE_URL}/api/book/likes`,\n\t\t\t\tmethod: 'GET',\n\t\t\t\tparams: {\n\t\t\t\t\tbookAddress: NFT.book_address\n\t\t\t\t}\n\t\t\t}).then(res => {\n\t\t\t\tif(res.status === 200) setLikes(res.data.likes)\n\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t}).catch(err => {\n\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t}).finally( () => setLoading(false))\n\t\t}\n\t}, [NFT, dispatch])\n\n\tuseEffect(() => {\n\t\tif(isUsable(NFT) && isUsable(WalletAddress)){\n\t\t\tsetLoading(true)\n\t\t\taxios({\n\t\t\t\turl: `${BASE_URL}/api/book/liked`,\n\t\t\t\tmethod: 'GET',\n\t\t\t\tparams: {\n\t\t\t\t\tbookAddress: NFT.book_address,\n\t\t\t\t\townerAddress: WalletAddress\n\t\t\t\t}\n\t\t\t}).then(res => {\n\t\t\t\tif(res.status === 200) setLiked(res.data.liked)\n\t\t\t}).catch(err => {\n\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t}).finally(() => setLoading(false))\n\t\t}\n\t}, [NFT, WalletAddress, dispatch])\n\n\tuseEffect(() => {\n\t\tif(isUsable(NFT)){\n\t\t\tsetLoading(true)\n\t\t\taxios({\n\t\t\t\turl: `${BASE_URL}/api/reader/total-reader-count`,\n\t\t\t\tmethod: 'GET',\n\t\t\t\tparams: { bookAddress: NFT.book_address }\n\t\t\t}).then(res => {\n\t\t\t\tif(res.status === 200) setTotalReaders(res.data.total_readers)\n\t\t\t}).catch(err => {\n\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t}).finally(() => setLoading(false))\n\t\t}\n\t}, [NFT, dispatch])\n\n\tuseEffect(() => {\n\t\tif(isUsable(NFT)){\n\t\t\tsetLoading(true)\n\t\t\taxios({\n\t\t\t\turl: `${BASE_URL}/api/reader/count`,\n\t\t\t\tmethod: 'GET',\n\t\t\t\tparams: { bookAddress: NFT.book_address }\n\t\t\t}).then(res => {\n\t\t\t\tif(res.status === 200) setLiveReaderCount(res.data.reader_count)\n\t\t\t}).catch(err => {\n\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t}).finally(() => setLoading(false))\n\t\t}\n\t}, [NFT, dispatch])\n\n\tuseEffect(() => {\n\t\tif(isUsable(NFT)){\n\t\t\tsetLoading(true)\n\t\t\taxios({\n\t\t\t\turl: `${BASE_URL}/api/reader/total-read-time`,\n\t\t\t\tmethod: 'GET',\n\t\t\t\tparams: { bookAddress: NFT.book_address }\n\t\t\t}).then(res => {\n\t\t\t\tif(res.status === 200) setTotalReadTime(res.data.total_read_time)\n\t\t\t}).catch(err => {\n\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t}).finally(() => setLoading(false))\n\t\t}\n\t}, [NFT, dispatch])\n\n\tuseEffect(() => {\n\t\tsetLoading(true)\n\t\tif(isUsable(BWalletState.smartAccount)){\n\t\t\tsetWalletAddress(BWalletState.smartAccount.address)\n\t\t} \n\t\t\n\t\tsetLoading(false)\n\t}, [BWalletState])\n\n\tuseEffect(() => { if(isUsable(Review)) setReviewForm({title: Review.title, body: Review.body, rating: Review.rating}) }, [Review])\n\tuseEffect(() => {\n        const bookID = params.bookID\n        axios({\n            url: `${BASE_URL}/api/book`,\n            method: 'GET',\n            params: {\n                id: bookID\n            }\n        }).then(res=>{\n            setNFT(res.data[0])\n        })\n\t}, [params])\n\t\n\tuseEffect(() =>{\n\t\tif(isUsable(WalletAddress) && isUsable(NFT)){\n\t\t\tsetLoading(true)\n\t\t\tconst book = NFT\n\t\t\tif(book.new_owner === WalletAddress) setOwner(true)\n\t\t\telse setOwner(false)\n\t\t\tif(book.publisher_address === WalletAddress) setPublished(true)\n\t\t\telse setPublished(false)\n\t\t\taxios({\n\t\t\t\turl: BASE_URL+'/api/book/owner',\n\t\t\t\tmethod: 'GET',\n\t\t\t\tparams: {\n\t\t\t\t\townerAddress: WalletAddress,\n\t\t\t\t\tbookAddress: book.book_address\n\t\t\t\t}\n\t\t\t}).then(res => { if(res.status === 200) setOwner(true)\n\t\t\t}).catch(err => {\n\t\t\t}).finally(() => setLoading(false))\n\t\t} }, [NFT, params, dispatch, WalletAddress]\n\t)\n\n\tuseEffect(() => { if(isUsable(NFT) && isUsable(Published) && isUsable(Owner)) setLoading(false) }, [NFT, Published, Owner])\n\n\tuseEffect(() => {\n\t\tif(Loading) dispatch(showSpinner())\n\t\telse dispatch(hideSpinner())\n\t}, [Loading, dispatch])\n\n\tuseEffect(()=>{\n\t\tlet activeTabElement = document.getElementById(\"BOOK_PAGE_\" + ActiveTab);\n\t\tif(!isUsable(activeTabElement)) return ;\n\t\tif(!isUsable(TabContainerRef.current)) return;\n\t\tTabContainerRef.current.style.setProperty(\"--marker-x\",activeTabElement.offsetLeft);\n\t},[ActiveTab])\n\n\tuseEffect(() => {\n\t\tif(Owner){\n\t\t\taxios({\n\t\t\t\turl: `${BASE_URL}/api/user/book`,\n\t\t\t\tmethod: 'GET',\n\t\t\t\theaders: {\n\t\t\t\t\t'user-id': UserState.user.uid,\n\t\t\t\t\t'address': BWalletState.smartAccount.address,\n\t\t\t\t\t'authorization': `Bearer ${UserState.tokens.acsTkn.tkn}`\n\t\t\t\t},\n\t\t\t\tparams: {walletAddress: BWalletState.smartAccount.address, bookAddress: NFT.book_address}\n\t\t\t}).then(res => {\n\t\t\t\tif(res.status === 200) {\n\t\t\t\t\tsetUserCopy(res.data)\n\t\t\t\t\tsetListed(res.data.listed)\n\t\t\t\t}\n\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t}).catch(err => {\n\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t})\n\t\t}\n\t}, [Owner, UserState, BWalletState, dispatch, NFT])\n\n\tconst loginHandler = async () => {\n\t\tconnect();\n\t}\n\n\tconst walletStatus = () => {\n\t\tif (isUsable(BWalletState.smartAccount)) {\n\t\t\tsetWalletAddress(BWalletState.smartAccount.address)\n\t\t\treturn true\n\t\t}\n\t\telse {\n\t\t\tif (!address) {\n\t\t\t\tloginHandler();\n\t\t\t}\n\t\t\tWallet(provider, dispatch);\n\t\t}\n\t}\n\n\tconst unlistHandler = () => {\n\t\tGaTracker('event_book_unlist')\n\t\tif(isUsable(WalletAddress)){\n\t\t\tsetLoading(true)\n\t\t\taxios({\n\t\t\t\turl: BASE_URL + '/api/user/book/listed',\n\t\t\t\tmethod: 'GET',\n\t\t\t\theaders: {\n\t\t\t\t\t'user-id': UserState.user.uid,\n\t\t\t\t\t'authorization': `Bearer ${UserState.tokens.acsTkn.tkn}`\n\t\t\t\t},\n\t\t\t\tparams: {\n\t\t\t\t\townerAddress: WalletAddress,\n\t\t\t\t\ttokenId: UserCopy.token_id,\n\t\t\t\t\tbookAddress: NFT.book_address\n\t\t\t\t}\n\t\t\t}).then(res => {\n\t\t\t\tif(res.status === 200){\n\t\t\t\t\tsetLoading(true)\n\t\t\t\t\tconst orderId = res.data.order_id\n\t\t\t\t\tContracts.unlistBookFromMarketplace(orderId, BWalletState.smartAccount.signer).then(res => {\n\t\t\t\t\t\tsetLoading(true)\n\t\t\t\t\t\taxios({\n\t\t\t\t\t\t\turl: BASE_URL + '/api/book/unlist',\n\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\townerAddress: WalletAddress,\n\t\t\t\t\t\t\t\tbookAddress: NFT.book_address,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).then(res => {\n\t\t\t\t\t\t\tif(res.status === 200){\n\t\t\t\t\t\t\t\tsetListed(false)\n\t\t\t\t\t\t\t\tdispatch(hideModal())\n\t\t\t\t\t\t\t\tdispatch(setSnackbar({show: true, message: \"Book unlisted from marketplace.\", type: 1}))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t\t\t}).finally( ()=> { setLoading(false) })\n\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\tsetLoading(false)\n\t\t\t\t\t\tif(isUsable(err.reason)){\n\t\t\t\t\t\t\tif(err.reason.includes('NFT not yet listed / already sold')) dispatch(setSnackbar({show: true, message: \"eBook already sold or not listed.\", type: 3}))\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse dispatch(setSnackbar('ERROR'))\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t}).catch(err => {\n\t\t\t\tsetLoading(false)\n\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t})\n\t\t}\n\t}\n\n\tconst listHandler = () => {\n\t\tdispatch(showModal(SHOW_LIST_MODAL))\n\t\tif(moment(NFT.secondary_sales_from).isSame(moment()) || moment(NFT.secondary_sales_from).isBefore(moment())) dispatch(showModal(SHOW_LIST_MODAL))\n\t\telse if(moment(NFT.secondary_sales_from).isAfter(moment())) dispatch(setSnackbar({show: true, message: `Secondary Sales will open only after ${moment(NFT.secondary_sales_from).format('D MMM, YYYY')}.`, type: 2}))\n\t}\n\n\t// TODO: Compatible for Biconomy wallet\n\tconst onListHandler = listPrice => {\n\t\tGaTracker('event_book_list')\n\t\tif(isUsable(WalletAddress)){\n\t\t\tsetLoading(true)\n\t\t\tContracts.listBookToMarketplace(NFT.book_address, UserCopy.token_id, listPrice, BWalletState.smartAccount.signer).then(res => {\n\t\t\t\tsetLoading(true)\n\t\t\t\tconst orderId = parseInt(res.events.filter(event => event.event === 'CoverListed')[0].args[0]._hex)\n\t\t\t\taxios({\n\t\t\t\t\turl: BASE_URL + '/api/book/list',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\townerAddress: WalletAddress,\n\t\t\t\t\t\tbookAddress: NFT.book_address,\n\t\t\t\t\t\tbookPrice: listPrice,\n\t\t\t\t\t\tbookOrderId: orderId,\n\t\t\t\t\t\tbookTokenId: UserCopy.token_id\n\t\t\t\t\t}\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif(res.status === 200){\n\t\t\t\t\t\tsetListed(true)\n\t\t\t\t\t\tdispatch(hideModal())\n\t\t\t\t\t\tdispatch(setSnackbar({show: true, message: \"Book listed on marketplace.\", type: 1}))\n\t\t\t\t\t\tif(res.data){\n\t\t\t\t\t\t\tsetBookID(res.data)\n\t\t\t\t\t\t\tdispatch(showModal(SHOW_SHARE_MODAL))\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t}).finally( ()=> { setLoading(false) })\n\t\t\t}).catch(err => {\n\t\t\t\tif(isUsable(err.reason)){\n\t\t\t\t\tif(err.reason.includes(\"Can't list the cover at this time\")) dispatch(setSnackbar({show: true, message: \"Please wait for some more time before listing the book.\", type: 3}))\n\t\t\t\t\telse if(err.reason.includes(\"Listing for this book is disabled\")) dispatch(setSnackbar({show: true, message: \"Listing this book is not allowed right now. Please try again later.\", type: 3}))\n\t\t\t\t\telse if(err.reason.includes(\"Seller should own the NFT to list\")) dispatch(setSnackbar({show: true, message: \"Book is already listed. Please contact us on support@nalnda.com\", type: 3}))\n\t\t\t\t}\n\t\t\t\telse dispatch(setSnackbar('ERROR'))\n\t\t\t}).finally(() => setLoading(false))\n\t\t}\n\t}\n\n\tconst readHandler = async () => {\n\t\tGaTracker('event_book_read')\n\t\tsetLoading(true)\n\t\ttry {\n\t\t\t// axios({\n\t\t\t// \turl: `${BASE_URL}/api/verify`,\n\t\t\t// \tmethod: 'GET',\n\t\t\t// \tparams: {\n\t\t\t// \t\tbookAddress: NFT.book_address,\n\t\t\t// \t\townerAddress: WalletAddress\n\t\t\t// \t}\n\t\t\t// }).then(res => {\n\t\t\t// \tif(res.status === 200){\n\t\t\t// \t\tconst messageToSign = res.data\n\t\t\t// \t\tWallet.signMessage(BWalletState.smartAccount.signer, JSON.stringify(messageToSign)).then(res => {\n\t\t\t// \t\t\tif(res.isValid === true){\n\t\t\t// \t\t\t\taxios({\n\t\t\t// \t\t\t\t\turl : BASE_URL + '/api/verify',\n\t\t\t// \t\t\t\t\tmethod : \"POST\",\n\t\t\t// \t\t\t\t\theaders: {\n\t\t\t// \t\t\t\t\t\t'address': BWalletState.smartAccount.address,\n\t\t\t// \t\t\t\t\t\t'user-id': UserState.user.uid,\n\t\t\t// \t\t\t\t\t\t'authorization': `Bearer ${UserState.tokens.acsTkn.tkn}`\n\t\t\t// \t\t\t\t\t},\n\t\t\t// \t\t\t\t\tdata : {\n\t\t\t// \t\t\t\t\t\taccountAddress: WalletAddress,\n\t\t\t// \t\t\t\t\t\tbookAddress: NFT.book_address,\n\t\t\t// \t\t\t\t\t\tsignedData: res.signedData,\n\t\t\t// \t\t\t\t\t\tcid : NFT.book.slice(NFT.book.lastIndexOf(\"/\")+1),\n\t\t\t// \t\t\t\t\t}\n\t\t\t// \t\t\t\t}).then(res=>{\n\t\t\t// \t\t\t\t\tif(res.status === 200) {\n\t\t\t// \t\t\t\t\t\tGaTracker('navigate_book_reader')\n\t\t\t// \t\t\t\t\t\tnavigate('/library/reader', {state: {book: {...NFT, url: res.data.url}, preview: false}}) \n\t\t\t// \t\t\t\t\t}\n\t\t\t// \t\t\t\t\telse dispatch(setSnackbar({show:true,message : \"Error\", type : 4}))\n\t\t\t// \t\t\t\t}).catch(err => { dispatch(setSnackbar('ERROR'))\n\t\t\t// \t\t\t\t}).finally( () => setLoading(false))\n\t\t\t// \t\t\t}\n\t\t\t// \t\t\telse dispatch(setSnackbar({show: true, message: \"Could not verify the authenticity of the signature.\", type: 3}))\n\t\t\t// \t\t})\n\t\t\t// \t}\n\t\t\t// \telse dispatch(setSnackbar('NOT200'))\n\t\t\t// })\n\t\t\taxios({\n\t\t\t\turl: `${BASE_URL}/api/verify/mobile`,\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: {\n\t\t\t\t\t'address': BWalletState.smartAccount.address,\n\t\t\t\t\t'user-id': UserState.user.uid,\n\t\t\t\t\t'authorization': `Bearer ${UserState.tokens.acsTkn.tkn}`\n\t\t\t\t},\n\t\t\t\tdata: {\n\t\t\t\t\tbookAddress: NFT.book_address,\n\t\t\t\t\townerAddress: BWalletState.smartAccount.address\n\t\t\t\t}\n\t\t\t}).then(res => {\n\t\t\t\tif(res.status === 200){\n\t\t\t\t\tGaTracker('navigate_book_reader')\n\t\t\t\t\tnavigate('/library/reader', {\n\t\t\t\t\t\tstate: {\n\t\t\t\t\t\t\tbook: {\n\t\t\t\t\t\t\t\t...NFT,\n\t\t\t\t\t\t\t\turl: `${res.data.base}?token=${res.data.token}&cid=${res.data.cid}&fileName=${res.data.fileName}`\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t} catch (err) {\n\t\t\tsetLoading(false)\n\t\t}\n\t}\n\n\tconst previewHandler = () => {\n\t\tGaTracker('navigate_book_preview')\n\t\tnavigate('/book/preview', {state: {book: NFT, preview: true}})\n\t}\n\n\tconst purchaseHandler = () => {\n\t\tconsole.log({getWalletBalance: getWalletBalance()})\n\t\tisLoggedIn?\n\t\t\tdispatch(showModal(SHOW_PURCHASE_MODAL))\n\t\t\t:dispatch(setSnackbar('NOT_LOGGED_IN'))\n\t}\n\n\tconst reviewModalHandler = () => isLoggedIn?dispatch(showModal(SHOW_REVIEW_MODAL)):dispatch(setSnackbar('NOT_LOGGED_IN'))\n\n\tconst quoteModalHandler = () => isLoggedIn?dispatch(showModal(SHOW_QUOTE_MODAL)):dispatch(setSnackbar('NOT_LOGGED_IN'))\n\n\tconst purchaseNewCopyHandler = () => {\n\t\tconst purchase = async() => {\n\t\t\ttry{\n\t\t\t\tconst approveErc721Interface = new ethers.utils.Interface(['function approve(address spender, uint256 amount)'])\n\t\t\t\tconst address = BWalletState.smartAccount.address\n\t\t\t\tconst approveData = approveErc721Interface.encodeFunctionData( 'approve', [NFT.book_address, ethers.utils.parseUnits(NFT.price.toString(), 6)] )\n\t\t\t\tconst approveTx = { to: USDC_ADDRESS, data: approveData }\n\t\t\t\tconst safeMintErc721Interface = new ethers.utils.Interface(['function safeMint(address to)'])\n\t\t\t\tconst safeMintData = safeMintErc721Interface.encodeFunctionData( 'safeMint', [address] )\n\t\t\t\tconst safeMintTx = { to: NFT.book_address, data: safeMintData }\n\t\t\t\tBWalletState.smartAccount.on('txMined', response => {\n\t\t\t\t\tconst logs = response.receipt.logs.filter(log => log.address === NFT.book_address && log.topics.length === 4 && isFilled(log.topics.filter(topic => topic === keccak256(toUtf8Bytes(\"Transfer(address,address,uint256)\")) && isFilled(log.topics[log.topics.length-1]))) )\n\t\t\t\t\tif(isFilled(logs)){\n\t\t\t\t\t\tconst tokenId = parseInt(logs[0].topics[logs[0].topics.length-1])\n\t\t\t\t\t\taxios({\n\t\t\t\t\t\t\turl: BASE_URL+'/api/book/purchase',\n\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\tdata: {ownerAddress: address, bookAddress: NFT.book_address, tokenId, purchasePrice: NFT.price}\n\t\t\t\t\t\t}).then(res => {\n\t\t\t\t\t\t\tif(res.status === 200){\n\t\t\t\t\t\t\t\tsetOwner(true)\n\t\t\t\t\t\t\t\tdispatch(hideModal())\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t\t\t}).finally(() => setLoading(false))\n\t\t\t\t\t\taxios({\n\t\t\t\t\t\t\turl: BASE_URL+'/api/book/copies',\n\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\tdata: {bookAddress: NFT.book_address, copies: tokenId}\n\t\t\t\t\t\t}).then(res => {\n\t\t\t\t\t\t\tif(res.status !== 200) dispatch(setSnackbar('NOT200'))\n\t\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tBWalletState.smartAccount.on('error', response => {\n\t\t\t\t\tsetLoading(false)\n\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t\tconsole.error({error: response})\n\t\t\t\t})\n\t\t\t\tconst transactions = [approveTx, safeMintTx]\n\t\t\t\tconst feeQuotes = await BWalletState.smartAccount.prepareRefundTransactionBatch({ transactions })\n\t\t\t\tconst transaction = await BWalletState.smartAccount.createRefundTransactionBatch({ transactions, feeQuote: feeQuotes[1] })\n\t\t\t\tawait BWalletState.smartAccount.sendTransaction({\n\t\t\t\t\ttx: transaction,\n\t\t\t\t\tgasLimit: { hex: GAS_LIMIT, type: \"hex\" }\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tsetLoading(false)\n\t\t\t\tconsole.error({error})\n\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t}\n\t\t}\n\t\tGaTracker('event_book_purchase_new')\n\t\tsetLoading(true)\n\t\tif(isUsable(WalletAddress)) purchase()\n\t\telse dispatch(setSnackbar({show: true, message: \"Please connect your WEB3 wallet.\", type: 3}))\n\t}\n\n\tconst purchaseOldCopyHandler = offer => {\n\t\tGaTracker('event_book_purchase_old')\n\t\tif(walletStatus()){\n\t\t\tsetLoading(true)\n\t\t\tContracts.buyListedCover(offer.order_id, offer.price, BWalletState.smartAccount.signer).then(res => {\n\t\t\t\taxios({\n\t\t\t\t\turl: BASE_URL+'/api/book/purchase/secondary',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tnewOwnerAddress: WalletAddress,\n\t\t\t\t\t\tpreviousOwnerAddress: offer.previous_owner,\n\t\t\t\t\t\tbookAddress: offer.book_address,\n\t\t\t\t\t\ttokenId: offer.token_id,\n\t\t\t\t\t\tpurchasePrice: offer.price,\n\t\t\t\t\t\torderId: offer.order_id,\n\t\t\t\t\t\tdaScore: offer.da_score\n\t\t\t\t\t}\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif(res.status === 200){\n\t\t\t\t\t\tdispatch(hideModal())\n\t\t\t\t\t\tsetOwner(true)\n\t\t\t\t\t}\n\t\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t}).finally(() => setLoading(false))\n\t\t\t}).catch(err => {\n\t\t\t\tsetLoading(false)\n\t\t\t})\n\t\t}\n\t}\n\n\tconst likeHandler = () => {\n\t\tif(walletStatus()){\n\t\t\tif(Owner){\n\t\t\t\tif(!Liked){\n\t\t\t\t\tsetLikes(old => old+1)\n\t\t\t\t\tGaTracker('event_book_like')\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tsetLikes(old => old-1)\n\t\t\t\t\tGaTracker('event_book_unlike')\n\t\t\t\t}\n\t\t\t\taxios({\n\t\t\t\t\turl: `${BASE_URL}/api/book/likes`,\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tbookAddress: NFT.book_address,\n\t\t\t\t\t\townerAddress: WalletAddress,\n\t\t\t\t\t\tlikedState: !Liked\n\t\t\t\t\t}\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif(res.status === 200) setLiked(old => !old)\n\t\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t}).finally( () => setLoading(false) )\n\t\t\t}\n\t\t\telse dispatch(setSnackbar({show: true, message: \"Only owners can like a book.\", type: 3}))\n\t\t}\n\t\telse dispatch(setSnackbar({show: true, message: \"Please login first.\", type: 3}))\n\t}\n\n\tconst renderGrid = () => {\n\t\treturn (\n\t\t\t<div className='book__data__container__desc__summary__grid typo__color--n700'>\n\t\t\t\t<div className='book__data__container__desc__summary__grid__item'>\n\t\t\t\t\t<LanguageIcon />\n\t\t\t\t\t<div className='book__data__container__desc__summary__grid__item__data'>{NFT.language}</div>\n\t\t\t\t</div>\n\t\t\t\t<div className='book__data__container__desc__summary__grid__item'>\n\t\t\t\t\t<UsersIcon />\n\t\t\t\t\t<div className='book__data__container__desc__summary__grid__item__data'>{totalReaders} readers</div>\n\t\t\t\t</div>\n\t\t\t\t<div className='book__data__container__desc__summary__grid__item'>\n\t\t\t\t\t<LiveReadersIcon />\n\t\t\t\t\t<div className='book__data__container__desc__summary__grid__item__data'>{liveReaderCount} people reading</div>\n\t\t\t\t</div>\n\t\t\t\t<div className='book__data__container__desc__summary__grid__item'>\n\t\t\t\t\t<TotalReadTimeIcon />\n\t\t\t\t\t<div className='book__data__container__desc__summary__grid__item__data'>{Math.ceil(totalReadTime / 60)} minutes</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n\n\tconst renderTabs = () => {\n\t\tlet tabsDOM = []\n\t\tTABS.forEach(tab => {\n\t\t\ttabsDOM.push(\n\t\t\t\t<div onClick={()=>setActiveTab(tab.id)} id={\"BOOK_PAGE_\"+tab.id} className={tab.id === ActiveTab?\"book__data__container__desc__tabs__container__item book__data__container__desc__tabs__container__item--active\":\"book__data__container__desc__tabs__container__item utils__cursor--pointer\"} key={tab.id}>\n\t\t\t\t\t{isUsable(tab.icon) && tab.icon}\n\t\t\t\t\t<h5 className=\"typo__head typo__head--6 typo__transform--capital\">{tab.label}</h5>\n\t\t\t\t</div>\n\t\t\t)\n\t\t})\n\t\treturn tabsDOM\n\t}\n\n\tconst renderTabData = () => {\n\t\tswitch (ActiveTab) {\n\t\t\tcase 'TAB01':\n\t\t\t\treturn <p className=\"typo--break-spaces typo__body typo__color--n600\">{NFT.synopsis}</p>\n\t\t\tcase 'TAB02':\n\t\t\t\tconst renderReviews = reviews => {\n\t\t\t\t\tlet reviewsDOM = []\n\t\t\t\t\tif(isFilled(reviews)) reviews.forEach(review => reviewsDOM.push(\n\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__reviews__item\">\n\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__reviews__item__header__head typo__head typo__head--6\">{review.title}</div>\n\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__reviews__item__header\">\n\t\t\t\t\t\t\t\t<Stars rating={review.rating} size={'small'}/>\n\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__reviews__item__header__time typo__color--n500\">{moment(review.reviewed_at).format(\"D MMM, YYYY\")}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__reviews__item__body typo__body typo__body--2\">{review.body}</div>\n\t\t\t\t\t\t</div>))\n\t\t\t\t\treturn reviewsDOM\n\t\t\t\t}\n\t\t\t\treturn <React.Fragment>\n\t\t\t\t\t{ !isUsable(Review) && Owner ?\n\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__action\">\n\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__action__icon\">\n\t\t\t\t\t\t\t\t<ReviewIcon width={32} height={32} stroke=\"currentColor\"/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__action__label typo__head--6\">Write a Review</div>\n\t\t\t\t\t\t\t<Button type=\"primary\" onClick={()=>reviewModalHandler()}>Review</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t:null}\n\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__reviews\">\n\t\t\t\t\t\t{renderReviews(Reviews)}\n\t\t\t\t\t\t{Reviews?.length === 0 ? <div className='book__data__container__desc__tabs__data__empty'>No Reviews</div> : \"\"}\n\t\t\t\t\t</div>\n\t\t\t\t</React.Fragment>\n\t\t\tcase 'TAB03':\n\t\t\t\tconst renderQuotes = quotes => {\n\t\t\t\t\tlet quotesDOM = []\n\t\t\t\t\tquotes.forEach((quote,i) => {\n\t\t\t\t\t\tquotesDOM.push(\n\t\t\t\t\t\t\t<div key={i} className='book__data__container__desc__tabs__data__quotes__item'>\n\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__quotes__item__icon\">\n\t\t\t\t\t\t\t\t\t<QuoteIcon width={32} height={32}  stroke=\"currentColor\"/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__quotes__item__body typo__body\">\n\t\t\t\t\t\t\t\t\t{quote.body}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__quotes__item__time typo__cap typo__cap--2\">\n\t\t\t\t\t\t\t\t\t{moment(quote.created_at).format(\"D MMM, YYYY\") || \"-\"}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)\n\t\t\t\t\t})\n\t\t\t\t\treturn quotesDOM\n\t\t\t\t}\n\t\t\t\treturn <React.Fragment>\n\t\t\t\t\t{ !isUsable(Quote) && ( Published || Owner ) ?\n\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__action\">\n\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__action__icon\">\n\t\t\t\t\t\t\t\t<BlockQuoteIcon width={32} height={32} stroke=\"currentColor\"/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__action__label typo__head--6\">Write a Quote</div>\n\t\t\t\t\t\t\t<Button type=\"primary\" onClick={()=>quoteModalHandler()}>Quote</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t:null}\n\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data__quotes\">\n\t\t\t\t\t\t{renderQuotes(Quotes)}\n\t\t\t\t\t\t{Quotes?.length === 0 ? <div className='book__data__container__desc__tabs__data__empty'>No Quotes</div> : \"\"}\n\t\t\t\t\t</div>\n\t\t\t\t</React.Fragment>\n\t\t\tdefault:\n\t\t\t\tbreak\n\t\t}\n\t}\n\n\tconst reviewHandler = () => {\n\t\tGaTracker('event_book_review')\n\t\tif(isUsable(WalletAddress)){\n\t\t\tif(isNotEmpty(ReviewForm.body) && isNotEmpty(ReviewForm.rating) && isNotEmpty(ReviewForm.title)){\n\t\t\t\tsetLoading(true)\n\t\t\t\taxios({\n\t\t\t\t\turl: `${BASE_URL}/api/book/reviews`,\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\treview: {...ReviewForm},\n\t\t\t\t\t\tbookAddress: NFT.book_address,\n\t\t\t\t\t\townerAddress: WalletAddress\n\t\t\t\t\t}\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif(res.status === 200) {\n\t\t\t\t\t\tdispatch(hideModal())\n\t\t\t\t\t\tgetUserReview()\n\t\t\t\t\t\tgetReviews()\n\t\t\t\t\t}\n\t\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tsetLoading(false)\n\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t})\n\t\t\t}\n\t\t\telse dispatch(setSnackbar({show: true, message: \"Please fill the review.\", type: 3}))\n\t\t}\n\t\telse dispatch(setSnackbar({show: true, message: \"Please login first\", type: 3}))\n\t}\n\n\tconst quoteHandler = () => {\n\t\tGaTracker('event_book_quote')\n\t\tif(isUsable(WalletAddress)){\n\t\t\tif(isNotEmpty(QuotesForm.quote)){\n\t\t\t\tsetLoading(true)\n\t\t\t\taxios({\n\t\t\t\t\turl: `${BASE_URL}/api/book/quotes`,\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tquote: {body:QuotesForm.quote},\n\t\t\t\t\t\tbookAddress: NFT.book_address,\n\t\t\t\t\t\townerAddress: WalletAddress\n\t\t\t\t\t}\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif(res.status === 200){\n\t\t\t\t\t\tdispatch(hideModal())\n\t\t\t\t\t\tgetUserQuote()\n\t\t\t\t\t\tgetQuotes()\n\t\t\t\t\t}\n\t\t\t\t\telse dispatch(setSnackbar('NOT200'))\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tsetLoading(false)\n\t\t\t\t\tdispatch(setSnackbar('ERROR'))\n\t\t\t\t})\n\t\t\t}\n\t\t\telse dispatch(setSnackbar({show: true, message: \"Please enter the quote.\", type: 3}))\n\t\t}\n\t\telse dispatch(setSnackbar({show: true, message: \"Please login first\", type: 3}))\n\t}\n\n\treturn (\n\t\t<>\n\t\t<Helmet>\n\t\t\t<meta name=\"Book's Page\" content='Buy & Read the book you like'/>\n\t\t</Helmet>\n\t\t<Page>\n\t\t\t<div className=\"book__bg\">\n\t\t\t\t<img src={BackgroundBook} alt=\"background\" loading=\"lazy\"/>\n\t\t\t</div>\n\t\t\t{isUsable(NFT)?\n\t\t\t\t<>\n\t\t\t\t\t<div className=\"book__data\">\n\t\t\t\t\t\t<div className=\"book__data__background\"/>\n\t\t\t\t\t\t<div className=\"book__data__container\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div className='book__data__container__cover'>\n\t\t\t\t\t\t\t\t\t<img className='book__data__container__cover__image' src={NFT.cover_display_url?NFT.cover_display_url:NFT.cover_public_url?NFT.cover_public_url:NFT.cover} alt={NFT.name}/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className='book__data__container__meta'>\n\t\t\t\t\t\t\t\t\t<h3 className=\"typo__color--n700 typo__head typo__head--3 typo__transform--capital\">{NFT.title}</h3>\n\t\t\t\t\t\t\t\t\t<h5 className=\"typo__color--n500 typo__head typo__head--6 typo__transform--upper\">{NFT.author}</h5>\n\t\t\t\t\t\t\t\t\t{Owner||Published?null:<div className='book__data__container__meta__price typo-head--6 typo__act typo__color--success'>{NFT.price===0?\"FREE\":<><img src='https://imagedelivery.net/yOWneHxM1h9mu46Te3Yjwg/59c27d12-e4eb-4f74-7a6e-b33ba6537600/icon48' style={{width: 20, height: 20, objectFit: 'contain'}} alt=\"USDC\"/>&nbsp;{NFT.price}</>}</div>}\n\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__meta__rating\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__meta__rating__stars\">\n\t\t\t\t\t\t\t\t\t\t\t<Stars size={'small'} rating={Rating}/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className='book__data__container__meta__rating__count typo__body'>\n\t\t\t\t\t\t\t\t\t\t\t{TotalReveiws} reviews\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__meta__cta\">\n\t\t\t\t\t\t\t\t\t\t{Listed\n\t\t\t\t\t\t\t\t\t\t\t?\n\t\t\t\t\t\t\t\t\t\t\t\t<Button type=\"primary\" size=\"lg\" onClick={()=>unlistHandler()}>Unlist</Button>\n\t\t\t\t\t\t\t\t\t\t\t:Published\n\t\t\t\t\t\t\t\t\t\t\t\t?<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button type=\"primary\" size=\"lg\" onClick={()=>readHandler()}>Read</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t:Owner\n\t\t\t\t\t\t\t\t\t\t\t\t\t?<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button type=\"primary\" size=\"lg\" onClick={()=>readHandler()}>Read</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button onClick={()=>listHandler()}>List</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t\t:<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button type=\"primary\" size=\"lg\" onClick={()=>purchaseHandler()}>Buy Now</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button onClick={()=>previewHandler()}>Preview</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className='book__data__container__desc'>\n\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__left\">\n\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__summary\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__summary__contract\" onClick={()=>window.open(`https://mumbai.polygonscan.com/address/${NFT.book_address}`, \"_blank\")}>\n\t\t\t\t\t\t\t\t\t\t\t<div className='book__data__container__desc__summary__contract__data'>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className='book__data__container__desc__summary__contract__label typo__color--n700'>Contract Address</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className='book__data__container__desc__summary__contract__value typo__color--n500'>{(NFT.book_address||\"\").slice(0,12)}{(NFT.book_address||\"\").slice((NFT.contract||\"\").length-10)}</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className='book__data__container__desc__summary__contract__icon'>\n\t\t\t\t\t\t\t\t\t\t\t\t<ExternalLinkIcon width={24} height={24}/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className='book__data__container__desc__summary__head typo__color--n700'>Genres</div>\n\t\t\t\t\t\t\t\t\t\t<div className='book__data__container__desc__summary__chips typo__transform--capital'>{JSON.parse(NFT.genres).map(g=><div className=\"book__data__container__desc__summary__chips__item\">{g}</div>)}</div>\n\t\t\t\t\t\t\t\t\t\t<div className='book__data__container__desc__summary__head typo__color--n700'>Prefered Age Group</div>\n\t\t\t\t\t\t\t\t\t\t<div className='book__data__container__desc__summary__chips typo__transform--capital'>{JSON.parse(NFT.age_group).map(g=><div className=\"book__data__container__desc__summary__chips__item\">{g}</div>)}</div>\n\t\t\t\t\t\t\t\t\t\t{renderGrid()}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__right\">\n\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__interacts\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__interacts__item\">\n\t\t\t\t\t\t\t\t\t\t\t<div className='typo__subtitle typo__color--n500'>Likes</div>\n\t\t\t\t\t\t\t\t\t\t\t<LikeIcon width={24} height={24} className=\"book__data__container__desc__interacts__item__icon\" stroke={Liked?\"#ff5722\":\"currentColor\"} fill={Liked?\"#ff5722\":\"transparent\"} onClick={ ()=>likeHandler() }/>\n\t\t\t\t\t\t\t\t\t\t\t<div className='typo__head--5 typo__color--n600'>{Likes||\"0\"}</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__interacts__item\">\n\t\t\t\t\t\t\t\t\t\t\t<div className='typo__subtitle typo__color--n500'>Reviews</div>\n\t\t\t\t\t\t\t\t\t\t\t<ReviewIcon width={24} height={24} stroke=\"currentColor\"/>\n\t\t\t\t\t\t\t\t\t\t\t<div className='typo__head--5 typo__color--n600'>{TotalReveiws||\"0\"}</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__interacts__item\">\n\t\t\t\t\t\t\t\t\t\t\t<div className='typo__subtitle typo__color--n500'>Pages</div>\n\t\t\t\t\t\t\t\t\t\t\t<PrintIcon width={24} height={24} stroke=\"currentColor\"/>\n\t\t\t\t\t\t\t\t\t\t\t<div className='typo__head--5 typo__color--n600'>{NFT.print||\"00\"}</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__interacts__item\">\n\t\t\t\t\t\t\t\t\t\t\t<div className='typo__subtitle typo__color--n500'>Sold</div>\n\t\t\t\t\t\t\t\t\t\t\t<CartIcon width={24} height={24} stroke=\"currentColor\"/>\n\t\t\t\t\t\t\t\t\t\t\t<div className='typo__head--5 typo__color--n600'>{NFT.copies||\"00\"}</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs\">\n\t\t\t\t\t\t\t\t\t\t<div ref={TabContainerRef} className=\"book__data__container__desc__tabs__container\">\n\t\t\t\t\t\t\t\t\t\t\t{renderTabs()}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"book__data__container__desc__tabs__data\">\n\t\t\t\t\t\t\t\t\t\t\t{renderTabData()}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<PurchaseModal data={NFT} onNewBookPurchase={()=>purchaseNewCopyHandler()} onOldBookPurchase={offer=>purchaseOldCopyHandler(offer)}/>\n\t\t\t\t\t<ListModal book={NFT} userCopy={UserCopy} onListHandler={listPrice=>onListHandler(listPrice)} />\n\t\t\t\t\t<ReviewModal ReviewForm={ReviewForm} setReviewForm={setReviewForm} reviewHandler={reviewHandler}/>\n\t\t\t\t\t<QuoteModal QuotesForm={QuotesForm} setQuotesForm={setQuotesForm} quoteHandler={quoteHandler}/>\n\t\t\t\t\t<ShareListModal bookID={bookID} />\n\t\t\t\t</>\n\t\t\t\t:null\n\t\t\t}\n\t\t</Page>\n\t\t</>\n\t)\n}\n\nexport default BookPage\n"],"names":["label","price","className","isUsable","src","style","width","height","objectFit","alt","parseFloat","onOldBookPurchase","onNewBookPurchase","data","dispatch","useDispatch","ModalState","useSelector","state","UserState","BWalletState","Show","setShow","useState","Loading","setLoading","WalletData","setWalletData","getBalance","useCallback","async","balanceParams","chainId","ChainId","eoaAddress","smartAccount","address","tokenAddresses","USDC_ADDRESS","usdc","getAlltokenBalances","filter","token","contract_address","balance","ethers","useEffect","window","document","documentElement","overflowY","showSpinner","hideSpinner","show","type","SHOW_PURCHASE_MODAL","GaTracker","Backdrop","classes","push","join","getClasses","onClick","title","Price","toFixed","Button","props","TABS","id","icon","params","useParams","navigate","useNavigate","isLoggedIn","useIsLoggedIn","getWalletBalance","useSmartAccountContext","connect","provider","useWeb3AuthContext","WalletAddress","setWalletAddress","ActiveTab","setActiveTab","NFT","setNFT","Owner","setOwner","Listed","setListed","UserCopy","setUserCopy","Published","setPublished","bookID","setBookID","Likes","setLikes","Liked","setLiked","Rating","setRating","Review","setReview","Reviews","setReviews","TotalReveiws","setTotalReveiws","ReviewForm","setReviewForm","body","rating","Quote","setQuote","Quotes","setQuotes","QuotesForm","setQuotesForm","quote","totalReaders","setTotalReaders","liveReaderCount","setLiveReaderCount","totalReadTime","setTotalReadTime","TabContainerRef","useRef","listed","getReviews","axios","url","BASE_URL","method","bookAddress","book_address","then","res","status","reviews","total","setSnackbar","catch","err","finally","getUserReview","ownerAddress","isNotEmpty","getQuotes","getUserQuote","likes","liked","total_readers","reader_count","total_read_time","book","new_owner","publisher_address","activeTabElement","getElementById","current","setProperty","offsetLeft","headers","user","uid","tokens","acsTkn","tkn","walletAddress","walletStatus","loginHandler","Wallet","readHandler","base","cid","fileName","Helmet","name","content","Page","BackgroundBook","loading","cover_display_url","cover_public_url","cover","author","Stars","size","tokenId","token_id","orderId","order_id","Contracts","signer","hideModal","message","reason","includes","showModal","SHOW_LIST_MODAL","moment","secondary_sales_from","isSame","isBefore","isAfter","format","console","log","preview","open","slice","contract","length","JSON","parse","genres","map","g","age_group","language","Math","ceil","stroke","fill","old","likedState","print","copies","ref","tabsDOM","forEach","tab","renderTabs","synopsis","renderReviews","reviewsDOM","isFilled","review","reviewed_at","SHOW_REVIEW_MODAL","renderQuotes","quotes","quotesDOM","i","created_at","SHOW_QUOTE_MODAL","renderTabData","Purchase","approveErc721Interface","approveData","encodeFunctionData","toString","approveTx","to","safeMintData","safeMintTx","on","response","logs","receipt","topics","topic","keccak256","toUtf8Bytes","parseInt","purchasePrice","error","transactions","feeQuotes","prepareRefundTransactionBatch","transaction","createRefundTransactionBatch","feeQuote","sendTransaction","tx","gasLimit","hex","GAS_LIMIT","purchase","offer","newOwnerAddress","previousOwnerAddress","previous_owner","daScore","da_score","purchaseOldCopyHandler","List","userCopy","onListHandler","listPrice","events","event","args","_hex","bookPrice","bookOrderId","bookTokenId","SHOW_SHARE_MODAL","ReviewModal","reviewHandler","QuoteModal","quoteHandler","ShareList"],"sourceRoot":""}