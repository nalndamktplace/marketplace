"use strict";(self.webpackChunkmarketplace=self.webpackChunkmarketplace||[]).push([[748],{4998:function(e,t,r){r.d(t,{r:function(){return h}});var a,n,o,s,i,_,c=r(2791),l=["title","titleId"];function d(){return d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},d.apply(this,arguments)}function u(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function f(e,t){var r=e.title,f=e.titleId,h=u(e,l);return c.createElement("svg",d({xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 48 48",ref:t,"aria-labelledby":f},h),r?c.createElement("title",{id:f},r):null,a||(a=c.createElement("path",{d:"M6,15H36",transform:"translate(6 15)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),n||(n=c.createElement("path",{d:"M36,19H6",transform:"translate(6 19)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),o||(o=c.createElement("path",{d:"M15,11H27",transform:"translate(15 11)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),s||(s=c.createElement("path",{d:"M27,7H15",transform:"translate(15 7)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),i||(i=c.createElement("path",{d:"M9,12.5h2a2,2,0,1,1-2,2v-5a4,4,0,0,1,4-4",transform:"translate(9 5.5)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),_||(_=c.createElement("path",{d:"M3,12.5H5a2,2,0,1,1-2,2v-5a4,4,0,0,1,4-4",transform:"translate(3 5.5)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})))}var h=c.forwardRef(f);r.p},8859:function(e,t,r){r(2791);t.Z=r.p+"static/media/star-empty-half-rtl.115b4ca6259808a2530cc7ed54a5980d.svg"},9528:function(e,t,r){r(2791);t.Z=r.p+"static/media/star-empty.094ca61be3c7cac574115be9ba058f0e.svg"},7852:function(e,t,r){r(2791);t.Z=r.p+"static/media/star-filled-half.761b90355c2504219c50b81be5514339.svg"},9186:function(e,t,r){r(2791);t.Z=r.p+"static/media/star-filled.cdd8f18fce9ac9a685489286d8f9e501.svg"},4254:function(e,t,r){var a=r(9528),n=r(9186),o=r(7852),s=r(8859),i=r(184);t.Z=function(e){var t=e.rating,r=e.size;return(0,i.jsx)("div",{className:function(){var e=["stars"];return"small"===r&&e.push("stars--small"),e.join(" ")}(),children:function(e){for(var t=[],r=1;r<=5;r++)r<=e?t.push((0,i.jsx)("div",{className:"stars__star",children:(0,i.jsx)("img",{src:n.Z,alt:"star",className:"stars__star__icon",loading:"lazy"})},"STAR"+r)):e<r&&e>r-1?t.push((0,i.jsxs)("div",{className:"stars__star",children:[(0,i.jsx)("img",{src:o.Z,alt:"half star",className:"stars__star__icon stars__star__icon--half",loading:"lazy"}),(0,i.jsx)("img",{src:s.Z,alt:"half star",className:"stars__star__icon stars__star__icon--half",loading:"lazy"})]},"STAR"+r)):t.push((0,i.jsx)("div",{className:"stars__star",children:(0,i.jsx)("img",{src:a.Z,alt:"empty star",className:"stars__star__icon",loading:"lazy"})},"STAR"+r));return t}(t)})}},7748:function(e,t,r){r.r(t),r.d(t,{default:function(){return Ye}});var a=r(1413),n=r(5861),o=r(885),s=r(7757),i=r.n(s),_=r(4569),c=r.n(_),l=r(2426),d=r.n(l),u=r(6030),f=r(6871),h=r(2791),p=r(8979),m=r(733),b=r(4254),k=r(5454),v=r(6539),y=r(9018),g=r(3958),j=r(7928),w=r(5899),x=r(9316),N=r(184),O=function(e){var t=e.book,r=e.userCopy,a=e.onListHandler,n=(0,u.I0)(),s=(0,u.v9)((function(e){return e.ModalState})),i=(0,h.useState)(!1),_=(0,o.Z)(i,2),c=_[0],l=_[1],d=(0,h.useState)(""),f=(0,o.Z)(d,2),p=f[0],m=f[1];(0,h.useEffect)((function(){!0===s.show&&s.type===j.gG?((0,w.Z)("modal_view_list_books"),l(!0)):l(!1)}),[s]);return(0,x.fb)(r)&&(0,x.fb)(t)?(0,N.jsx)(y.Z,{show:c,children:(0,N.jsxs)(v.Z,{title:"List eBook",open:c,toggleModal:function(e){!1===e&&n((0,j.VG)())},cancellable:!0,children:[(0,N.jsxs)("p",{className:"utils__margin__bottom--n typo__transform--capital",children:["Book: ",t.title]}),(0,N.jsxs)("p",{className:"utils__margin__bottom--n typo__transform--capital",children:["Author: ",t.author]}),(0,N.jsxs)("p",{className:"typo__transform--capital",children:["purchased at: ",(0,x.fb)(r.purchase_price)?parseFloat(r.purchase_price).toFixed(2):null]}),(0,N.jsxs)("p",{className:"typo__transform--capital",children:["DA Score: ",(0,x.fb)(r.da_score)?parseFloat(r.da_score).toFixed(2):null]}),(0,N.jsx)(g.Z,{type:"string",label:"listing price in USDC",onChange:function(e){return m(e.target.value)}}),(0,N.jsx)("div",{style:{flex:1}}),(0,N.jsx)(k.Z,{type:"primary",onClick:function(){return a(p)},children:"List eBook"})]})}):null},E=function(e){var t=e.QuotesForm,r=e.setQuotesForm,n=e.quoteHandler,s=(0,u.I0)(),i=(0,u.v9)((function(e){return e.ModalState})),_=(0,h.useState)(!1),c=(0,o.Z)(_,2),l=c[0],d=c[1];(0,h.useEffect)((function(){!0===i.show&&i.type===j.D4?((0,w.Z)("modal_view_quote"),d(!0)):d(!1)}),[i]);return(0,N.jsx)(y.Z,{show:l,children:(0,N.jsxs)(v.Z,{title:"Write Quote",open:l,toggleModal:function(e){!1===e&&s((0,j.VG)())},cancellable:!0,children:[(0,N.jsx)(g.Z,{type:"string",label:"quote",value:t.quote,onChange:function(e){return r((0,a.Z)((0,a.Z)({},t),{},{quote:e.target.value}))}}),(0,N.jsx)(k.Z,{className:"utils__margin__top--m utils__margin__left--auto",type:"primary",onClick:function(){return n()},children:"submit"})]})})},Z=r(9528),R=r(9186),S=r(7852),T=r(8859),L=function(e){var t=e.ReviewForm,r=e.setReviewForm,n=e.reviewHandler,s=(0,u.I0)(),i=(0,u.v9)((function(e){return e.ModalState})),_=(0,h.useState)(!1),c=(0,o.Z)(_,2),l=c[0],d=c[1];(0,h.useEffect)((function(){!0===i.show&&i.type===j.wW?((0,w.Z)("modal_view_review"),d(!0)):d(!1)}),[i]);return(0,N.jsx)(y.Z,{show:l,children:(0,N.jsxs)(v.Z,{title:"Review",open:l,toggleModal:function(e){!1===e&&s((0,j.VG)())},cancellable:!0,children:[(0,N.jsx)("div",{className:"book__data__container__desc__tabs__data__review__rating",children:function(){for(var e=[],n=function(n){n<=t.rating?e.push((0,N.jsxs)("div",{className:"book__data__container__desc__tabs__data__review__rating__item",children:[(0,N.jsx)("img",{src:R.Z,alt:"star",className:"book__data__container__desc__tabs__data__review__rating__item__icon",loading:"lazy"}),(0,N.jsx)("div",{onClick:function(){return r((0,a.Z)((0,a.Z)({},t),{},{rating:n-.5}))},className:"book__data__container__desc__tabs__data__review__rating__item__trigger"}),(0,N.jsx)("div",{onClick:function(){return r((0,a.Z)((0,a.Z)({},t),{},{rating:n}))},className:"book__data__container__desc__tabs__data__review__rating__item__trigger"})]},"STAR"+n)):t.rating<n&&t.rating>n-1?e.push((0,N.jsxs)("div",{className:"book__data__container__desc__tabs__data__review__rating__item",children:[(0,N.jsx)("img",{src:S.Z,alt:"half star",className:"book__data__container__desc__tabs__data__review__rating__item__icon book__data__container__desc__tabs__data__review__rating__item__icon--half",loading:"lazy"}),(0,N.jsx)("img",{src:T.Z,alt:"half star",className:"book__data__container__desc__tabs__data__review__rating__item__icon book__data__container__desc__tabs__data__review__rating__item__icon--half",loading:"lazy"}),(0,N.jsx)("div",{onClick:function(){return r((0,a.Z)((0,a.Z)({},t),{},{rating:n-.5}))},className:"book__data__container__desc__tabs__data__review__rating__item__trigger"}),(0,N.jsx)("div",{onClick:function(){return r((0,a.Z)((0,a.Z)({},t),{},{rating:n}))},className:"book__data__container__desc__tabs__data__review__rating__item__trigger"})]},"STAR"+n)):e.push((0,N.jsxs)("div",{className:"book__data__container__desc__tabs__data__review__rating__item",children:[(0,N.jsx)("img",{src:Z.Z,alt:"empty star",className:"book__data__container__desc__tabs__data__review__rating__item__icon",loading:"lazy"}),(0,N.jsx)("div",{onClick:function(){return r((0,a.Z)((0,a.Z)({},t),{},{rating:n-.5}))},className:"book__data__container__desc__tabs__data__review__rating__item__trigger"}),(0,N.jsx)("div",{onClick:function(){return r((0,a.Z)((0,a.Z)({},t),{},{rating:n}))},className:"book__data__container__desc__tabs__data__review__rating__item__trigger"})]},"STAR"+n))},o=1;o<=5;o++)n(o);return e}()}),(0,N.jsx)(g.Z,{type:"string",label:"title",value:t.title,onChange:function(e){return r((0,a.Z)((0,a.Z)({},t),{},{title:e.target.value}))}}),(0,N.jsx)(g.Z,{type:"text",label:"body",value:t.body,onChange:function(e){return r((0,a.Z)((0,a.Z)({},t),{},{body:e.target.value}))}}),(0,N.jsx)(k.Z,{className:"utils__margin__top--m",type:"primary",onClick:function(){return n()},children:"submit"})]})})},A=r(4643),P=r(4127),C=r(9135),F=r(5248),M=function(e){var t=e.onOldBookPurchase,r=e.onNewBookPurchase,a=e.data,n=(0,u.I0)(),s=(0,u.v9)((function(e){return e.UserState})),i=(0,u.v9)((function(e){return e.ModalState})),_=(0,h.useState)(!1),l=(0,o.Z)(_,2),d=l[0],f=l[1],p=(0,h.useState)([]),m=(0,o.Z)(p,2),b=m[0],v=m[1],g=(0,h.useState)(!1),O=(0,o.Z)(g,2),E=O[0],Z=O[1],R=(0,h.useState)(0),S=(0,o.Z)(R,2),T=S[0],L=S[1],M=(0,h.useState)(null),B=(0,o.Z)(M,2),W=B[0],I=B[1],G=function(){if((0,x.vd)(b)){var e=b.sort((function(e,t){return e.price>t.price}));return parseFloat(e[0].price).toFixed(2)}};return(0,h.useEffect)((function(){window.document.documentElement.style.overflowY=d?"hidden":"auto"}),[d]),(0,h.useEffect)((function(){n(E?(0,P.yh)():(0,P.v3)())}),[E,n]),(0,h.useEffect)((function(){!0===i.show&&i.type===j.m0?((0,w.Z)("modal_view_purchase"),f(!0)):f(!1)}),[i]),(0,h.useEffect)((function(){!0===d&&(0,x.fb)(a)&&c()({url:F._+"/api/book/list",method:"GET",headers:{"user-id":s.user.uid,authorization:"Bearer ".concat(s.tokens.acsTkn.tkn)},params:{bookAddress:a.book_address}}).then((function(e){200===e.status?v(e.data):n((0,A.e1)("NOT200"))})).catch((function(e){n((0,A.e1)("ERROR"))})).finally((function(){return Z(!1)}))}),[d,n,a,s]),(0,N.jsx)(y.Z,{show:d,children:(0,N.jsxs)("div",{className:function(){var e=["purchase purchase__wrapper"];return d?e.push("purchase__wrapper--open"):e.push("purchase__wrapper--close"),e.join(" ")}(),children:[(0,N.jsxs)("div",{className:"purchase__wrapper__header",children:[(0,N.jsx)("div",{className:"purchase__wrapper__header__title typo__head--6 typo__transform--capital",children:a.title.toLowerCase()}),(0,N.jsx)("div",{className:"purchase__wrapper__header__close-button",children:(0,N.jsx)("div",{onClick:function(){return f(!1)},children:(0,N.jsx)(C.r,{width:20,height:20})})})]}),(0,N.jsx)("div",{className:"purchase__wrapper__content",children:T?(0,N.jsxs)("div",{className:"purchase__wrapper__content__offers",children:[(0,N.jsxs)("div",{className:"typo__body typo__body--2 utils__d__flex purchase__wrapper__content__offers__count",children:[b.length," offer(s) starting from\xa0",0===a.price?"FREE":(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("img",{src:"https://imagedelivery.net/yOWneHxM1h9mu46Te3Yjwg/59c27d12-e4eb-4f74-7a6e-b33ba6537600/icon48",style:{width:20,height:20,objectFit:"contain"},alt:"USDC"}),"\xa0",G()]})]}),(0,N.jsx)("div",{className:"purchase__wrapper__content__offers__list",children:function(){var e=[];return(0,x.vd)(b)&&b.forEach((function(t){t.previous_owner===(null===W||void 0===W?void 0:W.previous_owner)?e.push((0,N.jsxs)("div",{className:"purchase__wrapper__content__offers__item purchase__wrapper__content__offers__item--active",children:[(0,N.jsxs)("p",{className:"utils__margin__bottom--n utils__d__flex utils__align__center",children:["Price:\xa0",0===t.price?"FREE":(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("img",{src:"https://imagedelivery.net/yOWneHxM1h9mu46Te3Yjwg/59c27d12-e4eb-4f74-7a6e-b33ba6537600/icon48",style:{width:20,height:20,objectFit:"contain"},alt:"USDC"}),"\xa0",(0,x.fb)(t.price)?parseFloat(t.price).toFixed(2):null]})]}),(0,N.jsxs)("p",{className:"utils__margin__bottom--n",children:["DA Score: ",(0,x.fb)(t.da_score)?parseFloat(t.da_score).toFixed(2):null]}),(0,N.jsxs)("p",{className:"utils__margin__bottom--n",children:["Seller: ",t.previous_owner]})]},t.book_address+"-"+t.order_id)):e.push((0,N.jsxs)("div",{onClick:function(){return I(t)},className:"purchase__wrapper__content__offers__item",children:[(0,N.jsxs)("p",{className:"utils__margin__bottom--n utils__d__flex utils__align__center",children:["Price:\xa0",0===t.price?"FREE":(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("img",{src:"https://imagedelivery.net/yOWneHxM1h9mu46Te3Yjwg/59c27d12-e4eb-4f74-7a6e-b33ba6537600/icon48",style:{width:20,height:20,objectFit:"contain"},alt:"USDC"}),"\xa0",(0,x.fb)(t.price)?parseFloat(t.price).toFixed(2):null]})]}),(0,N.jsxs)("p",{className:"utils__margin__bottom--n",children:["DA Score: ",(0,x.fb)(t.da_score)?parseFloat(t.da_score).toFixed(2):null]}),(0,N.jsxs)("p",{className:"utils__margin__bottom--n",children:["Seller: ",t.previous_owner]})]},t.book_address+"-"+t.order_id))})),0===e.length&&e.push((0,N.jsx)("div",{className:"typo__color--n600 utils__d__flex utils__justify__center",children:"No Offers"})),e}()}),(0,N.jsxs)("div",{className:"purchase__wrapper__content__offers__cta",children:[(0,N.jsx)(k.Z,{type:"secondary",onClick:function(){return L(!1)},className:"purchase__wrapper__content__offers__cta__button",children:"Back"}),(0,N.jsx)(k.Z,{type:"primary",onClick:function(){(0,x.fb)(W)?t(W):n((0,A.e1)({show:!0,message:"Please select an old copy.",type:3}))},className:"purchase__wrapper__content__offers__cta__button",children:"Purchase"})]})]}):(0,N.jsxs)("div",{className:"purchase__wrapper__content__options",children:[(0,N.jsxs)("div",{className:"purchase__wrapper__content__options__item",onClick:function(){return r()},children:[(0,N.jsx)("p",{className:"typo__body utils__d__flex typo__align--center",children:"Purchase new copy for"}),(0,N.jsx)("h5",{className:"typo__head typo__head--4 typo__transform--upper utils__d__flex utils__align__center",children:0===a.price?"FREE":(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("img",{src:"https://imagedelivery.net/yOWneHxM1h9mu46Te3Yjwg/59c27d12-e4eb-4f74-7a6e-b33ba6537600/icon48",style:{width:32,height:32,objectFit:"contain"},alt:"USDC"}),"\xa0",parseFloat(a.price).toFixed(2)]})})]}),(0,N.jsxs)("div",{className:"purchase__wrapper__content__options__item",onClick:function(){return L(!0)},children:[(0,N.jsx)("p",{className:"typo__body utils__d__flex typo__align--center",children:"Old copies start from"}),(0,N.jsx)("h5",{className:"typo__head typo__head--4 typo__transform--upper utils__d__flex utils__align__center",children:0===a.price?"FREE":(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("img",{src:"https://imagedelivery.net/yOWneHxM1h9mu46Te3Yjwg/59c27d12-e4eb-4f74-7a6e-b33ba6537600/icon48",style:{width:32,height:32,objectFit:"contain"},alt:"USDC"}),"\xa0",G()]})})]})]})})]})})},B=r(2043),W=r(6026),I=r(7793);var G,H=r.p+"static/media/background-book.ab78f91e6c81e45864253502041ae721.svg",Y=["title","titleId"];function q(){return q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},q.apply(this,arguments)}function D(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function V(e,t){var r=e.title,a=e.titleId,n=D(e,Y);return h.createElement("svg",q({xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 48 48",ref:t,"aria-labelledby":a},n),r?h.createElement("title",{id:a},r):null,G||(G=h.createElement("path",{d:"M36.013,22.155l-15,14.856-15-14.856m0,0a10,10,0,1,1,15-13.132,10,10,0,1,1,15,13.139",transform:"translate(2.987 4.989)",fill:"rgba(32,33,36,0)",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})))}var z,U,Q,K=h.forwardRef(V),J=(r.p,["title","titleId"]);function X(){return X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},X.apply(this,arguments)}function $(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ee(e,t){var r=e.title,a=e.titleId,n=$(e,J);return h.createElement("svg",X({xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 48 48",ref:t,"aria-labelledby":a},n),r?h.createElement("title",{id:a},r):null,z||(z=h.createElement("path",{d:"M31,25h4a4,4,0,0,0,4-4V13a4,4,0,0,0-4-4H7a4,4,0,0,0-4,4v8a4,4,0,0,0,4,4h4",transform:"translate(3 9)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),U||(U=h.createElement("path",{d:"M27,15V7a4,4,0,0,0-4-4H11A4,4,0,0,0,7,7v8",transform:"translate(7 3)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),Q||(Q=h.createElement("rect",{width:20,height:16,rx:2,transform:"translate(14 26)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})))}var te,re=h.forwardRef(ee),ae=(r.p,["title","titleId"]);function ne(){return ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ne.apply(this,arguments)}function oe(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function se(e,t){var r=e.title,a=e.titleId,n=oe(e,ae);return h.createElement("svg",ne({xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 48 48",ref:t,"aria-labelledby":a},n),r?h.createElement("title",{id:a},r):null,te||(te=h.createElement("g",{transform:"translate(48 48) rotate(180)"},h.createElement("path",{d:"M15,16H7a2,2,0,0,1-2-2V8A2,2,0,0,1,7,6h6a2,2,0,0,1,2,2V20q0,8-8,10",transform:"translate(5 6)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6}),h.createElement("path",{d:"M24,16H16a2,2,0,0,1-2-2V8a2,2,0,0,1,2-2h6a2,2,0,0,1,2,2V20q0,8-8,10",transform:"translate(14 6)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6}))))}var ie,_e,ce,le,de,ue=h.forwardRef(se),fe=(r.p,["title","titleId"]);function he(){return he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},he.apply(this,arguments)}function pe(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function me(e,t){var r=e.title,a=e.titleId,n=pe(e,fe);return h.createElement("svg",he({xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 48 48",ref:t,"aria-labelledby":a},n),r?h.createElement("title",{id:a},r):null,ie||(ie=h.createElement("circle",{cx:4,cy:4,r:4,transform:"translate(8 34)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),_e||(_e=h.createElement("circle",{cx:4,cy:4,r:4,transform:"translate(30 34)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),ce||(ce=h.createElement("path",{d:"M30,31H8V3H4",transform:"translate(4 3)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),le||(le=h.createElement("path",{d:"M6,5l12.01.858M32.286,19,32,21H6",transform:"translate(6 5)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),de||(de=h.createElement("path",{d:"M15,9H27M21,3V15",transform:"translate(15 3)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})))}var be,ke,ve,ye=h.forwardRef(me),ge=(r.p,["title","titleId"]);function je(){return je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},je.apply(this,arguments)}function we(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function xe(e,t){var r=e.title,a=e.titleId,n=we(e,ge);return h.createElement("svg",je({xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 48 48",ref:t,"aria-labelledby":a},n),r?h.createElement("title",{id:a},r):null,be||(be=h.createElement("line",{x2:32,transform:"translate(8 12)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),ke||(ke=h.createElement("line",{x2:32,transform:"translate(8 24)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),ve||(ve=h.createElement("line",{x2:24,transform:"translate(8 36)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})))}var Ne,Oe,Ee,Ze=h.forwardRef(xe),Re=(r.p,["title","titleId"]);function Se(){return Se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Se.apply(this,arguments)}function Te(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Le(e,t){var r=e.title,a=e.titleId,n=Te(e,Re);return h.createElement("svg",Se({xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 48 48",ref:t,"aria-labelledby":a},n),r?h.createElement("title",{id:a},r):null,Ne||(Ne=h.createElement("path",{d:"M4,37V11a6,6,0,0,1,6-6H30a6,6,0,0,1,6,6V23a6,6,0,0,1-6,6H12L4,37",transform:"translate(4 5)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),Oe||(Oe=h.createElement("line",{x2:16,transform:"translate(16 18)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),Ee||(Ee=h.createElement("line",{x2:12,transform:"translate(16 26)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})))}var Ae,Pe,Ce,Fe=h.forwardRef(Le),Me=(r.p,r(4998)),Be=["title","titleId"];function We(){return We=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},We.apply(this,arguments)}function Ie(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Ge(e,t){var r=e.title,a=e.titleId,n=Ie(e,Be);return h.createElement("svg",We({xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 48 48",ref:t,"aria-labelledby":a},n),r?h.createElement("title",{id:a},r):null,Ae||(Ae=h.createElement("path",{d:"M18,7H8a4,4,0,0,0-4,4V29a4,4,0,0,0,4,4H26a4,4,0,0,0,4-4V19",transform:"translate(4 7)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),Pe||(Pe=h.createElement("line",{y1:20,x2:20,transform:"translate(20 8)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})),Ce||(Ce=h.createElement("path",{d:"M15,4H25V14",transform:"translate(15 4)",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.6})))}var He=h.forwardRef(Ge),Ye=(r.p,function(e){var t=[{id:"TAB01",label:"Synopsis",icon:(0,N.jsx)(Ze,{})},{id:"TAB02",label:"reviews",icon:(0,N.jsx)(Fe,{})},{id:"TAB03",label:"quotes",icon:(0,N.jsx)(Me.r,{})}],r=(0,f.TH)(),s=(0,u.I0)(),_=(0,f.s0)(),l=(0,I.Z)(),v=(0,u.v9)((function(e){return e.UserState})),y=(0,u.v9)((function(e){return e.WalletState})),g=(0,h.useState)(null),Z=(0,o.Z)(g,2),R=Z[0],S=Z[1],T=(0,h.useState)(!1),C=(0,o.Z)(T,2),G=C[0],Y=C[1],q=(0,h.useState)("TAB01"),D=(0,o.Z)(q,2),V=D[0],z=D[1],U=(0,h.useState)(null),Q=(0,o.Z)(U,2),J=Q[0],X=Q[1],$=(0,h.useState)(null),ee=(0,o.Z)($,2),te=ee[0],ae=ee[1],ne=(0,h.useState)(null),oe=(0,o.Z)(ne,2),se=oe[0],ie=oe[1],_e=(0,h.useState)(null),ce=(0,o.Z)(_e,2),le=ce[0],de=ce[1],fe=(0,h.useState)(null),he=(0,o.Z)(fe,2),pe=he[0],me=he[1],be=(0,h.useState)(0),ke=(0,o.Z)(be,2),ve=ke[0],ge=ke[1],je=(0,h.useState)(!1),we=(0,o.Z)(je,2),xe=we[0],Ne=we[1],Oe=(0,h.useState)(0),Ee=(0,o.Z)(Oe,2),Re=Ee[0],Se=Ee[1],Te=(0,h.useState)(null),Le=(0,o.Z)(Te,2),Ae=Le[0],Pe=Le[1],Ce=(0,h.useState)([]),Be=(0,o.Z)(Ce,2),We=Be[0],Ie=Be[1],Ge=(0,h.useState)(0),Ye=(0,o.Z)(Ge,2),qe=Ye[0],De=Ye[1],Ve=(0,h.useState)({title:"",body:"",rating:0}),ze=(0,o.Z)(Ve,2),Ue=ze[0],Qe=ze[1],Ke=(0,h.useState)(null),Je=(0,o.Z)(Ke,2),Xe=Je[0],$e=Je[1],et=(0,h.useState)([]),tt=(0,o.Z)(et,2),rt=tt[0],at=tt[1],nt=(0,h.useState)({quote:""}),ot=(0,o.Z)(nt,2),st=ot[0],it=ot[1],_t=(0,h.useState)(0),ct=(0,o.Z)(_t,2),lt=ct[0],dt=ct[1],ut=(0,h.useState)(0),ft=(0,o.Z)(ut,2),ht=ft[0],pt=ft[1],mt=(0,h.useRef)();(0,h.useEffect)((function(){(0,w.Z)("page_view_book")}),[]),(0,h.useEffect)((function(){"TAB01"===V?(0,w.Z)("tab_view_book_synopsis"):"TAB02"===V?(0,w.Z)("tab_view_book_reviews"):(0,w.Z)("tab_view_book_quotes")}),[V]),(0,h.useEffect)((function(){(0,x.fb)(J)&&ie(1===J.listed)}),[J]);var bt=(0,h.useCallback)((function(){(0,x.fb)(J)&&(Y(!0),c()({url:"".concat(F._,"/api/book/reviews"),method:"GET",params:{bookAddress:J.book_address}}).then((function(e){200===e.status?(Ie(e.data.reviews),Se(e.data.rating),De(e.data.total)):s((0,A.e1)("NOT200"))})).catch((function(e){s((0,A.e1)("ERROR"))})).finally((function(){return Y(!1)})))}),[J,s]),kt=(0,h.useCallback)((function(){(0,x.fb)(J)&&(0,x.fb)(R)&&(Y(!0),c()({url:"".concat(F._,"/api/book/reviewed"),method:"GET",params:{bookAddress:J.book_address,ownerAddress:R}}).then((function(e){200===e.status&&(0,x.UE)(e.data)&&Pe(e.data)})).catch((function(e){s((0,A.e1)("ERROR"))})).finally((function(){return Y(!1)})))}),[J,R,s]),vt=(0,h.useCallback)((function(){(0,x.fb)(J)&&(Y(!0),c()({url:"".concat(F._,"/api/book/quotes"),method:"GET",params:{bookAddress:J.book_address}}).then((function(e){200===e.status?at(e.data):s((0,A.e1)("NOT200"))})).catch((function(e){s((0,A.e1)("ERROR"))})).finally((function(){return Y(!1)})))}),[J,s]),yt=(0,h.useCallback)((function(){(0,x.fb)(J)&&(0,x.fb)(R)&&(Y(!0),c()({url:"".concat(F._,"/api/book/quoted"),method:"GET",params:{bookAddress:J.book_address,ownerAddress:R}}).then((function(e){200===e.status&&(0,x.UE)(e.data)&&$e(e.data)})).catch((function(e){s((0,A.e1)("ERROR"))})).finally((function(){return Y(!1)})))}),[J,R,s]);(0,h.useEffect)((function(){bt()}),[bt]),(0,h.useEffect)((function(){kt()}),[kt]),(0,h.useEffect)((function(){vt()}),[vt]),(0,h.useEffect)((function(){yt()}),[yt]),(0,h.useEffect)((function(){(0,x.fb)(J)&&(Y(!0),c()({url:"".concat(F._,"/api/book/likes"),method:"GET",params:{bookAddress:J.book_address}}).then((function(e){200===e.status?ge(e.data.likes):s((0,A.e1)("NOT200"))})).catch((function(e){s((0,A.e1)("ERROR"))})).finally((function(){return Y(!1)})))}),[J,s]),(0,h.useEffect)((function(){(0,x.fb)(J)&&(0,x.fb)(R)&&(Y(!0),c()({url:"".concat(F._,"/api/book/liked"),method:"GET",params:{bookAddress:J.book_address,ownerAddress:R}}).then((function(e){200===e.status&&Ne(e.data.liked)})).catch((function(e){s((0,A.e1)("ERROR"))})).finally((function(){return Y(!1)})))}),[J,R,s]),(0,h.useEffect)((function(){(0,x.fb)(J)&&(Y(!0),c()({url:"".concat(F._,"/api/reader/count"),method:"GET",params:{bookAddress:J.book_address}}).then((function(e){200===e.status&&dt(e.data.reader_count)})).catch((function(e){s((0,A.e1)("ERROR"))})).finally((function(){return Y(!1)})))}),[J,s]),(0,h.useEffect)((function(){(0,x.fb)(J)&&(Y(!0),c()({url:"".concat(F._,"/api/reader/total-read-time"),method:"GET",params:{bookAddress:J.book_address}}).then((function(e){200===e.status&&pt(e.data.total_read_time)})).catch((function(e){s((0,A.e1)("ERROR"))})).finally((function(){return Y(!1)})))}),[J,s]),(0,h.useEffect)((function(){Y(!0),(0,x.fb)(y.wallet.provider)&&S(y.wallet.address),Y(!1)}),[y]),(0,h.useEffect)((function(){(0,x.fb)(Ae)&&Qe({title:Ae.title,body:Ae.body,rating:Ae.rating})}),[Ae]),(0,h.useEffect)((function(){if(X(r.state),(0,x.fb)(R)){Y(!0);var e=r.state;e.new_owner===R?ae(!0):ae(!1),e.publisher_address===R?me(!0):me(!1),c()({url:F._+"/api/book/owner",method:"GET",params:{ownerAddress:R,bookAddress:e.book_address}}).then((function(e){200===e.status&&ae(!0)})).catch((function(e){})).finally((function(){return Y(!1)}))}}),[r,s,R]),(0,h.useEffect)((function(){(0,x.fb)(J)&&(0,x.fb)(pe)&&(0,x.fb)(te)&&Y(!1)}),[J,pe,te]),(0,h.useEffect)((function(){s(G?(0,P.yh)():(0,P.v3)())}),[G,s]),(0,h.useEffect)((function(){var e=document.getElementById("BOOK_PAGE_"+V);(0,x.fb)(e)&&(0,x.fb)(mt.current)&&mt.current.style.setProperty("--marker-x",e.offsetLeft)}),[V]),(0,h.useEffect)((function(){te&&c()({url:"".concat(F._,"/api/user/book"),method:"GET",headers:{"user-id":v.user.uid,address:y.wallet.address,authorization:"Bearer ".concat(v.tokens.acsTkn.tkn)},params:{walletAddress:y.wallet.address,bookAddress:J.book_address}}).then((function(e){200===e.status?(de(e.data),ie(e.data.listed)):s((0,A.e1)("NOT200"))})).catch((function(e){s((0,A.e1)("ERROR"))}))}),[te,v,y,s,J]);var gt=function(){if((0,x.fb)(y.support)&&!0===y.support&&(0,x.fb)(y.wallet.provider))return S(y.wallet.address),!0;Y(!0),B.Z.connectWallet().then((function(e){return s((0,W.kH)({wallet:e.wallet,provider:e.provider,signer:e.signer,address:e.address})),S(e.address),s((0,A.e1)({show:!0,message:"Wallet connected.",type:1})),!0})).catch((function(e){return s((0,A.e1)({show:!0,message:"Error while connecting to wallet",type:4})),!1})).finally((function(){return Y(!1)}))},jt=function(){var e=(0,n.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,w.Z)("event_book_read"),Y(!0);try{c()({url:"".concat(F._,"/api/verify"),method:"GET",params:{bookAddress:J.book_address,ownerAddress:R}}).then((function(e){if(200===e.status){var t=e.data;B.Z.signMessage(y.wallet.signer,JSON.stringify(t)).then((function(e){!0===e.isValid?c()({url:F._+"/api/verify",method:"POST",headers:{address:y.wallet.address,"user-id":v.user.uid,authorization:"Bearer ".concat(v.tokens.acsTkn.tkn)},data:{accountAddress:R,bookAddress:J.book_address,signedData:e.signedData,cid:J.book.slice(J.book.lastIndexOf("/")+1)}}).then((function(e){200===e.status?((0,w.Z)("navigate_book_reader"),_("/library/reader",{state:{book:(0,a.Z)((0,a.Z)({},J),{},{url:e.data.url}),preview:!1}})):s((0,A.e1)({show:!0,message:"Error",type:4}))})).catch((function(e){s((0,A.e1)("ERROR"))})).finally((function(){return Y(!1)})):s((0,A.e1)({show:!0,message:"Could not verify the authenticity of the signature.",type:3}))}))}else s((0,A.e1)("NOT200"))}))}catch(t){Y(!1)}case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,N.jsxs)(p.Z,{children:[(0,N.jsx)("div",{className:"book__bg",children:(0,N.jsx)("img",{src:H,alt:"background",loading:"lazy"})}),(0,x.fb)(J)?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{className:"book__data",children:[(0,N.jsx)("div",{className:"book__data__background"}),(0,N.jsxs)("div",{className:"book__data__container",children:[(0,N.jsxs)("div",{children:[(0,N.jsx)("div",{className:"book__data__container__cover",children:(0,N.jsx)("img",{className:"book__data__container__cover__image",src:J.cover_display_url?J.cover_display_url:J.cover_public_url?J.cover_public_url:J.cover,alt:J.name})}),(0,N.jsxs)("div",{className:"book__data__container__meta",children:[(0,N.jsx)("h3",{className:"typo__color--n700 typo__head typo__head--3 typo__transform--capital",children:J.title}),(0,N.jsx)("h5",{className:"typo__color--n500 typo__head typo__head--6 typo__transform--upper",children:J.author}),te||pe?null:(0,N.jsx)("div",{className:"book__data__container__meta__price typo-head--6 typo__act typo__color--success",children:0===J.price?"FREE":(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("img",{src:"https://imagedelivery.net/yOWneHxM1h9mu46Te3Yjwg/59c27d12-e4eb-4f74-7a6e-b33ba6537600/icon48",style:{width:20,height:20,objectFit:"contain"},alt:"USDC"}),"\xa0",J.price]})}),(0,N.jsxs)("div",{className:"book__data__container__meta__rating",children:[(0,N.jsx)("div",{className:"book__data__container__meta__rating__stars",children:(0,N.jsx)(b.Z,{size:"small",rating:Re})}),(0,N.jsxs)("div",{className:"book__data__container__meta__rating__count typo__body",children:[qe," reviews"]})]}),(0,N.jsx)("div",{className:"book__data__container__meta__cta",children:se?(0,N.jsx)(k.Z,{type:"primary",size:"lg",onClick:function(){return(0,w.Z)("event_book_unlist"),void((0,x.fb)(R)&&(Y(!0),c()({url:F._+"/api/user/book/listed",method:"GET",headers:{"user-id":v.user.uid,authorization:"Bearer ".concat(v.tokens.acsTkn.tkn)},params:{ownerAddress:R,tokenId:le.token_id,bookAddress:J.book_address}}).then((function(e){if(200===e.status){Y(!0);var t=e.data.order_id;m.Z.unlistBookFromMarketplace(t,y.wallet.signer).then((function(e){Y(!0),c()({url:F._+"/api/book/unlist",method:"POST",data:{ownerAddress:R,bookAddress:J.book_address}}).then((function(e){200===e.status?(ie(!1),s((0,j.VG)()),s((0,A.e1)({show:!0,message:"Book unlisted from marketplace.",type:1}))):s((0,A.e1)("NOT200"))})).catch((function(e){s((0,A.e1)("ERROR"))})).finally((function(){Y(!1)}))})).catch((function(e){Y(!1),(0,x.fb)(e.reason)?e.reason.includes("NFT not yet listed / already sold")&&s((0,A.e1)({show:!0,message:"eBook already sold or not listed.",type:3})):s((0,A.e1)("ERROR"))}))}else s((0,A.e1)("NOT200"))})).catch((function(e){Y(!1),s((0,A.e1)("ERROR"))}))))},children:"Unlist"}):pe?(0,N.jsx)(N.Fragment,{children:(0,N.jsx)(k.Z,{type:"primary",size:"lg",onClick:function(){return jt()},children:"Read"})}):te?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(k.Z,{type:"primary",size:"lg",onClick:function(){return jt()},children:"Read"}),(0,N.jsx)(k.Z,{onClick:function(){return s((0,j.K4)(j.gG)),void(d()(J.secondary_sales_from).isSame(d()())||d()(J.secondary_sales_from).isBefore(d()())?s((0,j.K4)(j.gG)):d()(J.secondary_sales_from).isAfter(d()())&&s((0,A.e1)({show:!0,message:"Secondary Sales will open only after ".concat(d()(J.secondary_sales_from).format("D MMM, YYYY"),"."),type:2})))},children:"List"})]}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(k.Z,{type:"primary",size:"lg",onClick:function(){return s(l?(0,j.K4)(j.m0):(0,A.e1)("NOT_LOGGED_IN"))},children:"Buy Now"}),(0,N.jsx)(k.Z,{onClick:function(){return(0,w.Z)("navigate_book_preview"),void _("/book/preview",{state:{book:J,preview:!0}})},children:"Preview"})]})})]})]}),(0,N.jsxs)("div",{className:"book__data__container__desc",children:[(0,N.jsx)("div",{className:"book__data__container__desc__left",children:(0,N.jsxs)("div",{className:"book__data__container__desc__summary",children:[(0,N.jsxs)("div",{className:"book__data__container__desc__summary__contract",children:[(0,N.jsxs)("div",{className:"book__data__container__desc__summary__contract__data",children:[(0,N.jsx)("div",{className:"book__data__container__desc__summary__contract__label typo__color--n700",children:"Contract Address"}),(0,N.jsxs)("div",{className:"book__data__container__desc__summary__contract__value typo__color--n500",onClick:function(){return window.open("https://mumbai.polygonscan.com/address/".concat(J.book_address),"_blank")},children:[(J.book_address||"").slice(0,12),"\u2026",(J.book_address||"").slice((J.contract||"").length-10)]})]}),(0,N.jsx)("div",{className:"book__data__container__desc__summary__contract__icon",children:(0,N.jsx)(He,{width:24,height:24})})]}),(0,N.jsx)("div",{className:"book__data__container__desc__summary__head typo__color--n700",children:"Genres"}),(0,N.jsx)("div",{className:"book__data__container__desc__summary__chips typo__transform--capital",children:JSON.parse(J.genres).map((function(e){return(0,N.jsx)("div",{className:"book__data__container__desc__summary__chips__item",children:e})}))}),(0,N.jsx)("div",{className:"book__data__container__desc__summary__head typo__color--n700",children:"Prefered Age Group"}),(0,N.jsx)("div",{className:"book__data__container__desc__summary__chips typo__transform--capital",children:JSON.parse(J.age_group).map((function(e){return(0,N.jsx)("div",{className:"book__data__container__desc__summary__chips__item",children:e})}))}),(0,N.jsx)("div",{className:"book__data__container__desc__summary__head typo__color--n700",children:"Language"}),(0,N.jsx)("div",{className:"book__data__container__desc__summary__data",children:J.language}),(0,N.jsx)("div",{className:"book__data__container__desc__summary__head typo__color--n700",children:"Price"}),(0,N.jsx)("div",{className:"book__data__container__desc__summary__data utils__d__flex utils__align__center",children:0===J.price?"FREE":(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("img",{src:"https://imagedelivery.net/yOWneHxM1h9mu46Te3Yjwg/59c27d12-e4eb-4f74-7a6e-b33ba6537600/icon48",style:{width:20,height:20,objectFit:"contain"},alt:"USDC"}),"\xa0",J.price]})}),(0,N.jsx)("div",{className:"book__data__container__desc__summary__head typo__color--n700",children:"Published On"}),(0,N.jsx)("div",{className:"book__data__container__desc__summary__data",children:d()(J.publication_date).add(6,"h").format("D MMM, YYYY")}),(0,N.jsx)("div",{className:"book__data__container__desc__summary__head typo__color--n700",children:"Live Readers"}),(0,N.jsxs)("div",{className:"book__data__container__desc__summary__data",children:[lt," people reading"]}),(0,N.jsx)("div",{className:"book__data__container__desc__summary__head typo__color--n700",children:"Total Read Time"}),(0,N.jsxs)("div",{className:"book__data__container__desc__summary__data",children:[Math.ceil(ht/60)," minutes"]})]})}),(0,N.jsxs)("div",{className:"book__data__container__desc__right",children:[(0,N.jsxs)("div",{className:"book__data__container__desc__interacts",children:[(0,N.jsxs)("div",{className:"book__data__container__desc__interacts__item",children:[(0,N.jsx)("div",{className:"typo__subtitle typo__color--n500",children:"Likes"}),(0,N.jsx)(K,{width:24,height:24,className:"book__data__container__desc__interacts__item__icon",stroke:xe?"#ff5722":"currentColor",fill:xe?"#ff5722":"transparent",onClick:function(){gt()?te?(xe?(ge((function(e){return e-1})),(0,w.Z)("event_book_unlike")):(ge((function(e){return e+1})),(0,w.Z)("event_book_like")),c()({url:"".concat(F._,"/api/book/likes"),method:"POST",data:{bookAddress:J.book_address,ownerAddress:R,likedState:!xe}}).then((function(e){200===e.status?Ne((function(e){return!e})):s((0,A.e1)("NOT200"))})).catch((function(e){s((0,A.e1)("ERROR"))})).finally((function(){return Y(!1)}))):s((0,A.e1)({show:!0,message:"Only owners can like a book.",type:3})):s((0,A.e1)({show:!0,message:"Please login first.",type:3}))}}),(0,N.jsx)("div",{className:"typo__head--5 typo__color--n600",children:ve||"0"})]}),(0,N.jsxs)("div",{className:"book__data__container__desc__interacts__item",children:[(0,N.jsx)("div",{className:"typo__subtitle typo__color--n500",children:"Reviews"}),(0,N.jsx)(Fe,{width:24,height:24,stroke:"currentColor"}),(0,N.jsx)("div",{className:"typo__head--5 typo__color--n600",children:qe||"0"})]}),(0,N.jsxs)("div",{className:"book__data__container__desc__interacts__item",children:[(0,N.jsx)("div",{className:"typo__subtitle typo__color--n500",children:"Pages"}),(0,N.jsx)(re,{width:24,height:24,stroke:"currentColor"}),(0,N.jsx)("div",{className:"typo__head--5 typo__color--n600",children:J.print||"00"})]}),(0,N.jsxs)("div",{className:"book__data__container__desc__interacts__item",children:[(0,N.jsx)("div",{className:"typo__subtitle typo__color--n500",children:"Sold"}),(0,N.jsx)(ye,{width:24,height:24,stroke:"currentColor"}),(0,N.jsx)("div",{className:"typo__head--5 typo__color--n600",children:J.copies||"00"})]})]}),(0,N.jsxs)("div",{className:"book__data__container__desc__tabs",children:[(0,N.jsx)("div",{ref:mt,className:"book__data__container__desc__tabs__container",children:function(){var e=[];return t.forEach((function(t){e.push((0,N.jsxs)("div",{onClick:function(){return z(t.id)},id:"BOOK_PAGE_"+t.id,className:t.id===V?"book__data__container__desc__tabs__container__item book__data__container__desc__tabs__container__item--active":"book__data__container__desc__tabs__container__item utils__cursor--pointer",children:[(0,x.fb)(t.icon)&&t.icon,(0,N.jsx)("h5",{className:"typo__head typo__head--6 typo__transform--capital",children:t.label})]},t.id))})),e}()}),(0,N.jsx)("div",{className:"book__data__container__desc__tabs__data",children:function(){switch(V){case"TAB01":return(0,N.jsx)("p",{className:"typo--break-spaces typo__body typo__color--n600",children:J.synopsis});case"TAB02":return(0,N.jsxs)(h.Fragment,{children:[!(0,x.fb)(Ae)&&te?(0,N.jsxs)("div",{className:"book__data__container__desc__tabs__data__action",children:[(0,N.jsx)("div",{className:"book__data__container__desc__tabs__data__action__icon",children:(0,N.jsx)(Fe,{width:32,height:32,stroke:"currentColor"})}),(0,N.jsx)("div",{className:"book__data__container__desc__tabs__data__action__label typo__head--6",children:"Write a Review"}),(0,N.jsx)(k.Z,{type:"primary",onClick:function(){return s(l?(0,j.K4)(j.wW):(0,A.e1)("NOT_LOGGED_IN"))},children:"Review"})]}):null,(0,N.jsxs)("div",{className:"book__data__container__desc__tabs__data__reviews",children:[function(e){var t=[];return(0,x.vd)(e)&&e.forEach((function(e){return t.push((0,N.jsxs)("div",{className:"book__data__container__desc__tabs__data__reviews__item",children:[(0,N.jsx)("div",{className:"book__data__container__desc__tabs__data__reviews__item__header__head typo__head typo__head--6",children:e.title}),(0,N.jsxs)("div",{className:"book__data__container__desc__tabs__data__reviews__item__header",children:[(0,N.jsx)(b.Z,{rating:e.rating,size:"small"}),(0,N.jsx)("div",{className:"book__data__container__desc__tabs__data__reviews__item__header__time typo__color--n500",children:d()(e.reviewed_at).format("D MMM, YYYY")})]}),(0,N.jsx)("div",{className:"book__data__container__desc__tabs__data__reviews__item__body typo__body typo__body--2",children:e.body})]}))})),t}(We),0===(null===We||void 0===We?void 0:We.length)?(0,N.jsx)("div",{className:"book__data__container__desc__tabs__data__empty",children:"No Reviews"}):""]})]});case"TAB03":return(0,N.jsxs)(h.Fragment,{children:[(0,x.fb)(Xe)||!pe&&!te?null:(0,N.jsxs)("div",{className:"book__data__container__desc__tabs__data__action",children:[(0,N.jsx)("div",{className:"book__data__container__desc__tabs__data__action__icon",children:(0,N.jsx)(Me.r,{width:32,height:32,stroke:"currentColor"})}),(0,N.jsx)("div",{className:"book__data__container__desc__tabs__data__action__label typo__head--6",children:"Write a Quote"}),(0,N.jsx)(k.Z,{type:"primary",onClick:function(){return s(l?(0,j.K4)(j.D4):(0,A.e1)("NOT_LOGGED_IN"))},children:"Quote"})]}),(0,N.jsxs)("div",{className:"book__data__container__desc__tabs__data__quotes",children:[function(e){var t=[];return e.forEach((function(e,r){t.push((0,N.jsxs)("div",{className:"book__data__container__desc__tabs__data__quotes__item",children:[(0,N.jsx)("div",{className:"book__data__container__desc__tabs__data__quotes__item__icon",children:(0,N.jsx)(ue,{width:32,height:32,fill:"currentColor"})}),(0,N.jsx)("div",{className:"book__data__container__desc__tabs__data__quotes__item__body typo__body",children:e.body}),(0,N.jsx)("div",{className:"book__data__container__desc__tabs__data__quotes__item__time typo__cap typo__cap--2",children:d()(e.created_at).format("D MMM, YYYY")||"-"})]},r))})),t}(rt),0===(null===rt||void 0===rt?void 0:rt.length)?(0,N.jsx)("div",{className:"book__data__container__desc__tabs__data__empty",children:"No Quotes"}):""]})]})}}()})]})]})]})]})]}),(0,N.jsx)(M,{data:J,onNewBookPurchase:function(){return function(){var e=function(){m.Z.purchaseNft(R,J.book_address,J.price.toString(),y.wallet.signer).then((function(e){s((0,A.e1)({show:!0,message:"Book purchased.",type:1})),s((0,j.VG)());var t=Number(e.events.filter((function(e){return"Transfer(address,address,uint256)"===e.eventSignature}))[0].args[2]._hex);c()({url:F._+"/api/book/purchase",method:"POST",data:{ownerAddress:R,bookAddress:J.book_address,tokenId:t,purchasePrice:J.price}}).then((function(e){200===e.status?ae(!0):s((0,A.e1)("NOT200"))})).catch((function(e){s((0,A.e1)("ERROR"))})).finally((function(){return Y(!1)})),c()({url:F._+"/api/book/copies",method:"POST",data:{bookAddress:J.book_address,copies:t}}).then((function(e){200!==e.status&&s((0,A.e1)("NOT200"))})).catch((function(e){s((0,A.e1)("ERROR"))}))})).catch((function(e){var t,r;Y(!1),e.message?(null===e||void 0===e||null===(t=e.message)||void 0===t?void 0:t.indexOf("execution reverted: ERC20: transfer amount exceeds balance"))>-1?s((0,A.e1)({show:!0,message:"You do not have enough USDC to purchase this book. Please visit the faucet to get some.",type:3})):(null===e||void 0===e||null===(r=e.message)||void 0===r?void 0:r.indexOf("execution reverted: NalndaBook: Book unapproved from marketplace!"))>-1?s((0,A.e1)({show:!0,message:"The book has not been approved for sales yet. Please try again later.",type:3})):4001===e.code&&s((0,A.e1)({show:!0,message:"Transaction denied by user.",type:3})):s((0,A.e1)("ERROR"))}))};(0,w.Z)("event_book_purchase_new"),Y(!0),(0,x.fb)(y.wallet.signer)&&(0,x.fb)(R)?e():(Y(!0),B.Z.connectWallet().then((function(t){Y(!1),s((0,W.kH)({wallet:t.wallet,provider:t.provider,signer:t.signer,address:t.address})),S(t.address),e()})).catch((function(e){s((0,A.e1)({show:!0,message:"Error while connecting wallet.",type:4})),Y(!1)})))}()},onOldBookPurchase:function(e){return function(e){(0,w.Z)("event_book_purchase_old"),gt()&&(Y(!0),m.Z.buyListedCover(e.order_id,e.price,y.wallet.signer).then((function(t){c()({url:F._+"/api/book/purchase/secondary",method:"POST",data:{newOwnerAddress:R,previousOwnerAddress:e.previous_owner,bookAddress:e.book_address,tokenId:e.token_id,purchasePrice:e.price,orderId:e.order_id,daScore:e.da_score}}).then((function(e){200===e.status?(s((0,j.VG)()),ae(!0)):s((0,A.e1)("NOT200"))})).catch((function(e){s((0,A.e1)("ERROR"))})).finally((function(){return Y(!1)}))})).catch((function(e){Y(!1)})))}(e)}}),(0,N.jsx)(O,{book:J,userCopy:le,onListHandler:function(e){return function(e){(0,w.Z)("event_book_list"),(0,x.fb)(R)&&(Y(!0),m.Z.listBookToMarketplace(J.book_address,le.token_id,e,y.wallet.signer).then((function(t){Y(!0);var r=parseInt(t.events.filter((function(e){return"CoverListed"===e.event}))[0].args[0]._hex);c()({url:F._+"/api/book/list",method:"POST",data:{ownerAddress:R,bookAddress:J.book_address,bookPrice:e,bookOrderId:r,bookTokenId:le.token_id}}).then((function(e){200===e.status?(ie(!0),s((0,j.VG)()),s((0,A.e1)({show:!0,message:"Book listed on marketplace.",type:1}))):s((0,A.e1)("NOT200"))})).catch((function(e){s((0,A.e1)("ERROR"))})).finally((function(){Y(!1)}))})).catch((function(e){(0,x.fb)(e.reason)?e.reason.includes("Can't list the cover at this time")?s((0,A.e1)({show:!0,message:"Please wait for some more time before listing the book.",type:3})):e.reason.includes("Listing for this book is disabled")?s((0,A.e1)({show:!0,message:"Listing this book is not allowed right now. Please try again later.",type:3})):e.reason.includes("Seller should own the NFT to list")&&s((0,A.e1)({show:!0,message:"Book is already listed. Please contact us on support@nalnda.com",type:3})):s((0,A.e1)("ERROR"))})).finally((function(){return Y(!1)})))}(e)}}),(0,N.jsx)(L,{ReviewForm:Ue,setReviewForm:Qe,reviewHandler:function(){(0,w.Z)("event_book_review"),(0,x.fb)(R)?(0,x.UE)(Ue.body)&&(0,x.UE)(Ue.rating)&&(0,x.UE)(Ue.title)?(Y(!0),c()({url:"".concat(F._,"/api/book/reviews"),method:"POST",data:{review:(0,a.Z)({},Ue),bookAddress:J.book_address,ownerAddress:R}}).then((function(e){200===e.status?(s((0,j.VG)()),kt(),bt()):s((0,A.e1)("NOT200"))})).catch((function(e){Y(!1),s((0,A.e1)("ERROR"))}))):s((0,A.e1)({show:!0,message:"Please fill the review.",type:3})):s((0,A.e1)({show:!0,message:"Please login first",type:3}))}}),(0,N.jsx)(E,{QuotesForm:st,setQuotesForm:it,quoteHandler:function(){(0,w.Z)("event_book_quote"),(0,x.fb)(R)?(0,x.UE)(st.quote)?(Y(!0),c()({url:"".concat(F._,"/api/book/quotes"),method:"POST",data:{quote:{body:st.quote},bookAddress:J.book_address,ownerAddress:R}}).then((function(e){200===e.status?(s((0,j.VG)()),yt(),vt()):s((0,A.e1)("NOT200"))})).catch((function(e){Y(!1),s((0,A.e1)("ERROR"))}))):s((0,A.e1)({show:!0,message:"Please enter the quote.",type:3})):s((0,A.e1)({show:!0,message:"Please login first",type:3}))}})]}):null]})})}}]);
//# sourceMappingURL=748.f208ef43.chunk.js.map